"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Boss=function(){function a(e){_classCallCheck(this,a);var t={axisRotateR:0,axisRotateAngle:0,rotate:0,scale:0,axisRotateAngleV:1,rotateV:1,bullets:[],HP:24,beforeGenerateEnemyTime:new Date,beginAppear:!0,isAppearing:!1,isDisappeared:!1,appearTimes:0,appearTimer:null,disappearTimer:null};Object.assign(t,e),Object.assign(this,t)}return _createClass(a,[{key:"draw",value:function(){ctx.save(),ctx.translate(originPos(this.axisRotateR,this.axisRotateAngle).x,originPos(this.axisRotateR,this.axisRotateAngle).y),ctx.scale(this.scale,this.scale),ctx.rotate(this.rotate*degToPi),ctx.fillStyle="rgba(255, 255, 255, 0.4)",ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(11,0),ctx.lineTo(18,6),ctx.lineTo(18,15),ctx.lineTo(-18,15),ctx.lineTo(-18,6),ctx.lineTo(-11,0),ctx.closePath(),ctx.fill(),ctx.fillStyle=globalColor.orange,ctx.beginPath(),ctx.moveTo(0,9),ctx.lineTo(11,9),ctx.lineTo(18,15),ctx.lineTo(18,36),ctx.lineTo(-18,36),ctx.lineTo(-18,15),ctx.lineTo(-11,9),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgba(255, 255, 255, 0.25)",ctx.beginPath(),ctx.moveTo(0,17),ctx.lineTo(4,17),ctx.lineTo(14,24),ctx.lineTo(14,28),ctx.lineTo(-14,28),ctx.lineTo(-14,24),ctx.lineTo(-4,17),ctx.closePath(),ctx.fill(),ctx.fillStyle=globalColor.white,ctx.beginPath(),ctx.moveTo(18,-6),ctx.lineTo(26,-6),ctx.lineTo(34,15),ctx.lineTo(34,42),ctx.lineTo(18,42),ctx.closePath(),ctx.fill(),ctx.fillStyle=globalColor.white,ctx.beginPath(),ctx.moveTo(-18,-6),ctx.lineTo(-26,-6),ctx.lineTo(-34,15),ctx.lineTo(-34,42),ctx.lineTo(-18,42),ctx.closePath(),ctx.fill(),ctx.fillStyle=globalColor.red,ctx.beginPath(),ctx.moveTo(34,9),ctx.lineTo(42,9),ctx.lineTo(58,42),ctx.lineTo(58,50),ctx.lineTo(34,50),ctx.closePath(),ctx.fill(),ctx.fillStyle=globalColor.blue,ctx.beginPath(),ctx.moveTo(-30,9),ctx.lineTo(-38,9),ctx.lineTo(-54,42),ctx.lineTo(-54,50),ctx.lineTo(-30,50),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgba(255, 255, 255, 0.3)",ctx.beginPath(),ctx.moveTo(34,50),ctx.lineTo(34,56),ctx.lineTo(50,56),ctx.lineTo(50,50),ctx.fill(),ctx.beginPath(),ctx.moveTo(-30,50),ctx.lineTo(-30,56),ctx.lineTo(-46,56),ctx.lineTo(-46,50),ctx.fill(),ctx.strokeStyle=globalColor.white,ctx.lineWidth=2.8,ctx.beginPath(),ctx.arc(45,40,4.4,0,2*Math.PI),ctx.stroke(),ctx.strokeStyle=globalColor.orange,ctx.beginPath(),ctx.moveTo(-33.2,25),ctx.lineTo(-33.2-9.6,34.6),ctx.moveTo(-33.2-9.6,25),ctx.lineTo(-33.2,34.6),ctx.stroke(),ctx.fillStyle="rgba(255, 255, 255, 0.24)",ctx.beginPath(),ctx.moveTo(-50,33.75),ctx.lineTo(-54,42),ctx.lineTo(-54,50),ctx.lineTo(-36,50),ctx.closePath(),ctx.fill(),ctx.restore(),this.bullets.forEach(function(e){e.draw()})}},{key:"update",value:function(){this.beginAppear&&this.appear(),this.beginAppear=!1,!this.isAppearing&&this.isDisappeared,this.bullets.forEach(function(e,t,a){e.update(t,a)})}},{key:"appear",value:function(){var e=this;if(!game.isEnd){this.appearTimes+=1,this.isDisappeared=!1,this.isAppearing=!0,gameCrawler.textContent="⚠ BOSS IS COMING",TweenLite.to(this,1.2,{scale:1,ease:Expo.easeOut});var t=getRandom(45,135);TweenLite.to(this,1.6,{axisRotateAngle:"+=".concat(t),rotate:"+=".concat(t),ease:Expo.easeOut,onComplete:function(){e.isAppearing=!1}}),this.appearTimes&&this.appearTimes%3?setTimeout(function(){0===e.HP||game.isPause||e.shoot()},getRandom(1e3,2e3)):setTimeout(function(){0===e.HP||game.isPause||e.generateEnemy()},getRandom(1e3,2e3)),this.disappearTimer=setTimeout(function(){0===e.HP||game.isPause||e.disappear()},getRandom(3e3,4e3)),playSound("membrane","A4","4n")}}},{key:"disappear",value:function(){var e=this;if(!game.isEnd){this.isDisappeared=!0,TweenLite.to(this,1.2,{scale:0,ease:Expo.easeOut});var t=getRandom(45,225);TweenLite.to(this,1.6,{axisRotateAngle:"+=".concat(t),rotate:"+=".concat(t),ease:Expo.easeOut}),this.appearTimer=setTimeout(function(){0===e.HP||game.isPause||e.appear()},2e3),playSound("membrane","F3","4n")}}},{key:"shoot",value:function(){var e=this;this.bullets.push(new BossBullet({p:{x:originPos(this.axisRotateR,this.axisRotateAngle).x,y:originPos(this.axisRotateR,this.axisRotateAngle).y},rotateAngle:this.rotate,axisRotateR:this.axisRotateR})),playSound("mono","F2","4n",0,-10),setTimeout(function(){e.bullets.push(new BossBullet({p:{x:originPos(e.axisRotateR,e.axisRotateAngle).x,y:originPos(e.axisRotateR,e.axisRotateAngle).y},rotateAngle:e.rotate,waveLength:14,axisRotateR:e.axisRotateR})),playSound("mono","F2","4n",0,-10)},200)}},{key:"generateEnemy",value:function(){var t=this,e=function(){switch(getRandom(1,3)){case 1:game.circles.push(new Circle({axisRotateR:t.axisRotateR,axisRotateAngle:t.axisRotateAngle%360,axisRotateAngleV:-getRandom(2,8)/10,rotate:getRandom(0,360),isBossGenerate:!0}));break;case 2:game.triangles.push(new Triangle({axisRotateR:t.axisRotateR,axisRotateAngle:t.axisRotateAngle%360,axisRotateAngleV:getRandom(2,8)/10,rotate:t.axisRotateAngle%360,isBossGenerate:!0}));break;case 3:var e=getRandom(0,360);game.polygons.push(new Polygon({axisRotateR:{whole:t.axisRotateR,big:t.axisRotateR,small:t.axisRotateR},axisRotateAngle:{whole:t.axisRotateAngle%360,big:t.axisRotateAngle%360,small:t.axisRotateAngle%360},rotate:{whole:e,big:e,small:e},rotateV:getRandom(4,8)/10,isBossGenerate:!0}))}};e(),e(),.5<=Math.random()&&setTimeout(function(){e()},400)}}]),a}(),BossBullet=function(){function a(e){_classCallCheck(this,a);var t={p:{x:0,y:0},axisRotateR:0,color:globalColor.orange,moveX:8,moveXV:4,rotateAngle:0,waveLength:22,waveFreq:.3,waveAmp:4,waveFlow:3,isBoss:!0};Object.assign(t,e),Object.assign(this,t)}return _createClass(a,[{key:"draw",value:function(){ctx.save(),ctx.translate(this.p.x,this.p.y),ctx.rotate((this.rotateAngle-90)*degToPi),drawWaveBullet(this,"moveX",2.4,"rgba(245, 175, 95, 0.72)"),ctx.restore()}},{key:"update",value:function(e,t){this.moveX+=this.moveXV,enemyMethods.attackShooter(this,e,t)}}]),a}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var Circle=function(){function a(t){_classCallCheck(this,a);var e={axisRotateR:0,axisRotateAngle:0,r:22,rotate:0,scale:0,axisRotateRV:0,axisRotateAngleV:0,color:globalColor.orange,HP:2,bullets:[],beforeRotateTime:new Date,isRotating:!1,beginAppear:!0,isBossGenerate:!1};Object.assign(e,t),Object.assign(this,e)}return _createClass(a,[{key:"draw",value:function(){var t=this.r+5,e=this.r-10,a=14;ctx.save(),ctx.translate(originPos(this.axisRotateR,this.axisRotateAngle).x,originPos(this.axisRotateR,this.axisRotateAngle).y),ctx.rotate(this.rotate*degToPi),ctx.scale(this.scale,this.scale),ctx.beginPath(),ctx.arc(4,0,t,0,2*Math.PI),ctx.fillStyle="rgba(245, 175, 95, 0.21)",ctx.fill(),ctx.beginPath(),ctx.arc(-20,0,e,0,2*Math.PI),ctx.fillStyle="rgba(245, 175, 95, 0.21)",ctx.fill(),ctx.beginPath(),ctx.arc(0,0,this.r,0,2*Math.PI),ctx.fillStyle=this.color,ctx.fill(),ctx.beginPath(),ctx.fillStyle=globalColor.white,ctx.arc(a*Math.cos(60*degToPi),a*Math.sin(60*degToPi),2.4,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.arc(a*Math.cos(180*degToPi),a*Math.sin(180*degToPi),2.4,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.arc(a*Math.cos(300*degToPi),a*Math.sin(300*degToPi),2.4,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.fillStyle=globalColor.white,ctx.lineTo(-8,0),ctx.$triLineTo(-2,32),ctx.$triLineTo(-12,120),ctx.$triLineTo(-2.4,176),ctx.$triLineTo(-8,240),ctx.$triLineTo(-1.6,320),ctx.closePath(),ctx.fill(),ctx.restore(),this.bullets.forEach(function(t){t.draw()})}},{key:"update",value:function(t){var e=this;this.beginAppear&&this.appear(this.isBossGenerate),this.beginAppear=!1,game.isStart&&enemyMethods.approach(this),this.bullets.forEach(function(t,e,a){t.update(e,a)}),this.isRotating||(this.axisRotateAngle+=this.axisRotateAngleV);var a=new Date;a-this.beforeRotateTime>getRandom(4e3,8e3)&&(this.isRotating=!0,TweenLite.to(this,.4,{rotate:this.axisRotateAngle,ease:Power2.easeOut,onComplete:function(){e.isRotating=!1,game.isStart&&e.shoot()}}),this.beforeRotateTime=a),enemyMethods.hitShooter(game.circles,t,"circle",this.axisRotateR,this.axisRotateAngle)}},{key:"shoot",value:function(){for(var a=this,t=function(t){var e=setTimeout(function(){a.bullets.push(new CirBullet({p:{x:originPos(a.axisRotateR,a.axisRotateAngle).x,y:originPos(a.axisRotateR,a.axisRotateAngle).y},rotateAngle:a.rotate,moveX:-a.r-10,axisRotateR:a.axisRotateR})),clearTimeout(e)},t*getRandom(200,400))},e=0;e<getRandom(1,2);e+=1)t(e);gameCrawler.textContent=.8<=Math.random()?"UNDER ATTACK🤕":"ATTACK⚡️",playSound("membrane","D5")}},{key:"appear",value:function(t){gameCrawler.textContent="⚠ ENEMY IS COMING",TweenLite.to(this,.8,{scale:1,ease:Back.easeOut.config(1.7)}),TweenLite.from(this,1.6,{rotate:0,ease:Back.easeOut.config(1.7)}),t&&TweenLite.to(this,1.6,{axisRotateR:"+=".concat(getRandom(80,160)),ease:Power2.easeOut}),game.isStart&&playSound("synth","F4","4n")}}]),a}(),CirBullet=function(){function a(t){_classCallCheck(this,a);var e={p:{x:0,y:0},axisRotateR:0,color:globalColor.orange,moveX:0,moveXV:-4.5,rotateAngle:0};Object.assign(e,t),Object.assign(this,e)}return _createClass(a,[{key:"draw",value:function(){ctx.save(),ctx.translate(this.p.x,this.p.y),ctx.rotate(this.rotateAngle*degToPi),ctx.beginPath(),ctx.arc(this.moveX,0,4,0,2*Math.PI),ctx.fillStyle=this.color,ctx.fill(),ctx.restore()}},{key:"update",value:function(t,e){this.moveX+=this.moveXV,enemyMethods.attackShooter(this,t,e)}}]),a}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var enemyMethods={approach:function(e){var t=e.axisRotateR,o="object"===_typeof(t);if(!e.axisRotateRV){var a=game.shooter,i=a.r+a.cirSolidLineW/2,n=(o?t.whole:t-e.r)-i,s=getRandom(30,40);e.axisRotateRV=-n/(s*updateFPS)}o?e.HP.whole?t.small=t.big=t.whole+=e.axisRotateRV:(t.big+=e.axisRotateRV*getRandom(3,4),t.small+=e.axisRotateRV*getRandom(1,4)):e.axisRotateR+=e.axisRotateRV},dieEffect:function(o,a,i,n){var e=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=1;requestAnimationFrame(function e(){game.isPause||(s+=1),ctx.beginPath(),ctx.save(),ctx.strokeStyle="rgba(".concat(n,", ").concat((48-s)/46,")"),ctx.fillStyle="rgba(".concat(n,", ").concat((48-s)/230,")"),ctx.shadowColor="rgba(".concat(n,", 0.48)"),ctx.shadowBlur=2,ctx.lineWidth=2;var t=o*baseLog(3,(s-2)/46*8+1);ctx.arc(a,i,t,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.restore(),s<48&&requestAnimationFrame(e)}),e||setTimeout(function(){gameCrawler.textContent="ENEMY DIES😇"},0),playSound("synth","G2","8n",0,25),playSound("duo","F2","4n",0,15),playSound("duo","E2","4n",0,10)},hitShooter:function(o,a,i,n,s){var e,r=o[a],t=game.shooter;e="shield"!==t.state?Math.abs(mouseMoveAngle-s*degToPi)>=135*degToPi&&Math.abs(mouseMoveAngle-s*degToPi)<=225*degToPi:Math.abs(mouseMoveAngle-s*degToPi)>=90*degToPi&&Math.abs(mouseMoveAngle-s*degToPi)<=270*degToPi;var l=function(){if("big"!==i&&"small"!==i)if(o.splice(a,1),"whole"!==i){var e="circle"===i?"245, 175, 95":"54, 118, 187";enemyMethods.dieEffect(r.r,originPos(n,s).x,originPos(n,s).y,e)}else{enemyMethods.dieEffect(28,r.originPos(i).x,r.originPos(i).y,"231, 70, 93")}else{r.HP[i]-=1;var t="big"===i?28:22;enemyMethods.dieEffect(t,r.originPos(i).x,r.originPos(i).y,"231, 70, 93"),0===r.HP.big&&0===r.HP.small&&o.splice(a,1)}};n<=t.r+t.cirSolidLineW/2?(l(),enemyMethods.attackShooterResult(),playSound("membrane","B4")):e&&n<=t.shieldR+t.shieldLineW/2&&(l(),t.isProtect=!0,gameCrawler.textContent="BLOCK😉",playSound("membrane","D4"))},attackShooter:function(e,t,o){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=game.shooter,n=i.r+i.cirSolidLineW/2,s=i.shieldR+i.shieldLineW/2;Math.abs(e.moveX)>=e.axisRotateR-(n+a)&&(enemyMethods.attackShooterResult(),o.splice(t,1),e.isBoss?playSound("mono","C2","8n",0,-10):playSound("membrane","B4"));var r=e.isBoss?e.rotateAngle+90:e.rotateAngle,l=Math.abs(mouseMoveAngle/degToPi-(r%360+(r<0?360:0)));("shield"!==i.state?135<=l&&l<=225:90<=l&&l<=270)&&Math.abs(e.moveX)>=e.axisRotateR-(s+a)&&(o.splice(t,1),gameCrawler.textContent="BLOCK😉",playSound("membrane","D4"))},attackShooterResult:function(){if(game.isStart&&(10!==game.currentLevel||game.boss)){var e=game.shooter,t=shooterHPBar.offsetWidth-72;if(e.isAttacked=!0,shooterHPBar.style.width="".concat(t<0?0:t,"px"),t<=0){if(!e.hearts)return game.endGame(),playSound("synth","A3"),playSound("synth","E2","8n",160),playSound("synth","A2","8n",320),clearTimeout(game.crawlerClearedTimer),void(gameCrawler.textContent="YOU, ".concat(game.playerName,"💀, ARE DEAD"));var o=document.querySelectorAll(".panel__game-heart");o[0].parentNode.removeChild(o[0]),e.hearts-=1,shooterHPBar.style.width="".concat(216,"px")}gameCrawler.textContent=.5<=Math.random()?"OUCH😣":"UGGH😫"}},bossDieResult:function(){var e=game.boss;enemyMethods.dieEffect(264,originPos(e.axisRotateR,e.axisRotateAngle).x,originPos(e.axisRotateR,e.axisRotateAngle).y,"245, 175, 95",!0),setTimeout(function(){enemyMethods.dieEffect(264,originPos(e.axisRotateR,e.axisRotateAngle).x,originPos(e.axisRotateR,e.axisRotateAngle).y,"54, 118, 187",!0)},300),setTimeout(function(){enemyMethods.dieEffect(264,originPos(e.axisRotateR,e.axisRotateAngle).x,originPos(e.axisRotateR,e.axisRotateAngle).y,"231, 70, 93",!0)},600),game.boss=null,bgm.pause(),bgm.currentTime=0,victoryBgm.play(),victoryBgm.volume=.5,setTimeout(function(){game.endGame()},3e3),clearTimeout(game.crawlerClearedTimer),gameCrawler.textContent="BOSS DIES!!!🎊"}};
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var ww,wh,gameW,gameH,gameHalfDiagonalL,updateFPS=30,updateTime=0,globalColor={red:"#e7465d",orange:"#f5af5f",yellow:"#f7b52c",blue:"#3676bb",blueDark:"#001d2e",white:"#fff"},props=["heart","crackdown","shield","double","wave"],startBtn=document.getElementById("start-btn"),restartBtn=document.getElementById("restart-btn"),starsBtn=document.getElementById("stars-btn"),backBtn=document.getElementById("back-btn"),restartBtnStars=document.getElementById("restart-btn--stars"),cover=document.getElementById("cover"),gamePanel=document.getElementById("game-panel"),batteryInfo=document.getElementById("battery-info"),shooterHPBar=document.getElementById("hp"),heartWrapper=document.getElementById("heart-wrapper"),prop=document.getElementById("prop"),propImg=document.getElementById("prop__img"),propLastTime=document.getElementById("prop__last-time"),batteryNum=document.getElementById("battery-num"),result=document.getElementById("game-result"),panel=document.getElementById("panel"),container=document.getElementById("container"),keyboard=document.getElementById("keyboard"),gameTime=document.getElementById("game-time"),gameLevel=document.getElementById("game-level"),gameCrawler=document.getElementById("game-crawler"),playerName=document.getElementById("player-name"),warning=document.getElementById("warning"),resultBoss=document.getElementById("result-boss"),resultBattery=document.getElementById("result-battery"),resultBullet=document.getElementById("result-bullet"),rankingNum=document.getElementById("ranking-num"),resultRanking=document.getElementById("result-ranking"),resultScore=document.getElementById("result-score"),resultStars=document.getElementById("result-stars"),bgm=document.getElementById("bgm"),victoryBgm=document.getElementById("victory-bgm"),starWrapper1=document.getElementById("star-wrapper1"),starWrapper2=document.getElementById("star-wrapper2"),starWrapper3=document.getElementById("star-wrapper3"),shareFb=document.getElementById("share-fb"),shareTwitter=document.getElementById("share-twitter"),canvas=document.getElementById("game"),ctx=canvas.getContext("2d");function initCanvas(){gameW=canvas.width,gameH=canvas.height,gameHalfDiagonalL=Math.round(Math.sqrt(canvas.width*canvas.width+canvas.height*canvas.height)/2),ww=document.documentElement.clientWidth,wh=document.documentElement.clientHeight}var coverCircle,coverTriangle,coverPolygon,game,degToPi=Math.PI/180,Game=function(){function a(e){_classCallCheck(this,a);var t={shooter:null,prop:null,batteryNum:0,circles:[],triangles:[],polygons:[],subTris:[],isStart:!1,isEnd:!1,isPause:!1,blockV:{x:-2,y:2},currentLevel:0,countdownSeconds:0,hpRecoverTimer:null,countdownTimer:null,countupTimer:null,propGeneratedTimer:null,crawlerClearedTimer:null,propGeneratedInterval:200,boss:null,playerName:"",beatBossSeconds:0,isMuted:!1,isDisplayStars:!1};Object.assign(t,e),Object.assign(this,t)}return _createClass(a,[{key:"init",value:function(){var e=this;canvas.addEventListener("mousemove",handleMouseMove),canvas.addEventListener("click",handleClick),window.addEventListener("keyup",handleKeyup),handlePlayerName(),startBtn.addEventListener("click",function(){e.checkPlayerName()&&e.startGame()}),restartBtn.addEventListener("click",function(){e.startGame()}),restartBtnStars.addEventListener("click",function(){e.startGame()}),isMob()&&(playerName.classList.add("dpn"),startBtn.classList.add("dpn"),warning.classList.remove("dpn")),this.drawCover(),this.render(),this.update(),this.setBlockV(),this.recoverShooterHPBar(),starsBtn.addEventListener("click",function(){resultRanking.classList.add("dpn"),resultScore.classList.add("dpn"),resultStars.classList.remove("dpn"),result.classList.add("t20"),e.isDisplayStars||e.handleGameStars(),e.isDisplayStars=!0}),backBtn.addEventListener("click",function(){resultRanking.classList.remove("dpn"),resultScore.classList.remove("dpn"),resultStars.classList.add("dpn"),result.classList.remove("t20")}),shareFb.addEventListener("click",function(){window.open("https://www.facebook.com/sharer/sharer.php?u=https://yeefun.github.io/radio-defense","","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")}),shareTwitter.addEventListener("click",function(){window.open("http://twitter.com/share?url=".concat(encodeURIComponent("https://yeefun.github.io/radio-defense"),"&via=").concat(encodeURIComponent("szyeefun")),"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")})}},{key:"render",value:function(){var e=this;ctx.fillStyle=globalColor.blueDark,ctx.fillRect(0,0,gameW,gameH),this.drawBlock(),this.isStart||this.isEnd||(ctx.save(),ctx.beginPath(),ctx.arc(gameW/2,gameH/2,264,0,2*Math.PI),ctx.strokeStyle="rgba(255, 255, 255, 0.3)",ctx.stroke(),ctx.beginPath(),ctx.arc(gameW/2,gameH/2,184,0,2*Math.PI),ctx.lineWidth=1.6,ctx.strokeStyle=globalColor.white,ctx.stroke(),ctx.restore()),this.shooter.draw(),this.circles.forEach(function(e){e.draw()}),this.triangles.forEach(function(e){e.draw()}),this.polygons.forEach(function(e){e.draw()}),this.subTris.forEach(function(e){e.draw()}),this.prop&&this.prop.draw(),this.boss&&this.boss.draw(),this.isStart&&this.drawMouse(),requestAnimationFrame(function(){e.render()})}},{key:"update",value:function(){var e=this;updateTime+=1,this.isPause||this.isEnd||(this.shooter.update(),this.circles.forEach(function(e,t){e.update(t)}),this.triangles.forEach(function(e,t){e.update(t)}),this.polygons.forEach(function(e,t){e.update(t)}),this.subTris.forEach(function(e,t){e.update(t)}),this.prop&&this.prop.update(),this.boss&&this.boss.update()),setTimeout(function(){e.update()},1e3/updateFPS)}},{key:"drawCover",value:function(){this.shooter=new Shooter,this.circles.push(new Circle({axisRotateR:getRandom(gameHalfDiagonalL/2,gameHalfDiagonalL/1.5),axisRotateAngle:225,axisRotateAngleV:-getRandom(2,8)/10,rotate:getRandom(0,360)})),this.triangles.push(new Triangle({axisRotateR:getRandom(gameHalfDiagonalL/2,gameHalfDiagonalL/1.5),axisRotateAngle:45,axisRotateAngleV:getRandom(2,8)/10,rotate:45}));var e=getRandom(gameHalfDiagonalL/2,gameHalfDiagonalL/1.5),t=getRandom(0,360),a=getRandom(4,8)/10;this.polygons.push(new Polygon({axisRotateR:{whole:e,big:e,small:e},axisRotateAngle:{whole:315,big:315,small:315},rotate:{whole:t,big:t,small:t},rotateV:a}))}},{key:"drawBlock",value:function(){ctx.save(),ctx.beginPath(),ctx.strokeStyle="rgba(255, 255, 255, 0.16)",ctx.lineWidth=.4;for(var e=0;e<18;e+=1)ctx.moveTo(56*e+updateTime*this.blockV.x%56,0),ctx.lineTo(56*e+updateTime*this.blockV.x%56,gameH);for(var t=0;t<14;t+=1)ctx.moveTo(0,52*t+updateTime*this.blockV.y%52),ctx.lineTo(gameW,52*t+updateTime*this.blockV.y%52);ctx.stroke(),ctx.restore()}},{key:"drawMouse",value:function(){var e=mouseMovePos.x+gameW/2,t=mouseMovePos.y+gameH/2;ctx.save(),ctx.translate(e,t),ctx.strokeStyle=globalColor.white,ctx.lineWidth=.8,ctx.beginPath(),ctx.moveTo(-12,0),ctx.lineTo(12,0),ctx.moveTo(0,-12),ctx.lineTo(0,12),ctx.stroke(),ctx.restore(),ctx.fillStyle=globalColor.white,ctx.beginPath(),ctx.arc(e,t,1.6,0,2*Math.PI),ctx.fill()}},{key:"setBlockV",value:function(){var e=this;setTimeout(function(){e.blockV.x=8*Math.random()-4,e.blockV.y=8*Math.random()-4,e.setBlockV()},8e3)}},{key:"startGame",value:function(){var t=this;this.isStart=!0,this.isEnd=!1,cover.style.display="none",gamePanel.style.display="block",this.batteryNum=0,batteryNum.textContent=this.batteryNum,shooterHPBar.style.width="216px",this.playerName=playerName.value,this.shooter=new Shooter,heartWrapper.innerHTML="";for(var e=0;e<this.shooter.hearts;e++){var a=document.createElement("DIV");a.classList.add("panel__game-heart"),heartWrapper.appendChild(a)}this.circles.forEach(function(e){e.bullets=[]}),this.triangles.forEach(function(e){e.bullets=[],e.HP=0}),this.circles=[],this.triangles=[],this.polygons=[],this.boss&&(this.boss.bullets=[],this.boss=null),container.style.cursor="none",result.classList.add("op0"),panel.style.pointerEvents="none",batteryInfo.classList.remove("op0"),keyboard.classList.remove("op0"),gameLevel.textContent="",this.currentLevel=0,this.countdownSeconds=3,gameCrawler.textContent="👋".concat(this.playerName,"👋"),gameTime.textContent="00:0".concat(this.countdownSeconds,"”");!function e(){setTimeout(function(){if(0===t.countdownSeconds)return t.currentLevel+=1,t.setLevel(t.currentLevel),t.generateProp(),void t.clearCrawler();switch(t.countdownSeconds-=1,gameTime.textContent="00:0".concat(t.countdownSeconds,"”"),t.countdownSeconds){case 2:gameCrawler.textContent="🌊WAVES ARE COMING🌊";break;case 1:gameCrawler.textContent="😈ARE YOU READY😈";break;case 0:gameCrawler.textContent="🔥🔥GO🔥🔥"}playSound("synth","G4"),e()},1e3)}(),playSound("synth","C#5"),playSound("synth","E5","8n",160),victoryBgm.pause(),victoryBgm.currentTime=0,bgm.play(),bgm.volume=.5,resultRanking.classList.remove("dpn"),resultScore.classList.remove("dpn"),resultStars.classList.add("dpn"),result.classList.remove("t20");var n='<img src="./img/loading.svg" alt="loading icon" />';rankingNum.innerHTML=n,starWrapper1.innerHTML=n,starWrapper2.innerHTML=n,starWrapper3.innerHTML=n,this.isDisplayStars=!1}},{key:"endGame",value:function(){this.isStart=!1,this.isEnd=!0,10!==this.currentLevel?resultBoss.textContent="NO":resultBoss.textContent=this.beatBossSeconds,resultBattery.textContent=this.batteryNum,resultBullet.textContent=this.shooter.bulletNum,result.classList.remove("op0"),batteryInfo.classList.add("op0"),keyboard.classList.add("op0"),prop.classList.add("op0"),container.style.cursor="auto",panel.style.pointerEvents="auto",this.handleGameResult(),clearTimeout(this.countdownTimer),clearTimeout(this.countupTimer),clearTimeout(this.propGeneratedTimer)}},{key:"pauseGame",value:function(){this.currentLevel&&(this.isPause=!this.isPause,this.isPause?(clearTimeout(this.countdownTimer),clearTimeout(this.countupTimer),clearTimeout(this.propGeneratedTimer),clearTimeout(this.crawlerClearedTimer)):(this.generateProp(),this.clearCrawler(),this.boss?(this.countupTime(),this.boss.isDisappeared?(clearTimeout(this.boss.appearTimer),this.boss.appear()):(clearTimeout(this.boss.disappearTimer),this.boss.disappear())):this.countdownTime()))}},{key:"handleGameResult",value:function(){var e,t=this.playerName,a=this.currentLevel,n=this.batteryNum,s=this.shooter.bulletNum;e=10!==a||this.boss?"no":this.beatBossSeconds,axios.get("https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbwwNUeevxFlQaLzP_gdhnTmSC97HgRlpV6DOCUIzg/exec",{params:{name:t,level:a,battery:n,bullet:s,boss:e}}).then(function(e){var t=e.data;rankingNum.innerHTML="\n        <p>".concat(t.rank,"</p>\n        <span>/&nbsp;").concat(t.totalPlayers,"</span>\n      ")})}},{key:"handleGameStars",value:function(){axios.get("https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbx1L2GmotaRfoSMzVA5BtpC9kiWneoA69IOtoEi/exec").then(function(e){var t=e.data,a=t.firstData,n=t.secondData,s=t.thirdData,o="";function r(e,t,a,n,s){o='\n            <div class="star__name">'.concat(e,'</div>\n            <div class="star__scores">\n              <div class="star__score">\n                <div class="star__num">').concat(t,'</div>\n                <div class="star__text">WAVES</div>\n              </div>\n              <div class="star__score">\n                <div class="star__num">').concat(a,'</div>\n                <div class="star__text">BATTERIES</div>\n              </div>\n              <div class="star__score">\n                <div class="star__num">').concat(n,'</div>\n                <div class="star__text">BULLETS</div>\n              </div>\n              <div class="star__score">\n                <div class="star__num">').concat(s,'</div>\n                <div class="star__text">BOSS</div>\n              </div>\n            </div>\n          ')}r.apply(void 0,_toConsumableArray(a)),starWrapper1.innerHTML=o,r.apply(void 0,_toConsumableArray(n)),starWrapper2.innerHTML=o,r.apply(void 0,_toConsumableArray(s)),starWrapper3.innerHTML=o})}},{key:"generateProp",value:function(){var t=this;this.prop||(this.propGeneratedTimer=setTimeout(function(){var e;(t.propGeneratedInterval-=1,0===t.propGeneratedInterval)&&(e=t.shooter.hearts<5?props[getRandom(0,4)]:props[getRandom(1,4)],t.prop=new Prop({src:"./img/".concat(e,".svg"),axisRotateR:gameHalfDiagonalL,axisRotateAngle:getRandom(0,360)}),t.propGeneratedInterval=200);t.generateProp()},100))}},{key:"countdownTime",value:function(){var e=this;this.countdownTimer=setTimeout(function(){if(0===e.countdownSeconds)return e.currentLevel+=1,void e.setLevel(e.currentLevel);e.countdownSeconds-=1,gameTime.textContent="00:".concat(e.countdownSeconds<10?"0".concat(e.countdownSeconds):e.countdownSeconds,"”"),e.countdownTime()},1e3)}},{key:"countupTime",value:function(){var s=this;this.countupTimer=setTimeout(function(){s.beatBossSeconds+=1;var e=Math.floor(s.beatBossSeconds/60),t=s.beatBossSeconds%60,a=t<10?"0".concat(t):t,n=e<10?"0".concat(e):e;gameTime.textContent="".concat(n,":").concat(a,"”"),s.countupTime()},1e3)}},{key:"recoverShooterHPBar",value:function(){var a=this;this.hpRecoverTimer=setTimeout(function(){if(!a.isPause&&a.isStart){var e=shooterHPBar.offsetWidth;if(e<216){var t=e+1;shooterHPBar.style.width="".concat(t,"px")}a.recoverShooterHPBar()}else a.recoverShooterHPBar()},300)}},{key:"clearCrawler",value:function(){var e=this;gameCrawler.textContent="",this.crawlerClearedTimer=setTimeout(function(){e.clearCrawler()},3e3)}},{key:"setEnemy",value:function(s){var o=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;setTimeout(function(){switch(s){case"circle":o.circles.push(new Circle({axisRotateR:getRandom(gameHalfDiagonalL/3,gameHalfDiagonalL),axisRotateAngle:getRandom(0,360),axisRotateAngleV:-getRandom(2,8)/10,rotate:getRandom(0,360)}));break;case"triangle":var e=getRandom(0,360);o.triangles.push(new Triangle({axisRotateR:getRandom(gameHalfDiagonalL/3,gameHalfDiagonalL),axisRotateAngle:e,axisRotateAngleV:getRandom(2,8)/10,rotate:e}));break;case"polygon":var t=getRandom(gameHalfDiagonalL/3,gameHalfDiagonalL/1.5),a=getRandom(0,360),n=getRandom(0,360);o.polygons.push(new Polygon({axisRotateR:{whole:t,big:t,small:t},axisRotateAngle:{whole:a,big:a,small:a},rotate:{whole:n,big:n,small:n},rotateV:getRandom(4,8)/10}))}},1e3*e)}},{key:"initLevel",value:function(e,t){gameLevel.textContent="Wave ".concat(e),this.countdownSeconds=t,gameTime.textContent="00:".concat(this.countdownSeconds,"”"),this.countdownTime()}},{key:"setLevel",value:function(e){switch(e){case 1:this.initLevel("01",15),this.setEnemy("circle",2);break;case 2:this.initLevel("02",20),this.setEnemy("triangle",2),this.setEnemy("polygon",10);break;case 3:this.initLevel("03",20),this.setEnemy("polygon",2),this.setEnemy("circle",5),this.setEnemy("polygon",10);break;case 4:this.initLevel("04",30),this.setEnemy("circle",2),this.setEnemy("triangle",2),this.setEnemy("polygon",10),this.setEnemy("triangle",15),this.setEnemy("polygon",20);break;case 5:this.initLevel("05",30),this.setEnemy("circle",2),this.setEnemy("circle",5),this.setEnemy("polygon",15),this.setEnemy("triangle",20);break;case 6:this.initLevel("06",40),this.setEnemy("triangle",2),this.setEnemy("triangle",5),this.setEnemy("circle",15),this.setEnemy("circle",30),this.setEnemy("polygon",30);break;case 7:this.initLevel("07",60),this.setEnemy("circle",2),this.setEnemy("triangle",2),this.setEnemy("circle",10),this.setEnemy("triangle",10),this.setEnemy("polygon",15),this.setEnemy("polygon",20),this.setEnemy("triangle",25),this.setEnemy("triangle",35),this.setEnemy("polygon",40),this.setEnemy("circle",45);break;case 8:this.initLevel("08",60),this.setEnemy("circle",5),this.setEnemy("triangle",10),this.setEnemy("polygon",15),this.setEnemy("circle",20),this.setEnemy("polygon",30),this.setEnemy("triangle",35),this.setEnemy("polygon",35),this.setEnemy("triangle",45),this.setEnemy("circle",50),this.setEnemy("polygon",50);break;case 9:this.initLevel("09",40),this.setEnemy("circle",2),this.setEnemy("triangle",2),this.setEnemy("triangle",5),this.setEnemy("polygon",10),this.setEnemy("circle",15),this.setEnemy("polygon",15),this.setEnemy("circle",25),this.setEnemy("triangle",30);break;case 10:gameLevel.textContent="Wave 10";var t=getRandom(0,360);this.boss=new Boss({axisRotateR:getRandom(gameH/3,gameH/2.5),axisRotateAngle:t,rotate:t-90}),this.countupTime()}playSound("synth","A6")}},{key:"checkPlayerName",value:function(){return!!playerName.value||(playerName.classList.add("warn"),playSound("synth","A3"),playSound("synth","A2","8n",160),!1)}}]),a}();function handleLoad(){game=new Game,initCanvas(),game.init()}window.addEventListener("load",handleLoad),window.addEventListener("resize",initCanvas);var mouseMovePos={},mouseMoveAngle=0;function handleMouseMove(e){mouseMovePos.x=e.x-ww/2,mouseMovePos.y=e.y-wh/2;var t=Math.atan2(mouseMovePos.y,mouseMovePos.x);mouseMoveAngle=t<0?t+2*Math.PI:t}var beforeShootTime=new Date;function handleClick(){game.isPause||game.shooter.shoot()}function handleKeyup(e){if(game.isStart)"s"===e.key&&game.shooter.shoot(),"p"===e.key&&game.pauseGame();else if("Enter"===e.key){if(!game.checkPlayerName())return;game.startGame()}"m"===e.key&&(game.isMuted=!game.isMuted,bgm.muted=!bgm.muted,victoryBgm.muted=!victoryBgm.muted)}function handlePlayerName(){playerName.addEventListener("focus",function(){playerName.classList.remove("shine"),playerName.classList.remove("warn")}),playerName.addEventListener("focusout",function(){playerName.value||playerName.classList.add("shine")}),playerName.addEventListener("input",function(){playerName.value?startBtn.classList.add("shine"):startBtn.classList.remove("shine")})}
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Polygon=function(){function i(t){_classCallCheck(this,i);var e={axisRotateR:{whole:0,big:0,small:0},axisRotateAngle:{whole:0,big:0,small:0},rotate:{whole:0,big:0,small:0},HP:{whole:1,big:1,small:1},axisRotateRV:0,rotateV:0,color:globalColor.red,isJustSplite:!0,scale:0,beginAppear:!0,isBossGenerate:!1};Object.assign(e,t),Object.assign(this,e)}return _createClass(i,[{key:"originPos",value:function(t){return{x:gameW/2+this.axisRotateR[t]*Math.cos(this.axisRotateAngle[t]*degToPi),y:gameH/2+this.axisRotateR[t]*Math.sin(this.axisRotateAngle[t]*degToPi)}}},{key:"draw",value:function(){this.HP.whole?(ctx.save(),ctx.translate(this.originPos("whole").x,this.originPos("whole").y),ctx.rotate(this.rotate.whole*degToPi),ctx.scale(this.scale,this.scale),ctx.beginPath(),ctx.fillStyle=this.color,ctx.moveTo(21*Math.cos(8*degToPi),21*Math.sin(8*degToPi)),ctx.$triLineTo(23,70),ctx.$triLineTo(23,150),ctx.$triLineTo(34,202),ctx.$triLineTo(22,255),ctx.$triLineTo(22,324),ctx.closePath(),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.07)",ctx.moveTo(9.6,-2),ctx.$triLineTo(22,324),ctx.$triLineTo(21,8),ctx.$triLineTo(23,70),ctx.$triLineTo(10,36),ctx.closePath(),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.21)",ctx.moveTo(10*Math.cos(40*degToPi),10*Math.sin(40*degToPi)),ctx.$triLineTo(23,70),ctx.$triLineTo(23,150),ctx.lineTo(-8.8,0),ctx.closePath(),ctx.fill(),drawLightning({x:-.8,y:-16}),ctx.restore()):(this.HP.big&&(ctx.save(),ctx.translate(this.originPos("big").x,this.originPos("big").y),ctx.rotate(this.rotate.big*degToPi),ctx.beginPath(),ctx.fillStyle=this.color,ctx.moveTo(23*Math.cos(70*degToPi),23*Math.sin(70*degToPi)),ctx.$triLineTo(23,150),ctx.$triLineTo(34,202),ctx.$triLineTo(22,255),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgba(255, 255, 255, 0.21)",ctx.beginPath(),ctx.moveTo(-8.8,0),ctx.$triLineTo(4.8,64),ctx.$triLineTo(23,70),ctx.$triLineTo(23,150),ctx.closePath(),ctx.fill(),drawLightning({x:-12,y:-8},.6),ctx.restore()),this.HP.small&&(ctx.save(),ctx.translate(this.originPos("small").x,this.originPos("small").y),ctx.rotate(this.rotate.small*degToPi),ctx.beginPath(),ctx.fillStyle=this.color,ctx.moveTo(23*Math.cos(70*degToPi),23*Math.sin(70*degToPi)),ctx.$triLineTo(22,255),ctx.$triLineTo(22,324),ctx.$triLineTo(21,8),ctx.closePath(),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.21)",ctx.moveTo(10*Math.cos(40*degToPi),10*Math.sin(40*degToPi)),ctx.$triLineTo(4.8,64),ctx.$triLineTo(23,70),ctx.closePath(),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.07)",ctx.moveTo(9.6,-2),ctx.$triLineTo(22,324),ctx.$triLineTo(21,8),ctx.$triLineTo(23,70),ctx.$triLineTo(10,36),ctx.closePath(),ctx.fill(),drawLightning({x:10,y:-8},.5),ctx.restore()))}},{key:"update",value:function(t){if(this.beginAppear&&this.appear(this.isBossGenerate),this.beginAppear=!1,enemyMethods.approach(this),this.HP.whole)this.rotate.whole=this.rotate.big=this.rotate.small+=this.rotateV,game.isStart&&enemyMethods.hitShooter(game.polygons,t,"whole",this.axisRotateR.whole,this.axisRotateAngle.whole);else{if(this.isJustSplite){var e=.5<=Math.random()?1:-1;TweenLite.to(this.axisRotateAngle,2.4,{big:"+=".concat(getRandom(15,30)*e),small:"-=".concat(getRandom(15,30)*e),ease:Circ.easeOut}),TweenLite.to(this.axisRotateR,2.4,{big:"+=".concat(getRandom(50,150)),small:"+=".concat(getRandom(50,150)),ease:Circ.easeOut}),TweenLite.to(this.rotate,2.4,{big:"+=".concat(getRandom(180,270)),small:"-=".concat(getRandom(180,270)),ease:Circ.easeOut}),this.isJustSplite=!1}this.HP.big&&(this.rotate.big+=1.4*this.rotateV,enemyMethods.hitShooter(game.polygons,t,"big",this.axisRotateR.big,this.axisRotateAngle.big)),this.HP.small&&(this.rotate.small-=1.6*this.rotateV,enemyMethods.hitShooter(game.polygons,t,"small",this.axisRotateR.small,this.axisRotateAngle.small))}}},{key:"appear",value:function(t){if(gameCrawler.textContent="⚠ ENEMY IS COMING",TweenLite.to(this,.8,{scale:1,ease:Back.easeOut.config(1.7)}),t){var e=getRandom(40,80),i=getRandom(40,80);TweenLite.to(this.axisRotateAngle,1.6,{whole:"-=".concat(e),big:"-=".concat(e),small:"-=".concat(e),ease:Power2.easeOut}),TweenLite.to(this.axisRotateR,1.6,{whole:"+=".concat(i),big:"+=".concat(i),small:"+=".concat(i),ease:Power2.easeOut})}game.isStart&&playSound("synth","C4","4n")}}]),i}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Prop=function(){function i(t){_classCallCheck(this,i);var e={img:new Image,src:"",axisRotateR:0,axisRotateRV:0,axisRotateAngle:0,r:32};Object.assign(e,t),Object.assign(this,e)}return _createClass(i,[{key:"draw",value:function(){this.img.src||(this.img.src=this.src),this.img.complete&&(ctx.save(),ctx.translate(originPos(this.axisRotateR,this.axisRotateAngle).x,originPos(this.axisRotateR,this.axisRotateAngle).y),ctx.drawImage(this.img,0,0),ctx.beginPath(),ctx.strokeStyle="rgba(255, 255, 255, 0.8)",ctx.arc(this.img.width/2,this.img.height/2,this.r,0,2*Math.PI),ctx.stroke(),ctx.restore())}},{key:"update",value:function(){if(!this.axisRotateRV){var t=getRandom(5,8);this.axisRotateRV=-gameHalfDiagonalL/(t*updateFPS)}this.axisRotateR+=this.axisRotateRV;var e=game.shooter;if(this.axisRotateR+this.r<=e.r+e.cirSolidLineW/2){game.prop="";var i=this.src.replace("./img/","").split(".")[0];e.getProp(i)}}}]),i}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var Shooter=function(){function a(t){_classCallCheck(this,a);var e={color:globalColor.white,r:28.9,shieldR:60,cirSolidLineW:6,shieldLineW:4,rotateAngle:0,bullets:[],bulletNum:0,hearts:3,state:"",isAttacked:!1,isProtect:!1,beforeShootTime:new Date};Object.assign(e,t),Object.assign(this,e)}return _createClass(a,[{key:"draw",value:function(){if(game.isStart||game.isEnd){ctx.save(),ctx.translate(gameW/2,gameH/2),ctx.save(),ctx.beginPath(),ctx.shadowColor="rgba(255, 255, 255, 0.4)",ctx.shadowBlur=16,ctx.lineWidth=this.cirSolidLineW,ctx.arc(0,0,this.r,0,2*Math.PI),this.isAttacked?(ctx.strokeStyle=globalColor.red,this.isAttacked=!1):ctx.strokeStyle=this.color,ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,0),ctx.$triLineTo(this.r,0,this.rotateAngle),ctx.moveTo(0,0),ctx.$triLineTo(this.r,120,this.rotateAngle),ctx.moveTo(0,0),ctx.$triLineTo(this.r,240,this.rotateAngle),ctx.lineWidth=2.55,ctx.stroke(),ctx.restore(),ctx.strokeStyle=this.color;for(var t=this.r+20,e=0;e<360;e+=1){var a=t*Math.cos(e*degToPi+this.rotateAngle),o=t*Math.sin(e*degToPi+this.rotateAngle),i=t*Math.cos((e+1)*degToPi+this.rotateAngle),n=t*Math.sin((e+1)*degToPi+this.rotateAngle);e%10<5&&(ctx.beginPath(),ctx.moveTo(a,o),ctx.lineTo(i,n),ctx.lineWidth=1,ctx.stroke())}ctx.beginPath(),ctx.lineWidth=this.shieldLineW,"shield"!==this.state?ctx.arc(0,0,this.shieldR,135*degToPi+this.rotateAngle,225*degToPi+this.rotateAngle):ctx.arc(0,0,this.shieldR,90*degToPi+this.rotateAngle,270*degToPi+this.rotateAngle),this.isProtect?(ctx.strokeStyle=globalColor.blue,this.isProtect=!1):ctx.strokeStyle=this.color,ctx.stroke(),ctx.beginPath(),ctx.save(),ctx.shadowColor="rgba(255, 255, 255, 0.4)",ctx.shadowBlur=16,ctx.rotate(this.rotateAngle),ctx.translate(this.r+8,0),ctx.moveTo(0,0),ctx.lineTo(0,6.8),ctx.lineTo(10.2,6.8),ctx.lineTo(22.1,3.4),ctx.lineTo(22.1,-3.4),ctx.lineTo(10.2,-6.8),ctx.lineTo(0,-6.8),ctx.closePath(),ctx.fillStyle=this.color,ctx.fill(),ctx.restore(),ctx.restore(),this.bullets.forEach(function(t){t.draw()})}}},{key:"update",value:function(){this.rotateAngle=mouseMoveAngle,this.bullets.forEach(function(t,e){t.update(e)})}},{key:"shoot",value:function(){var t=this,e=new Date;if(400<e-beforeShootTime){var a;a="double"!==this.state?1:2;for(var o=0;o<a;o++)"wave"!==this.state?setTimeout(function(){t.bulletNum+=1,t.bullets.push(new ShooterBullet({axisRotateR:52.7,rotateAngle:mouseMoveAngle})),playSound("membrane","D3")},160*o):setTimeout(function(){t.bulletNum+=1,t.bullets.push(new ShooterBullet({waveLength:getRandom(40,80),waveFreq:getRandom(2,4)/10,waveAmp:getRandom(4,8),waveFlow:getRandom(4,8),axisRotateR:59.5,rotateAngle:mouseMoveAngle})),playSound("mono","F2","4n",0,-10)},160*o);beforeShootTime=e}}},{key:"getProp",value:function(t){var e,a=this;switch(t){case"heart":this.recoverHeart(),e=0,gameCrawler.textContent="GAIN LIFE💕";break;case"crackdown":this.drawCrackdownEffect(),e=0,gameCrawler.textContent="BOOM💥";break;case"shield":e=25e3,gameCrawler.textContent="EXTEND SHIELD💪";break;case"double":e=2e4,gameCrawler.textContent="DOUBLE SHOOT✌️";break;case"wave":e=15e3,gameCrawler.textContent="WAVE BULLET🌊";break;default:e=0}this.state=t;this.displayPropInfo(t,e),"crackdown"!==t&&(playSound("synth","E5"),playSound("synth","G5","8n",160)),function t(){setTimeout(function(){game.isStart&&(game.isPause?t():0<(e-=1e3)?t():(a.state="",game.generateProp()))},1e3)}()}},{key:"drawCrackdownEffect",value:function(){var e=1,o=game.boss;requestAnimationFrame(function t(){game.isPause||(e+=1),ctx.save(),ctx.beginPath(),ctx.shadowColor="rgba(255, 255, 255, 0.72)",ctx.shadowBlur=2,ctx.strokeStyle="rgba(255, 255, 255, ".concat((100-e)/98,")"),ctx.fillStyle="rgba(255, 255, 255, ".concat((100-e)/490,")"),ctx.lineWidth=5;var a=176*baseLog(3,(e-2)/98*26+1);ctx.arc(gameW/2,gameH/2,a,0,2*Math.PI),ctx.fill(),ctx.stroke(),ctx.restore(),game.circles.forEach(function(t,e){a>t.axisRotateR&&(enemyMethods.dieEffect(t.r,originPos(t.axisRotateR,t.axisRotateAngle).x,originPos(t.axisRotateR,t.axisRotateAngle).y,"245, 175, 95"),game.circles.splice(e,1))}),game.triangles.forEach(function(t,e){a>t.axisRotateR&&(enemyMethods.dieEffect(t.r,originPos(t.axisRotateR,t.axisRotateAngle).x,originPos(t.axisRotateR,t.axisRotateAngle).y,"54, 118, 187"),game.triangles.splice(e,1))}),game.polygons.forEach(function(t,e){a>t.axisRotateR.whole&&(t.HP.whole?enemyMethods.dieEffect(27.5,t.originPos("whole").x,t.originPos("whole").y,"231, 70, 93"):(t.HP.big&&(enemyMethods.dieEffect(28,t.originPos("big").x,t.originPos("big").y,"231, 70, 93"),game.polygons.splice(e,1)),t.HP.small&&(enemyMethods.dieEffect(22,t.originPos("small").x,t.originPos("small").y,"231, 70, 93"),game.polygons.splice(e,1))),game.polygons.splice(e,1))}),game.subTris.forEach(function(t,e){a>t.axisRotateR&&game.subTris.splice(e,1)}),game.boss&&a>o.axisRotateR&&0===o.HP&&enemyMethods.bossDieResult(),e<100&&requestAnimationFrame(t)}),o&&(o.HP-=1),playSound("synth","C6","2n")}},{key:"recoverHeart",value:function(){var t=document.createElement("DIV");t.classList.add("panel__game-heart"),heartWrapper.appendChild(t),this.hearts+=1}},{key:"displayPropInfo",value:function(t,e){if("crackdown"!==t&&"heart"!==t){prop.classList.remove("op0"),propImg.src="./img/".concat(t,"--panel.svg"),e/=1e3,propLastTime.textContent=e;!function t(){setTimeout(function(){game.isStart&&(game.isPause?t():(e-=1,propLastTime.textContent=10<=e?e:"0".concat(e),e?t():prop.classList.add("op0")))},1e3)}()}}}]),a}(),ShooterBullet=function(){function a(t){_classCallCheck(this,a);var e={bodyLen:12.75,axisRotateR:0,color:globalColor.white,v:10,rotateAngle:0,waveLength:40,waveFreq:.2,waveAmp:4,waveFlow:4};Object.assign(e,t),Object.assign(this,e)}return _createClass(a,[{key:"draw",value:function(){ctx.save(),ctx.translate(gameW/2,gameH/2),ctx.rotate(this.rotateAngle),"wave"!==game.shooter.state?(ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.7)",ctx.arc(-5.95+this.axisRotateR,0,2.15,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.4)",ctx.arc(-10.2+this.axisRotateR,0,1.7,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.fillStyle="rgba(255, 255, 255, 0.1)",ctx.arc(-12.75+this.axisRotateR,0,.85,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.fillStyle=this.color,ctx.arc(0+this.axisRotateR,0,3.4,0,2*Math.PI),ctx.fill(),ctx.beginPath(),ctx.moveTo(2.55+this.axisRotateR,2.55),ctx.lineTo(this.bodyLen+this.axisRotateR,0),ctx.lineTo(2.55+this.axisRotateR,-2.55),ctx.closePath(),ctx.fill()):drawWaveBullet(this,"axisRotateR",1.6,"rgba(255, 255, 255, 0.72)"),ctx.restore()}},{key:"update",value:function(o){var i,n,s=this;if(this.axisRotateR+=this.v,"wave"!==game.shooter.state){var r=this.axisRotateR+this.bodyLen;game.circles.forEach(function(t,e){i=function(){return Math.asin(t.r/t.axisRotateR)},n=function(){return r>=t.axisRotateR-t.r/2&&r<=t.axisRotateR+t.r/2},s.attackEnemy(t,e,game.circles,o,i,n,"245, 175, 95")}),game.triangles.forEach(function(a,t){i=function(){var t=a.axisRotateR+a.r/2,e=a.r/2*Math.sqrt(3);return Math.atan2(e,t)},n=function(){return r>=a.axisRotateR&&r<=a.axisRotateR+a.r/2},s.attackEnemy(a,t,game.triangles,o,i,n,"54, 118, 187")}),game.polygons.forEach(function(e,t){e.HP.whole?(n=function(){var t=e.axisRotateR.whole;return t<=r&&r<=t+9},s.attackPolygon(e,t,"whole",34,21,83,83,75,o,n)):(e.HP.big&&(n=function(){var t=e.axisRotateR.big;return t+8<=r&&r<=t+16},s.attackPolygon(e,t,"big",34,23,66,66,44,o,n)),e.HP.small&&(n=function(){var t=e.axisRotateR.small;return t+8<=r&&r<=t+16},s.attackPolygon(e,t,"small",22,23,92.5,92.5,17.5,o,n)))});var t=game.boss;t&&(i=function(){return Math.asin(18/(t.axisRotateR+6))},n=function(){return r>=t.axisRotateR+9+8&&r<=t.axisRotateR+28},this.attackEnemy(t,NaN,null,o,i,n,"255, 255, 255","ordinary",!0))}else{game.circles.forEach(function(t,e){i=function(){return Math.asin(t.r/t.axisRotateR)},n=function(){return s.axisRotateR>=t.axisRotateR-t.r/2&&s.axisRotateR<=t.axisRotateR+t.r/2},s.attackEnemy(t,e,game.circles,o,i,n,"245, 175, 95","wave")}),game.triangles.forEach(function(a,t){i=function(){var t=a.axisRotateR+a.r/2,e=a.r/2*Math.sqrt(3);return Math.atan2(e,t)},n=function(){return s.axisRotateR>=a.axisRotateR&&s.axisRotateR<=a.axisRotateR+a.r/2},s.attackEnemy(a,t,game.triangles,o,i,n,"54, 118, 187","wave")}),game.polygons.forEach(function(e,t){e.HP.whole?(n=function(){var t=e.axisRotateR.whole;return s.axisRotateR>=t&&s.axisRotateR<=t+9},s.attackPolygon(e,t,"whole",34,21,83,83,75,o,n,"wave")):(e.HP.big&&(n=function(){var t=e.axisRotateR.big;return s.axisRotateR>=t+8&&s.axisRotateR<=t+16},s.attackPolygon(e,t,"big",34,23,66,66,44,o,n,"wave")),e.HP.small&&(n=function(){var t=e.axisRotateR.small;return s.axisRotateR>=t+8&&s.axisRotateR<=t+16},s.attackPolygon(e,t,"small",22,23,92.5,92.5,17.5,o,n,"wave")),0===e.HP.big&&0===e.HP.small&&(game.polygons.splice(t,1),game.batteryNum+=1,batteryNum.textContent=game.batteryNum))});var e=game.boss;e&&(i=function(){return Math.asin(18/(e.axisRotateR+6))},n=function(){return s.axisRotateR>=e.axisRotateR+9+8&&s.axisRotateR<=e.axisRotateR+28},this.attackEnemy(e,NaN,null,o,i,n,"255, 255, 255","wave",!0))}this.beyondBoundary(o)}},{key:"attackEnemy",value:function(t,e,a,o,i,n,s){var r=7<arguments.length&&void 0!==arguments[7]?arguments[7]:"ordinary",l=8<arguments.length&&void 0!==arguments[8]&&arguments[8],c=i(),g=t.axisRotateAngle%360*degToPi-c,h=t.axisRotateAngle%360*degToPi+c,x=this.judgeShotAngleRange(g,h,r),u=n();if(gameCrawler.textContent||(gameCrawler.textContent=.5<=Math.random()?"FIRE🔥":"BANG👊"),x&&u){if(game.shooter.bullets.splice(o,1),t.HP-=1,"ordinary"===r?playSound("membrane","D2"):playSound("mono","C2","8n",0,-10),0===t.HP){if(l)return void enemyMethods.bossDieResult();a.splice(e,1),enemyMethods.dieEffect(t.r,originPos(t.axisRotateR,t.axisRotateAngle).x,originPos(t.axisRotateR,t.axisRotateAngle).y,s),game.batteryNum+=1,batteryNum.textContent=game.batteryNum}gameCrawler.textContent=.8<=Math.random()?"BULL'S-EYE😤":"HIT👍"}}},{key:"attackPolygon",value:function(t,e,a,o,i,n,s,r,l,c){var g,h,x=10<arguments.length&&void 0!==arguments[10]?arguments[10]:"ordinary",u=t.axisRotateAngle[a],m=t.rotate[a],R=t.axisRotateR[a],f=o,d=i,y=cosineFormula(R,f,n),b=cosineFormula(R,d,s),v=u<=180&&(m%360<r||r+180<=m%360),P=180<u&&(r<=m%360||m%360<r+180);gameCrawler.textContent||(gameCrawler.textContent=.5<=Math.random()?"FIRE🔥":"BANG👊"),h=v||P?(g=getAngleB(R,d,b),getAngleB(R,f,y)):(g=getAngleB(R,f,y),getAngleB(R,d,b));var w=u%360*degToPi-g,p=u%360*degToPi+h,k=this.judgeShotAngleRange(w,p,x),A=c();if(k&&A){if(game.shooter.bullets.splice(l,1),t.HP[a]-=1,"whole"===a&&playSound("synth","D6","16n"),0===t.HP.big||0===t.HP.small){var C="big"===a?28:22;enemyMethods.dieEffect(C,t.originPos(a).x,t.originPos(a).y,"231, 70, 93")}0===t.HP.big&&0===t.HP.small&&(game.polygons.splice(e,1),game.batteryNum+=1,batteryNum.textContent=game.batteryNum),gameCrawler.textContent=.8<=Math.random()?"BULL'S-EYE😤!":"HIT👍","ordinary"===x?playSound("membrane","D2"):playSound("mono","C2","8n",0,-10)}}},{key:"judgeShotAngleRange",value:function(t,e,a){var o;if(o=e>2*Math.PI&&this.rotateAngle<Math.PI?this.rotateAngle+2*Math.PI:t<0&&e<0||t<0&&0<e&&this.rotateAngle>Math.PI?this.rotateAngle-2*Math.PI:this.rotateAngle,"wave"!==a)return t<=o&&o<=e;var i=Math.atan2(this.waveLength,this.axisRotateR);return t<=o+i&&o-i<=e}},{key:"beyondBoundary",value:function(t){530<=this.axisRotateR&&game.shooter.bullets.splice(t,1)}}]),a}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Triangle=function(){function i(t){_classCallCheck(this,i);var e={axisRotateR:0,axisRotateAngle:0,r:26,rotate:0,scale:0,axisRotateRV:0,axisRotateAngleV:0,color:globalColor.blue,bullets:[],beforeRotateAxisAngleTime:new Date,beforeShootTime:new Date,HP:4,isGeneratedSub:!1,shootTimer:null,beginAppear:!0,isBossGenerate:!1};Object.assign(e,t),Object.assign(this,e)}return _createClass(i,[{key:"draw",value:function(){var t=this.r+4,e=this.r-16,i=this.r-22;ctx.save(),ctx.translate(originPos(this.axisRotateR,this.axisRotateAngle).x,originPos(this.axisRotateR,this.axisRotateAngle).y),ctx.scale(this.scale,this.scale),ctx.rotate(this.rotate*degToPi),ctx.save(),ctx.translate(4,0),ctx.beginPath(),ctx.moveTo(t*Math.cos(60*degToPi),t*Math.sin(60*degToPi)),ctx.$triLineTo(t,180),ctx.$triLineTo(t,300),ctx.closePath(),ctx.fillStyle="rgba(54, 118, 187, 0.34)",ctx.fill(),ctx.restore(),ctx.beginPath(),ctx.moveTo(this.r*Math.cos(60*degToPi),this.r*Math.sin(60*degToPi)),ctx.$triLineTo(this.r,180),ctx.$triLineTo(this.r,300),ctx.closePath(),ctx.fillStyle=this.color,ctx.fill(),ctx.translate(0,-2.8),ctx.fillStyle=globalColor.white,ctx.beginPath(),ctx.moveTo(0,0),ctx.$triLineTo(e,90),ctx.$triLineTo(e,150),ctx.closePath(),ctx.fill(),ctx.translate(8*Math.cos(-40*degToPi),8*Math.sin(-40*degToPi)),ctx.beginPath(),ctx.moveTo(0,0),ctx.$triLineTo(i,90),ctx.$triLineTo(i,150),ctx.closePath(),ctx.fill(),ctx.restore(),this.bullets.forEach(function(t){t.draw()})}},{key:"update",value:function(t){var e=this;this.beginAppear&&this.appear(this.isBossGenerate),this.beginAppear=!1,game.isStart&&enemyMethods.approach(this),this.bullets.forEach(function(t,e,i){t.update(e,i)});var i,a=new Date;if(a-this.beforeRotateAxisAngleTime>getRandom(4e3,8e3)&&(this.shootTimer&&clearTimeout(this.shootTimer),i=(.25<=Math.random()?1:-1)*getRandom(45,75),TweenLite.to(this,.8,{axisRotateAngle:"+=".concat(i),ease:Power0.easeNone}),TweenLite.to(this,1.2,{rotate:"+=".concat(i+360),ease:Power2.easeInOut,onComplete:function(){game.isStart&&!game.isPause&&0!==e.HP&&(e.shoot(),e.shootTimer=setTimeout(function(){game.isStart&&0!==e.HP&&e.shoot()},getRandom(2400,7200)))}}),this.beforeRotateAxisAngleTime=a),2===this.HP&&!this.isGeneratedSub){for(var o=1;o<=2;o+=1)game.subTris.push(new TriSub({axisRotateR:this.axisRotateR,axisRotateAngle:this.axisRotateAngle,rotate:this.rotate,order:o}));gameCrawler.textContent="COUNTERATTACK🤛",this.isGeneratedSub=!0,playSound("synth","C6","16n")}enemyMethods.hitShooter(game.triangles,t,"triangle",this.axisRotateR,this.axisRotateAngle)}},{key:"shoot",value:function(){this.bullets.push(new TriBullet({p:{x:originPos(this.axisRotateR,this.axisRotateAngle).x,y:originPos(this.axisRotateR,this.axisRotateAngle).y},axisRotateR:this.axisRotateR,rotateAngle:this.rotate})),gameCrawler.textContent=.8<=Math.random()?"UNDER ATTACK🤕":"ATTACK⚡️",playSound("membrane","G5")}},{key:"appear",value:function(t){gameCrawler.textContent="⚠ ENEMY IS COMING",TweenLite.to(this,.8,{scale:1,ease:Back.easeOut.config(1.7)});var e=0;if(t){e=getRandom(40,80);var i=getRandom(40,80);TweenLite.to(this,1.6,{axisRotateAngle:"+=".concat(e),axisRotateR:"+=".concat(i),ease:Power2.easeOut})}TweenLite.to(this,1.6,{rotate:"+=".concat(e+360),ease:Back.easeOut.config(1.7)}),game.isStart&&playSound("synth","B4","4n")}}]),i}(),TriSub=function(){function i(t){_classCallCheck(this,i);var e={axisRotateR:0,axisRotateAngle:0,r:10.4,rotate:0,rotateV:4,color:globalColor.blue,HP:2,isReproduceMoving:!1,order:0};Object.assign(e,t),Object.assign(this,e)}return _createClass(i,[{key:"draw",value:function(){var t=this.r+1.6,e=this.r-6.4,i=this.r-8.8;ctx.save(),ctx.translate(originPos(this.axisRotateR,this.axisRotateAngle).x,originPos(this.axisRotateR,this.axisRotateAngle).y),ctx.rotate(this.rotate*degToPi),ctx.save(),ctx.translate(.8,-Math.sqrt(1.92)),ctx.beginPath(),ctx.moveTo(t*Math.cos(0),t*Math.sin(0)),ctx.lineTo(t*Math.cos(120*degToPi),t*Math.sin(120*degToPi)),ctx.lineTo(t*Math.cos(240*degToPi),t*Math.sin(240*degToPi)),ctx.closePath(),ctx.fillStyle="rgba(54, 118, 187, 0.34)",ctx.fill(),ctx.restore(),ctx.beginPath(),ctx.moveTo(this.r*Math.cos(0),this.r*Math.sin(0)),ctx.lineTo(this.r*Math.cos(120*degToPi),this.r*Math.sin(120*degToPi)),ctx.lineTo(this.r*Math.cos(240*degToPi),this.r*Math.sin(240*degToPi)),ctx.closePath(),ctx.fillStyle=this.color,ctx.fill(),ctx.translate(-1.28,-.64),ctx.fillStyle=globalColor.white,ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(e*Math.cos(30*degToPi),e*Math.sin(30*degToPi)),ctx.lineTo(e*Math.cos(90*degToPi),e*Math.sin(90*degToPi)),ctx.closePath(),ctx.fill(),ctx.translate(0,-3.52),ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(i*Math.cos(30*degToPi),i*Math.sin(30*degToPi)),ctx.lineTo(i*Math.cos(90*degToPi),i*Math.sin(90*degToPi)),ctx.closePath(),ctx.fill(),ctx.restore()}},{key:"update",value:function(t){var e=this;this.rotate+=this.rotateV,this.isReproduceMoving||(TweenLite.to(this,.8,{axisRotateAngle:"".concat(1===this.order?"+=":"-=","10"),ease:Power2.easeOut,onComplete:function(){TweenLite.to(e,1.6,{axisRotateR:0,ease:Power1.easeIn})}}),this.isReproduceMoving=!0),enemyMethods.hitShooter(game.subTris,t,"triangle",this.axisRotateR,this.axisRotateAngle)}}]),i}(),TriBullet=function(){function i(t){_classCallCheck(this,i);var e={p:{x:0,y:0},moveX:0,moveXV:-4.5,rotateAngle:0,color:globalColor.blue};Object.assign(e,t),Object.assign(this,e)}return _createClass(i,[{key:"draw",value:function(){ctx.save(),ctx.translate(this.p.x,this.p.y),ctx.rotate(this.rotateAngle*degToPi),ctx.translate(this.moveX,0),ctx.fillStyle=this.color,ctx.beginPath(),ctx.moveTo(-16,0),ctx.$triLineTo(38,174),ctx.$triLineTo(16.8,200),ctx.closePath(),ctx.fill(),ctx.fillStyle="rgba(54, 118, 187, 0.34)",ctx.beginPath(),ctx.moveTo(-16.4,0),ctx.$triLineTo(38,174),ctx.$triLineTo(15.6,168),ctx.closePath(),ctx.fill(),ctx.restore()}},{key:"update",value:function(t,e){this.moveX+=this.moveXV,enemyMethods.attackShooter(this,t,e,37.8),this.beyondBoundary(t,e)}},{key:"beyondBoundary",value:function(t,e){this.moveX<=-1060&&e.splice(t,1)}}]),i}();
"use strict";function drawWaveBullet(t,e,o,a){ctx.strokeStyle=t.color,ctx.lineWidth=o,ctx.shadowColor=a,ctx.shadowBlur=2,ctx.beginPath();for(var n=0;n<t.waveLength;n+=1){var i=n*t.waveFreq+updateTime/t.waveFlow;ctx.lineTo(t[e]+t.waveAmp*Math.sin(i),n)}ctx.stroke(),ctx.beginPath();for(var r=0;r<t.waveLength;r+=1){var c=r*t.waveFreq+updateTime/t.waveFlow;ctx.lineTo(t[e]+t.waveAmp*Math.sin(c),-r)}ctx.stroke()}function drawLightning(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;ctx.fillStyle=globalColor.white,ctx.translate(t.x,t.y),ctx.beginPath(),ctx.moveTo(0,0),ctx.rotate(18*degToPi),ctx.lineTo(0,10*e),ctx.translate(0,10*e),ctx.rotate(-18*degToPi),ctx.lineTo(10*e,0),ctx.translate(10*e,0),ctx.rotate(28*degToPi),ctx.lineTo(0,16*e),ctx.translate(0,16*e),ctx.rotate(-28*degToPi),ctx.rotate(3.6*degToPi),ctx.lineTo(0,-10*e),ctx.translate(0,-10*e),ctx.rotate(-3.6*degToPi),ctx.lineTo(-8*e,0),ctx.closePath(),ctx.fill()}function originPos(t,e){return{x:gameW/2+t*Math.cos(e*degToPi),y:gameH/2+t*Math.sin(e*degToPi)}}function baseLog(t,e){return Math.log(e)/Math.log(t)}function cosineFormula(t,e,o){return Math.sqrt(t*t+e*e-2*t*e*Math.cos(o*degToPi))}function getAngleB(t,e,o){return Math.acos((t*t+o*o-e*e)/(2*t*o))}function getRandom(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function playSound(t,e){var o,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"8n",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(!game.isMuted)switch(t){case"membrane":setTimeout(function(){(o=(new Tone.MembraneSynth).toMaster()).triggerAttackRelease(e,a),o.volume.value=i},n);break;case"duo":setTimeout(function(){(o=(new Tone.DuoSynth).toMaster()).triggerAttackRelease(e,a),o.volume.value=i},n);break;case"mono":setTimeout(function(){(o=(new Tone.MonoSynth).toMaster()).triggerAttackRelease(e,a),o.volume.value=i},n);break;default:setTimeout(function(){(o=(new Tone.Synth).toMaster()).triggerAttackRelease(e,a),o.volume.value=i},n)}}function isMob(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}ctx.$triLineTo=function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return ctx.lineTo(t*Math.cos(e*degToPi+o),t*Math.sin(e*degToPi+o))};
//# sourceMappingURL=index.js.map
