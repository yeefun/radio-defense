{"version":3,"sources":["boss.js","circle.js","enemy.js","index.js","polygon.js","prop.js","shooter.js","triangle.js","utility.js"],"names":["Boss","args","_classCallCheck","this","def","axisRotateR","axisRotateAngle","rotate","scale","rotateV","bullets","HP","beforeGenerateEnemyTime","Date","beginAppear","isAppearing","axisRotateAngleV","originPos","x","y","isDisappeared","degToPi","appearTimer","disappearTimer","ctx","moveTo","Object","lineTo","closePath","save","fillStyle","beginPath","fill","globalColor","white","red","blue","Math","PI","orange","strokeStyle","lineWidth","arc","stroke","forEach","bullet","appear","idx","arr","appearTimes","gameCrawler","textContent","TweenLite","to","ease","rotateNum","getRandom","concat","update","_this","setTimeout","game","isPause","shoot","easeOut","Expo","onComplete","_this2","playSound","_this3","BossBullet","p","disappear","push","_this4","chooseEnemy","circles","Circle","isBossGenerate","triangles","Triangle","rotateAngle","polygons","Polygon","whole","big","small","num","color","moveX","moveXV","restore","enemyMethods","attackShooter","r","beforeRotateTime","assign","axisRotateRV","isRotating","circleBigR","circleSmallR","subAxisRotateR","cos","sin","$triLineTo","isStart","approach","rotateTime","_loop","timer","CirBullet","clearTimeout","i","Power2","random","Back","config","translate","enemy","_typeof","shooter","cirSolidLineW","isPolygon","shooterBody","seconds","distance","updateFPS","isBoss","arguments","length","undefined","dieTime","effect","dieEffect","colorRGB","shadowBlur","enemyR","baseLog","effectX","effectY","effectR","shadowColor","requestAnimationFrame","hitShooter","enemies","enemyIdx","type","enemyAxisRotateR","enemyAxisRotateAngle","state","abs","mouseMoveAngle","shieldAngleRange","splice","polygonR","judgeWhatEnemyHit","shieldR","shieldLineW","bulletIdx","bulletLen","attackShooterResult","shooterShield","isProtect","bulletRotate","angleGap","currentLevel","boss","shooterHPBar","isAttacked","style","width","shooterHPBarW","hearts","crawlerClearedTimer","playerName","querySelectorAll","shooterHPBarOriginW","removeChild","shooterHeart","bgm","pause","bossDieResult","victoryBgm","endGame","canvas","ww","wh","gameW","updateTime","yellow","blueDark","props","document","getElementById","restartBtn","starsBtn","backBtn","restartBtnStars","cover","gamePanel","batteryInfo","heartWrapper","startBtn","prop","propImg","propLastTime","result","resultBattery","panel","keyboard","gameLevel","resultBullet","resultRanking","resultScore","resultStars","getContext","gameHalfDiagonalL","gameH","initCanvas","round","sqrt","height","documentElement","clientWidth","clientHeight","coverCircle","coverTriangle","coverPolygon","Game","batteryNum","subTris","isEnd","blockV","countdownSeconds","countdownTimer","hpRecoverTimer","countupTimer","propGeneratedTimer","propGeneratedInterval","beatBossSeconds","isDisplayStars","addEventListener","handleMouseMove","handleClick","window","handleKeyup","handlePlayerName","checkPlayerName","startGame","drawCover","render","setBlockV","recoverShooterHPBar","classList","add","remove","handleGameStars","shareFb","open","shareTwitter","encodeURIComponent","drawBlock","name","fillRect","draw","circle","triangle","subTriangle","drawMouse","polygon","Shooter","rotateR","mouseMovePosY","mouseMovePos","mouseMovePosX","_this5","display","value","innerHTML","createElement","appendChild","heart","container","cursor","pointerEvents","gameTime","countdownStartTime","clearCrawler","play","loadingIcon","rankingNum","starWrapper2","starWrapper3","setLevel","resultBoss","bulletNum","handleGameResult","currentTime","volume","countdownTime","starWrapper1","level","battery","axios","get","params","data","res","rank","totalPlayers","firstStarData","firstData","secondStarData","secondData","thirdStarData","thirdData","starScoreHTML","wave","bat","fillStarScore","apply","_toConsumableArray","_this6","propName","Prop","generateProp","_this7","_this8","_this9","nowHPW","offsetWidth","recoverHPBarW","_this10","src","form","_this11","angle","countupTime","initLevel","handleLoad","init","evt","atan2","beforeShootTime","key","pauseGame","isMuted","muted","isJustSplite","drawLightning","rotateDirection","Circ","rNum","img","Image","complete","drawImage","replace","split","outerR","x1","y1","y2","ShooterBullet","waveLength","waveFreq","waveAmp","waveFlow","shootTime","recoverHeart","lastTime","drawCrackdownEffect","displayPropInfo","crackdownTime","countLastTime","propInfoTimer","bodyLen","v","anglePanFn","shotRRangeFn","cirIdx","asin","bulletMoveLen","triIdx","lengthX","lengthY","attackEnemy","polyIdx","sideA","attackPolygon","NaN","beyondBoundary","enemyAnglePan","enemyAngleAdd","shotAngleRange","judgeShotAngleRange","enemyAngleMinus","shotRRange","sideB1Len","sideB2Len","angleAB2","rotateAngleJudge","angleB1","angleB2","polyAxisRotateAngle","polyRotate","sideB1","sideB2","sideC1","cosineFormula","angleAB1","bottomJudge","topJudge","getAngleB","sideC2","polyAngleMinus","polyAngleAdd","shooterRotateAngle","shooterAnglePan","beforeRotateAxisAngleTime","isGeneratedSub","shootTimer","triOuterBigR","triInnerBigR","triInnerSmallR","randomRotateAngle","rotateAxisAngleTime","Power0","easeNone","TriSub","order","TriBullet","isReproduceMoving","Power1","easeIn","drawWaveBullet","degree","drawBattery","log","a","b","c","min","max","floor","instrument","note","timeout","duration","synth","Tone","MembraneSynth","toMaster","DuoSynth","triggerAttackRelease","angleAdd"],"mappings":"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","file":"index.js","sourcesContent":["class Boss {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      rotate: 0,\r\n      scale: 0,\r\n      // axisRotateRV: 1,\r\n      axisRotateAngleV: 1,\r\n      rotateV: 1,\r\n      bullets: [],\r\n      HP: 2,\r\n      beforeGenerateEnemyTime: new Date(),\r\n      beginAppear: true,\r\n      isAppearing: false,\r\n      isDisappeared: false,\r\n      appearTimes: 0,\r\n      appearTimer: null,\r\n      disappearTimer: null,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.scale(this.scale, this.scale);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      // \r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(11, 0);\r\n      ctx.lineTo(18, 6);\r\n      ctx.lineTo(18, 15);\r\n      ctx.lineTo(-18, 15);\r\n      ctx.lineTo(-18, 6);\r\n      ctx.lineTo(-11, 0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = globalColor.orange;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 9);\r\n      ctx.lineTo(11, 9);\r\n      ctx.lineTo(18, 15);\r\n      ctx.lineTo(18, 36);\r\n      ctx.lineTo(-18, 36);\r\n      ctx.lineTo(-18, 15);\r\n      ctx.lineTo(-11, 9);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.25)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 9 + 8);\r\n      ctx.lineTo(4, 9 + 8);\r\n      ctx.lineTo(14, 24);\r\n      ctx.lineTo(14, 36 - 8);\r\n      ctx.lineTo(-14, 36 - 8);\r\n      ctx.lineTo(-14, 24);\r\n      ctx.lineTo(-4, 9 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(18, -6);\r\n      ctx.lineTo(18 + 8, -6);\r\n      ctx.lineTo(18 + 8 + 8, 15);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6);\r\n      ctx.lineTo(18, 36 + 6);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18, -6);\r\n      ctx.lineTo(-18 - 8, -6);\r\n      ctx.lineTo(-18 - 8 - 8, 15);\r\n      ctx.lineTo(-18 - 8 - 8, 36 + 6);\r\n      ctx.lineTo(-18, 36 + 6);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = globalColor.red;\r\n      ctx.beginPath();\r\n      ctx.moveTo(18 + 8 + 8, 9);\r\n      ctx.lineTo(18 + 8 + 8 + 8, 9);\r\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6 + 8);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = globalColor.blue;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4, 9);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 + 4, 9);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(18 + 8 + 8, 36 + 6 + 8);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8);\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.fill();\r\n      // \r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.lineWidth = 2.8;\r\n      ctx.beginPath();\r\n      ctx.arc(18 + 8 + 8 + 11, 36 + 6 - 2, 4.4, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      // \r\n      ctx.strokeStyle = globalColor.orange;\r\n      // ctx.lineWidth = 2.8;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16);\r\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16 + 9.6);\r\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16);\r\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16 + 9.6);\r\n      ctx.stroke();\r\n      // \r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.24)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 - 8 - 16 + 4 + 4, 36 + 6 - 8.25);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 - 6 + 4, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    //  boss \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    // boss \r\n    this.beginAppear && this.appear();\r\n    this.beginAppear = false;\r\n    if (!this.isAppearing && !this.isDisappeared) {\r\n    }\r\n    //  boss \r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n  }\r\n  appear() {\r\n    if (game.isEnd) return;\r\n    this.appearTimes += 1;\r\n    this.isDisappeared = false;\r\n    this.isAppearing = true;\r\n    gameCrawler.textContent = ' BOSS IS COMING';\r\n    TweenLite.to(this, 1.2, {\r\n      scale: 1,\r\n      ease: Expo.easeOut,\r\n    });\r\n    const rotateNum = getRandom(45, 135);\r\n    TweenLite.to(this, 1.6, {\r\n      axisRotateAngle: `+=${rotateNum}`,\r\n      rotate: `+=${rotateNum}`,\r\n      ease: Expo.easeOut,\r\n      onComplete: () => {\r\n        this.isAppearing = false;\r\n      },\r\n    });\r\n    if (this.appearTimes && this.appearTimes % 2) {\r\n      setTimeout(() => {\r\n        if (this.HP === 0 || game.isPause) return;\r\n        this.shoot();\r\n      }, 2000);\r\n    } else {\r\n      setTimeout(() => {\r\n        if (this.HP === 0 || game.isPause) return;\r\n        this.generateEnemy();\r\n      }, 2000);\r\n    }\r\n    this.disappearTimer = setTimeout(() => {\r\n      if (this.HP === 0 || game.isPause) return;\r\n      this.disappear();\r\n    }, 4000);\r\n    playSound('membrane', 'A4', '4n');\r\n  }\r\n  disappear() {\r\n    if (game.isEnd) return;\r\n    this.isDisappeared = true;\r\n    TweenLite.to(this, 1.2, {\r\n      scale: 0,\r\n      ease: Expo.easeOut,\r\n    });\r\n    const rotateNum = getRandom(45, 135);\r\n    TweenLite.to(this, 1.6, {\r\n      axisRotateAngle: `+=${rotateNum}`,\r\n      rotate: `+=${rotateNum}`,\r\n      ease: Expo.easeOut,\r\n    });\r\n    this.appearTimer = setTimeout(() => {\r\n      if (this.HP === 0 || game.isPause) return;\r\n      this.appear();\r\n    }, 2000);\r\n    playSound('membrane', 'F3', '4n');\r\n  }\r\n  shoot() {\r\n    this.bullets.push(new BossBullet({\r\n      p: {\r\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n      },\r\n      rotateAngle: this.rotate,\r\n      axisRotateR: this.axisRotateR,\r\n    }));\r\n    playSound('mono', 'F2', '4n', 0, -10);\r\n    setTimeout(() => {\r\n      this.bullets.push(new BossBullet({\r\n        p: {\r\n          x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n          y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n        },\r\n        rotateAngle: this.rotate,\r\n        waveLength: 14,\r\n        axisRotateR: this.axisRotateR,\r\n      }));\r\n      playSound('mono', 'F2', '4n', 0, -10);\r\n    }, 200);\r\n  }\r\n  generateEnemy() {\r\n    let num;\r\n    const chooseEnemy = () => {\r\n      num = getRandom(1, 3);\r\n      switch (num) {\r\n        case 1:\r\n          game.circles.push(new Circle({\r\n            axisRotateR: this.axisRotateR,\r\n            axisRotateAngle: this.axisRotateAngle % 360,\r\n            axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n            rotate: getRandom(0, 360),\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        case 2:\r\n          game.triangles.push(new Triangle({\r\n            axisRotateR: this.axisRotateR,\r\n            axisRotateAngle: this.axisRotateAngle % 360,\r\n            axisRotateAngleV: getRandom(2, 8) / 10,\r\n            rotate: this.axisRotateAngle % 360,\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        case 3:\r\n          const rotate = getRandom(0, 360);\r\n          game.polygons.push(new Polygon({\r\n            axisRotateR: {\r\n              whole: this.axisRotateR,\r\n              big: this.axisRotateR,\r\n              small: this.axisRotateR,\r\n            },\r\n            axisRotateAngle: {\r\n              whole: this.axisRotateAngle % 360,\r\n              big: this.axisRotateAngle % 360,\r\n              small: this.axisRotateAngle % 360,\r\n            },\r\n            rotate: {\r\n              whole: rotate,\r\n              big: rotate,\r\n              small: rotate,\r\n            },\r\n            rotateV: getRandom(4, 8) / 10,\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    chooseEnemy();\r\n    if (Math.random() >= 0.5) {\r\n      setTimeout(() => {\r\n        chooseEnemy();\r\n      }, 400);\r\n    }\r\n  }\r\n}\r\n\r\nclass BossBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 8,\r\n      moveXV: 4,\r\n      rotateAngle: 0,\r\n      waveLength: 22,\r\n      waveFreq: 0.3,\r\n      waveAmp: 4,\r\n      waveFlow: 3,\r\n      isBoss: true,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate((this.rotateAngle - 90) * degToPi);\r\n      //  boss \r\n      drawWaveBullet(this, 'moveX', 2.4, 'rgba(245, 175, 95, 0.72)');\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // boss \r\n    this.moveX += this.moveXV;\r\n    enemyMethods.attackShooter(this, idx, arr);\r\n  }\r\n}","class Circle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 22,\r\n      rotate: 0,\r\n      scale: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngleV: 0,\r\n      // rotateV: 0,\r\n      color: globalColor.orange,\r\n      HP: 2,\r\n      bullets: [],\r\n      beforeRotateTime: new Date(),\r\n      isRotating: false,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  draw() {\r\n    const circleBigR = this.r + 5;\r\n    const circleSmallR = this.r - 10;\r\n    const subAxisRotateR = 14;\r\n    ctx.save();\r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.scale(this.scale, this.scale);\r\n    // \r\n    ctx.beginPath();\r\n    ctx.arc(4, 0, circleBigR, 0, Math.PI * 2);\r\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n    ctx.fill();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.arc(-20, 0, circleSmallR, 0, Math.PI * 2);\r\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n    ctx.fill();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.fillStyle = globalColor.white;\r\n    // ctx.arc(subAxisRotateR, 0, 2.4, 0, Math.PI * 2);\r\n    ctx.arc(subAxisRotateR * Math.cos(60 * degToPi), subAxisRotateR * Math.sin(60 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(subAxisRotateR * Math.cos(180 * degToPi), subAxisRotateR * Math.sin(180 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(subAxisRotateR * Math.cos(300 * degToPi), subAxisRotateR * Math.sin(300 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.lineTo(-8, 0);\r\n    ctx.$triLineTo(-2, 32);\r\n    ctx.$triLineTo(-12, 120);\r\n    ctx.$triLineTo(-2.4, 176);\r\n    ctx.$triLineTo(-8, 240);\r\n    ctx.$triLineTo(-1.6, 320);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    game.isStart && enemyMethods.approach(this);\r\n    // \r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // \r\n    if (!this.isRotating) {\r\n      this.axisRotateAngle += this.axisRotateAngleV;\r\n    }\r\n    //  4-8 \r\n    const rotateTime = new Date();\r\n    if ((rotateTime - this.beforeRotateTime) > getRandom(4000, 8000)) {\r\n      this.isRotating = true;\r\n      TweenLite.to(this, 0.4, {\r\n        // rotate: this.axisRotateAngle - 180,\r\n        // rotate: this.axisRotateAngle % 360,\r\n        rotate: this.axisRotateAngle,\r\n        ease: Power2.easeOut,\r\n        // \r\n        onComplete: () => {\r\n          this.isRotating = false;\r\n          if (!game.isStart) return;\r\n          this.shoot();\r\n        },\r\n      });\r\n      this.beforeRotateTime = rotateTime;\r\n    }\r\n    //  shooter\r\n    enemyMethods.hitShooter(game.circles, idx, 'circle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n\r\n\r\n  shoot() {\r\n    //  1-2 \r\n    for (let i = 0; i < getRandom(1, 2); i += 1) {\r\n      const timer = setTimeout(() => {\r\n        this.bullets.push(new CirBullet({\r\n          p: {\r\n            x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n            y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n          },\r\n          rotateAngle: this.rotate,\r\n          moveX: -this.r - 10,\r\n          // rotateAngle: Math.sin(this.rotate * degToPi),\r\n          axisRotateR: this.axisRotateR,\r\n        }));\r\n        clearTimeout(timer);\r\n        //  0.2-0.4 \r\n      }, i * getRandom(200, 400));\r\n    }\r\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK' : 'ATTACK';\r\n    playSound('membrane', 'D5');\r\n  }\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = ' ENEMY IS COMING';\r\n    // gameCrawler.innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>ENEMY IS COMING!';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    TweenLite.from(this, 1.6, {\r\n      rotate: 0,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    if (isBossGenerate) {\r\n      TweenLite.to(this, 1.6, {\r\n        axisRotateR: `+=${getRandom(80, 160)}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    game.isStart && playSound('synth', 'F4', '4n');\r\n    // playSound('synth', 'B4', '8n', 50);\r\n  }\r\n}\r\n\r\n\r\n\r\nclass CirBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      // v: 4,\r\n      rotateAngle: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotateAngle * degToPi); \r\n      ctx.beginPath();\r\n      ctx.arc(this.moveX, 0, 4, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // \r\n    this.moveX += this.moveXV;\r\n    //  shooter\r\n    enemyMethods.attackShooter(this, idx, arr);\r\n  }\r\n}","/* \r\n ** \r\n */\r\nconst enemyMethods = {\r\n  //  shooter\r\n  approach(enemy) {\r\n    const axisRotateR = enemy.axisRotateR;\r\n    const isPolygon = typeof(axisRotateR) === 'object';\r\n    if (!enemy.axisRotateRV) {\r\n      const shooter = game.shooter;\r\n      const shooterBody = (shooter.r + (shooter.cirSolidLineW / 2));\r\n      const distance = (isPolygon ? axisRotateR.whole : (axisRotateR - enemy.r)) - shooterBody;\r\n      const seconds =  getRandom(30, 40);\r\n      enemy.axisRotateRV = -(distance / (seconds * updateFPS));\r\n    }\r\n    if (isPolygon) {\r\n      if (enemy.HP.whole) {\r\n        axisRotateR.small = axisRotateR.big = axisRotateR.whole += enemy.axisRotateRV;\r\n      } else {\r\n        // \r\n        axisRotateR.big += enemy.axisRotateRV * getRandom(3, 4);\r\n        // \r\n        axisRotateR.small += enemy.axisRotateRV * getRandom(1, 4);\r\n      }\r\n    } else {\r\n      enemy.axisRotateR += enemy.axisRotateRV;\r\n    }\r\n  },\r\n\r\n\r\n  // \r\n  dieEffect(enemyR, effectX, effectY, colorRGB, isBoss = false) {\r\n    let dieTime = 1;\r\n    let effect = () => {\r\n      if (!game.isPause) {\r\n        dieTime += 1;\r\n      }\r\n      ctx.beginPath();\r\n      ctx.save();\r\n      ctx.strokeStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 46})`;\r\n      ctx.fillStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 230})`;\r\n      ctx.shadowColor = `rgba(${colorRGB}, 0.48)`;\r\n      ctx.shadowBlur = 2;\r\n      ctx.lineWidth = 2;\r\n      const effectR = enemyR * baseLog(3, (((dieTime - 2) / 46) * 8) + 1);\r\n      ctx.arc(effectX, effectY, effectR, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.stroke();\r\n      ctx.restore();\r\n      // }\r\n      if (dieTime < 48) {\r\n        requestAnimationFrame(effect);\r\n      }\r\n    }\r\n    requestAnimationFrame(effect);\r\n    if (!isBoss) {\r\n      setTimeout(() => {\r\n        gameCrawler.textContent = 'ENEMY DIES';\r\n      }, 0);\r\n    }\r\n    // playSound('duo', 'F4', '4n');\r\n    playSound('synth', 'G2', '8n', 0, 25);\r\n    playSound('duo', 'F2', '4n', 0, 15);\r\n    playSound('duo', 'E2', '4n', 0, 10);\r\n  },\r\n\r\n\r\n  //  shooter \r\n  hitShooter(enemies, enemyIdx, type, enemyAxisRotateR, enemyAxisRotateAngle) {\r\n    const enemy = enemies[enemyIdx];\r\n    const shooter = game.shooter;\r\n    let shieldAngleRange;\r\n    if (shooter.state !== 'shield') {\r\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n    } else {\r\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (90 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (270 * degToPi);\r\n    }\r\n    // const shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n    //  shooter\r\n    const judgeWhatEnemyHit = function () {\r\n      if (type !== 'big' && type !== 'small') {\r\n        enemies.splice(enemyIdx, 1);\r\n        // \r\n        if (type !== 'whole') {\r\n          const colorRGB = type === 'circle' ? '245, 175, 95' : '54, 118, 187';\r\n          enemyMethods.dieEffect(enemy.r, originPos(enemyAxisRotateR, enemyAxisRotateAngle).x, originPos(enemyAxisRotateR, enemyAxisRotateAngle).y, colorRGB);\r\n        } else {\r\n          const polygonR = (34 + 22) / 2;\r\n          enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\r\n        }\r\n      } else {\r\n        enemy.HP[type] -= 1;\r\n        const polygonR = type === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\r\n        enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\r\n        if (enemy.HP.big === 0 && enemy.HP.small === 0) {\r\n          enemies.splice(enemyIdx, 1);\r\n        }\r\n      }\r\n    }\r\n    //  shooter \r\n    if (enemyAxisRotateR <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n      // shooter.HP -= 1;\r\n      judgeWhatEnemyHit();\r\n      enemyMethods.attackShooterResult();\r\n      playSound('membrane', 'B4');\r\n      //  shooter \r\n    } else if (shieldAngleRange && (enemyAxisRotateR <= (shooter.shieldR + (shooter.shieldLineW / 2)))) {\r\n      judgeWhatEnemyHit();\r\n      shooter.isProtect = true;\r\n      gameCrawler.textContent = 'BLOCK';\r\n      playSound('membrane', 'D4');\r\n    }\r\n  },\r\n\r\n\r\n  //  shooter \r\n  attackShooter(bullet, bulletIdx, bullets, bulletLen = 0) {\r\n    const shooter = game.shooter;\r\n    const shooterBody = shooter.r + (shooter.cirSolidLineW / 2);\r\n    const shooterShield = shooter.shieldR + (shooter.shieldLineW / 2);\r\n    //  shooter \r\n    if (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterBody + bulletLen))) {\r\n      // \r\n      enemyMethods.attackShooterResult();\r\n      // \r\n      bullets.splice(bulletIdx, 1);\r\n      bullet.isBoss ? playSound('mono', 'C2', '8n', 0, -10) : playSound('membrane', 'B4');\r\n    }\r\n    //  shooter \r\n    const bulletRotate = bullet.isBoss ? bullet.rotateAngle + 90 : bullet.rotateAngle;\r\n    const angleGap = Math.abs((mouseMoveAngle / degToPi) - ((bulletRotate % 360) + (bulletRotate < 0 ? 360 : 0)));\r\n    let shieldAngleRange;\r\n    if (shooter.state !== 'shield') {\r\n      shieldAngleRange = (angleGap >= 135) && (angleGap <= 225);\r\n    } else {\r\n      shieldAngleRange = (angleGap >= 90) && (angleGap <= 270);\r\n    }\r\n    if (shieldAngleRange && (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterShield + bulletLen)))) {\r\n      // \r\n      bullets.splice(bulletIdx, 1);\r\n      gameCrawler.textContent = 'BLOCK';\r\n      playSound('membrane', 'D4');\r\n    }\r\n  },\r\n\r\n\r\n  //  shooter \r\n  attackShooterResult() {\r\n    if (!game.isStart || (game.currentLevel === 10 && !game.boss)) return;\r\n    const shooter = game.shooter;\r\n    const shooterHPBarOriginW = 216;\r\n    //  1/3\r\n    const shooterHPBarW = shooterHPBar.offsetWidth - (shooterHPBarOriginW / 3);\r\n    shooter.isAttacked = true;\r\n    // shooter  1\r\n    // shooter.HP -= 1;\r\n    shooterHPBar.style.width = `${shooterHPBarW < 0 ? 0 : shooterHPBarW}px`;\r\n    //  shooter \r\n    if (shooterHPBarW <= 0) {\r\n      //  shooter \r\n      if (shooter.hearts) {\r\n        // \r\n        const shooterHeart = document.querySelectorAll('.panel__game-heart');\r\n        shooterHeart[0].parentNode.removeChild(shooterHeart[0]);\r\n        shooter.hearts -= 1;\r\n        // \r\n        shooterHPBar.style.width = `${shooterHPBarOriginW}px`;\r\n      } else {\r\n        // \r\n        game.endGame();\r\n        playSound('synth', 'A3');\r\n        playSound('synth', 'E2', '8n', 160);\r\n        playSound('synth', 'A2', '8n', 320);\r\n        clearTimeout(game.crawlerClearedTimer);\r\n        gameCrawler.textContent = `YOU, ${this.playerName}, ARE DEAD`;\r\n        return;\r\n      }\r\n    }\r\n    gameCrawler.textContent = Math.random() >= 0.5 ? 'OUCH' : 'UGGH';\r\n  },\r\n\r\n\r\n  bossDieResult() {\r\n    let boss = game.boss;\r\n    enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '245, 175, 95', true);\r\n    setTimeout(() => {\r\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '54, 118, 187', true);\r\n    }, 300);\r\n    setTimeout(() => {\r\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '231, 70, 93', true);\r\n    }, 600);\r\n    game.boss = null;\r\n    // \r\n    bgm.pause();\r\n    bgm.currentTime = 0;\r\n    victoryBgm.play();\r\n    victoryBgm.volume = 0.5;\r\n    // 3 \r\n    setTimeout(() => {\r\n      game.endGame();\r\n    }, 3000);\r\n    clearTimeout(game.crawlerClearedTimer);\r\n    gameCrawler.textContent = 'BOSS DIES!!!';\r\n  }\r\n}","/* Environment Variable */\r\nconst updateFPS = 30;\r\nlet updateTime = 0;\r\n\r\nconst globalColor = {\r\n  red: '#e7465d',\r\n  orange: '#f5af5f',\r\n  yellow: '#f7b52c',\r\n  blue: '#3676bb',\r\n  blueDark: '#001d2e',\r\n  white: '#fff',\r\n}\r\n\r\nconst props = ['heart', 'crackdown', 'shield', 'double', 'wave'];\r\n\r\n\r\n/* GUI Controls */\r\n// const controls = {\r\n  // amp: 8,\r\n  // freq: 0.3,\r\n  // testAngle: 40,\r\n// }\r\n\r\n// const gui = new dat.GUI();\r\n// gui.add(controls, 'testAngle', 0, 90).step(1).onChange((value) => {});\r\n// gui.add(controls, 'freq', 0, 1).step(0.1).onChange((value) => {});\r\n\r\nconst startBtn = document.getElementById('start-btn');\r\nconst restartBtn = document.getElementById('restart-btn');\r\nconst starsBtn = document.getElementById('stars-btn');\r\nconst backBtn = document.getElementById('back-btn');\r\nconst restartBtnStars = document.getElementById('restart-btn--stars');\r\n\r\nconst cover = document.getElementById('cover');\r\nconst gamePanel = document.getElementById('game-panel');\r\nconst batteryInfo = document.getElementById('battery-info');\r\nconst shooterHPBar = document.getElementById('hp');\r\nconst heartWrapper = document.getElementById('heart-wrapper');\r\nconst prop = document.getElementById('prop');\r\nconst propImg = document.getElementById('prop__img');\r\nconst propLastTime = document.getElementById('prop__last-time');\r\nconst batteryNum = document.getElementById('battery-num');\r\nconst result = document.getElementById('game-result');\r\n// const resultNum = document.getElementById('result-num');\r\nconst panel = document.getElementById('panel');\r\nconst container = document.getElementById('container');\r\nconst keyboard = document.getElementById('keyboard');\r\nconst gameTime = document.getElementById('game-time');\r\nconst gameLevel = document.getElementById('game-level');\r\nconst gameCrawler = document.getElementById('game-crawler');\r\nconst playerName = document.getElementById('player-name');\r\n\r\nconst resultBoss = document.getElementById('result-boss');\r\nconst resultBattery = document.getElementById('result-battery');\r\nconst resultBullet = document.getElementById('result-bullet');\r\n// const totalPlayers = document.getElementById('total-players');\r\nconst rankingNum = document.getElementById('ranking-num');\r\n\r\nconst resultRanking = document.getElementById('result-ranking');\r\nconst resultScore = document.getElementById('result-score');\r\nconst resultStars = document.getElementById('result-stars');\r\n\r\n// const share = document.getElementById('share');\r\nconst bgm = document.getElementById('bgm');\r\nconst victoryBgm = document.getElementById('victory-bgm');\r\n\r\nconst starWrapper1 = document.getElementById('star-wrapper1');\r\nconst starWrapper2 = document.getElementById('star-wrapper2');\r\nconst starWrapper3 = document.getElementById('star-wrapper3');\r\n\r\nconst shareFb = document.getElementById('share-fb');\r\nconst shareTwitter = document.getElementById('share-twitter');\r\n\r\n\r\n\r\n\r\n/* Initialize Canvas Settings */\r\nconst canvas = document.getElementById('game');\r\nconst ctx = canvas.getContext('2d');\r\nlet ww;\r\nlet wh;\r\nlet gameW;\r\nlet gameH;\r\nlet gameHalfDiagonalL;\r\n\r\nfunction initCanvas() {\r\n  gameW = canvas.width;\r\n  gameH = canvas.height;\r\n  gameHalfDiagonalL = Math.round(Math.sqrt(canvas.width * canvas.width + canvas.height * canvas.height) / 2);\r\n  ww = document.documentElement.clientWidth;\r\n  wh = document.documentElement.clientHeight;\r\n}\r\n\r\n\r\n\r\nconst degToPi = Math.PI / 180;\r\nlet coverCircle;\r\nlet coverTriangle;\r\nlet coverPolygon;\r\nlet game;\r\n\r\n\r\n\r\nclass Game {\r\n  constructor(args) {\r\n    const def = {\r\n      shooter: null,\r\n      prop: null,\r\n      batteryNum: 0,\r\n      circles: [],\r\n      triangles: [],\r\n      polygons: [],\r\n      subTris: [],\r\n      isStart: false,\r\n      isEnd: false,\r\n      isPause: false,\r\n      blockV: {\r\n        x: -2,\r\n        y: 2,\r\n      },\r\n      currentLevel: 0,\r\n      countdownSeconds: 0,\r\n      // countupSeconds: 0,\r\n      hpRecoverTimer: null,\r\n      countdownTimer: null,\r\n      countupTimer: null,\r\n      propGeneratedTimer: null,\r\n      crawlerClearedTimer: null,\r\n      propGeneratedInterval: 200,\r\n      boss: null,\r\n      playerName: '',\r\n      beatBossSeconds: 0,\r\n      isMuted: false,\r\n      isDisplayStars: false,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  init() {\r\n    canvas.addEventListener('mousemove', handleMouseMove);\r\n    canvas.addEventListener('click', handleClick);\r\n    window.addEventListener('keyup', handleKeyup);\r\n    handlePlayerName();\r\n    startBtn.addEventListener('click', () => {\r\n      if (!this.checkPlayerName()) return;\r\n      this.startGame();\r\n    });\r\n    restartBtn.addEventListener('click', () => {\r\n      this.startGame();\r\n    });\r\n    restartBtnStars.addEventListener('click', () => {\r\n      this.startGame();\r\n    });\r\n    this.drawCover();\r\n    this.render();\r\n    this.update();\r\n    // \r\n    this.setBlockV();\r\n    //  shooter \r\n    this.recoverShooterHPBar();\r\n    starsBtn.addEventListener('click', () => {\r\n      resultRanking.classList.add('dpn');\r\n      resultScore.classList.add('dpn');\r\n      resultStars.classList.remove('dpn');\r\n      result.classList.add('t20');\r\n      if (!this.isDisplayStars) {\r\n        this.handleGameStars();\r\n      }\r\n      this.isDisplayStars = true;\r\n    });\r\n    backBtn.addEventListener('click', function () {\r\n      resultRanking.classList.remove('dpn');\r\n      resultScore.classList.remove('dpn');\r\n      resultStars.classList.add('dpn');\r\n      result.classList.remove('t20');\r\n    });\r\n    shareFb.addEventListener('click', function () {\r\n      window.open('https://www.facebook.com/sharer/sharer.php?u=https://yeefun.github.io/radio-defense', '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');\r\n    });\r\n    shareTwitter.addEventListener('click', function () {\r\n      //  https://gist.github.com/McKinneyDigital/2884508\r\n      const url = 'https://yeefun.github.io/radio-defense';\r\n      const name = 'szyeefun';\r\n      window.open(`http://twitter.com/share?url=${encodeURIComponent(url)}&via=${encodeURIComponent(name)}`, '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');\r\n    });\r\n  }\r\n  render() {\r\n    // if (!this.isPause) {\r\n    ctx.fillStyle = globalColor.blueDark;\r\n    ctx.fillRect(0, 0, gameW, gameH);\r\n    // \r\n    this.drawBlock();\r\n    if (!this.isStart && !this.isEnd) {\r\n      ctx.save();\r\n        ctx.beginPath();\r\n        ctx.arc(gameW / 2, gameH / 2, 264, 0, Math.PI * 2);\r\n        ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.arc(gameW / 2, gameH / 2, 184, 0, Math.PI * 2);\r\n        ctx.lineWidth = 1.6;\r\n        ctx.strokeStyle = globalColor.white;\r\n        ctx.stroke();\r\n      ctx.restore();\r\n    }\r\n    //  shooter\r\n    this.shooter.draw();\r\n    //  circle\r\n    this.circles.forEach((circle) => {\r\n      circle.draw();\r\n    });\r\n    //  triangle\r\n    this.triangles.forEach((triangle) => {\r\n      triangle.draw();\r\n    });\r\n    //  polygon\r\n    this.polygons.forEach((polygon) => {\r\n      polygon.draw();\r\n    });\r\n    //  sub triangle\r\n    this.subTris.forEach((subTriangle) => {\r\n      subTriangle.draw();\r\n    });\r\n    //  prop\r\n    this.prop && this.prop.draw();\r\n    // \r\n    this.boss && this.boss.draw();\r\n    if (this.isStart) {\r\n      // \r\n      this.drawMouse();\r\n    }\r\n    requestAnimationFrame(() => {\r\n      this.render();\r\n    });\r\n  }\r\n  update() {\r\n    updateTime += 1;\r\n    if (!this.isPause && !this.isEnd) {\r\n      //  shooter\r\n      this.shooter.update();\r\n      //  circle\r\n      this.circles.forEach((circle, idx) => {\r\n        circle.update(idx);\r\n      });\r\n      //  triangle\r\n      this.triangles.forEach((triangle, idx) => {\r\n        triangle.update(idx);\r\n      });\r\n      //  polygon\r\n      this.polygons.forEach((polygon, idx) => {\r\n        polygon.update(idx);\r\n      });\r\n      //  sub triangle\r\n      this.subTris.forEach((subTriangle, idx) => {\r\n        subTriangle.update(idx);\r\n      });\r\n      //  prop\r\n      this.prop && this.prop.update();\r\n      // \r\n      this.boss && this.boss.update();\r\n    }\r\n    setTimeout(() => {\r\n      this.update();\r\n    }, 1000 / updateFPS);\r\n  }\r\n  // \r\n  drawCover() {\r\n    this.shooter = new Shooter();\r\n    // \r\n    this.circles.push(new Circle({\r\n      axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\r\n      axisRotateAngle: 225,\r\n      axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n      rotate: getRandom(0, 360),\r\n    }));\r\n    // \r\n    this.triangles.push(new Triangle({\r\n      axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\r\n      axisRotateAngle: 45,\r\n      axisRotateAngleV: (getRandom(2, 8) / 10),\r\n      rotate: 45,\r\n    }));\r\n    // \r\n    const rotateR = getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5);\r\n    const rotate = getRandom(0, 360);\r\n    const rotateV = (getRandom(4, 8) / 10);\r\n    this.polygons.push(new Polygon({\r\n      axisRotateR: {\r\n        whole: rotateR,\r\n        big: rotateR,\r\n        small: rotateR,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 315,\r\n        big: 315,\r\n        small: 315,\r\n      },\r\n      rotate: {\r\n        whole: rotate,\r\n        big: rotate,\r\n        small: rotate,\r\n      },\r\n      rotateV,\r\n    }));\r\n  }\r\n  // \r\n  drawBlock() {\r\n    ctx.save();\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.16)';\r\n      ctx.lineWidth = 0.4;\r\n      // \r\n      for (let i = 0; i < 18; i += 1) {\r\n        ctx.moveTo(i * 56 + ((updateTime * this.blockV.x) % 56), 0);\r\n        ctx.lineTo(i * 56 + ((updateTime * this.blockV.x) % 56), gameH);\r\n      }\r\n      // \r\n      for (let i = 0; i < 14; i += 1) {\r\n        ctx.moveTo(0, i * 52 + ((updateTime * this.blockV.y) % 52));\r\n        ctx.lineTo(gameW, i * 52 + ((updateTime * this.blockV.y) % 52));\r\n      }\r\n      ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n  // \r\n  drawMouse() {\r\n    const mouseMovePosX = mouseMovePos.x + gameW / 2;\r\n    const mouseMovePosY = mouseMovePos.y + gameH / 2;\r\n    const length = 12;\r\n    ctx.save();\r\n      ctx.translate(mouseMovePosX, mouseMovePosY);\r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.lineWidth = 0.8;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-length, 0);\r\n      ctx.lineTo(length, 0);\r\n      ctx.moveTo(0, -length);\r\n      ctx.lineTo(0, length);\r\n      ctx.stroke();\r\n    ctx.restore();\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.arc(mouseMovePosX, mouseMovePosY, 1.6, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n  // \r\n  setBlockV() {\r\n    setTimeout(() => {\r\n      this.blockV.x = Math.random() * 8 - 4;\r\n      this.blockV.y = Math.random() * 8 - 4;\r\n      this.setBlockV();\r\n    }, 8000);\r\n  }\r\n  //  'Start Play' or 'Restart' \r\n  startGame() {\r\n    this.isStart = true;\r\n    this.isEnd = false;\r\n    // \r\n    cover.style.display = 'none';\r\n    // \r\n    gamePanel.style.display = 'block';\r\n    // \r\n    this.batteryNum = 0;\r\n    batteryNum.textContent = this.batteryNum;\r\n    // \r\n    shooterHPBar.style.width = '216px';\r\n    // \r\n    this.playerName = playerName.value;\r\n    //  shooter\r\n    this.shooter = new Shooter();\r\n    // \r\n    heartWrapper.innerHTML = '';\r\n    for (let i = 0; i < this.shooter.hearts; i++) {\r\n      const heart = document.createElement('DIV');\r\n      heart.classList.add('panel__game-heart');\r\n      heartWrapper.appendChild(heart);\r\n    }\r\n    // \r\n    this.circles.forEach((circle) => {\r\n      circle.bullets = [];\r\n    });\r\n    this.triangles.forEach((triangle) => {\r\n      triangle.bullets = [];\r\n      triangle.HP = 0;\r\n    });\r\n    this.circles = [];\r\n    this.triangles = [];\r\n    this.polygons = [];\r\n    if (this.boss) {\r\n      this.boss.bullets = [];\r\n      this.boss = null;\r\n    }\r\n    // \r\n    container.style.cursor = 'none';\r\n    // \r\n    result.classList.add('op0');\r\n    // \r\n    panel.style.pointerEvents = 'none';\r\n    // \r\n    batteryInfo.classList.remove('op0');\r\n    // \r\n    keyboard.classList.remove('op0');\r\n    // \r\n    gameLevel.textContent = '';\r\n    //  0 \r\n    this.currentLevel = 0;\r\n    //  2 \r\n    this.countdownSeconds = 3;\r\n\r\n    gameCrawler.textContent = `${this.playerName}`;\r\n    gameTime.textContent = `00:0${this.countdownSeconds}`;\r\n    const countdownStartTime = () => {\r\n      setTimeout(() => {\r\n        if (this.countdownSeconds === 0) {\r\n          this.currentLevel += 1;\r\n          this.setLevel(this.currentLevel);\r\n          // \r\n          this.generateProp();\r\n          // \r\n          this.clearCrawler();\r\n          return;\r\n        }\r\n        this.countdownSeconds -= 1;\r\n        gameTime.textContent = `00:0${this.countdownSeconds}`;\r\n        switch (this.countdownSeconds) {\r\n          case 2:\r\n            gameCrawler.textContent = 'WAVES ARE COMING';\r\n            break;\r\n          case 1:\r\n            gameCrawler.textContent = 'ARE YOU READY?';\r\n            break;\r\n          case 0:\r\n            gameCrawler.textContent = 'GO';\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        playSound('synth', 'G4');\r\n        countdownStartTime();\r\n      }, 1000);\r\n    }\r\n    countdownStartTime();\r\n    playSound('synth', 'C#5');\r\n    playSound('synth', 'E5', '8n', 160);\r\n    // \r\n    victoryBgm.pause();\r\n    victoryBgm.currentTime = 0;\r\n    bgm.play();\r\n    bgm.volume = 0.5;\r\n    // \r\n    resultRanking.classList.remove('dpn');\r\n    resultScore.classList.remove('dpn');\r\n    resultStars.classList.add('dpn');\r\n    result.classList.remove('t20');\r\n    //  loading \r\n    const loadingIcon = '<img src=\"./img/loading.svg\" alt=\"loading icon\" />';\r\n    rankingNum.innerHTML = loadingIcon;\r\n    starWrapper1.innerHTML = loadingIcon;\r\n    starWrapper2.innerHTML = loadingIcon;\r\n    starWrapper3.innerHTML = loadingIcon;\r\n    //  stars \r\n    this.isDisplayStars = false;\r\n  }\r\n  // \r\n  endGame() {\r\n    this.isStart = false;\r\n    this.isEnd = true;\r\n    // \r\n    // resultNum.textContent = this.batteryNum;\r\n    // \r\n    if (this.currentLevel !== 10) {\r\n      resultBoss.textContent = 'NO';\r\n    } else {\r\n      resultBoss.textContent = this.beatBossSeconds;\r\n    }\r\n    resultBattery.textContent = this.batteryNum;\r\n    resultBullet.textContent = this.shooter.bulletNum;\r\n    // \r\n    result.classList.remove('op0');\r\n    // \r\n    batteryInfo.classList.add('op0');\r\n    // \r\n    keyboard.classList.add('op0');\r\n    // \r\n    prop.classList.add('op0');\r\n    // \r\n    container.style.cursor = 'auto';\r\n    // \r\n    panel.style.pointerEvents = 'auto';\r\n    this.handleGameResult();\r\n    clearTimeout(this.countdownTimer);\r\n    clearTimeout(this.countupTimer);\r\n    clearTimeout(this.propGeneratedTimer);\r\n  }\r\n  // \r\n  pauseGame() {\r\n    if (!this.currentLevel) return;\r\n    this.isPause = !this.isPause;\r\n    if (this.isPause) {\r\n      clearTimeout(this.countdownTimer);\r\n      clearTimeout(this.countupTimer);\r\n      clearTimeout(this.propGeneratedTimer);\r\n      clearTimeout(this.crawlerClearedTimer);\r\n    } else {\r\n      if (!this.boss) {\r\n        this.countdownTime();\r\n      } else {\r\n        this.countupTime();\r\n      }\r\n      this.generateProp();\r\n      this.clearCrawler();\r\n      const boss = game.boss;\r\n      if (boss.isDisappeared) {\r\n        clearTimeout(boss.appearTimer);\r\n        boss.appear();\r\n      } else {\r\n        clearTimeout(boss.disappearTimer);\r\n        boss.disappear();\r\n      }\r\n    }\r\n  }\r\n  handleGameResult() {\r\n    const name = this.playerName;\r\n    const level = this.currentLevel;\r\n    const battery = this.batteryNum;\r\n    const bullet = this.shooter.bulletNum;\r\n    let boss;\r\n    if (level !== 9) {\r\n      boss = 'no';\r\n    } else {\r\n      boss = this.beatBossSeconds;\r\n    }\r\n    axios.get('https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbwwNUeevxFlQaLzP_gdhnTmSC97HgRlpV6DOCUIzg/dev', {\r\n      params: {\r\n        name,\r\n        level,\r\n        battery,\r\n        bullet,\r\n        boss,\r\n      }\r\n    })\r\n    .then((res) => {\r\n      const data = res.data;\r\n      rankingNum.innerHTML = `\r\n        <p>${data.rank}</p>\r\n        <span>/&nbsp;${data.totalPlayers}</span>\r\n      `;\r\n    });\r\n  }\r\n  handleGameStars() {\r\n    axios.get('https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbx1L2GmotaRfoSMzVA5BtpC9kiWneoA69IOtoEi/dev')\r\n      .then((res) => {\r\n        const data = res.data;\r\n        const firstStarData = data.firstData;\r\n        const secondStarData = data.secondData;\r\n        const thirdStarData = data.thirdData;\r\n        let starScoreHTML = '';\r\n        function fillStarScore(name, wave, bat, bullet, boss) {\r\n          starScoreHTML = `\r\n            <div class=\"star__name\">${name}</div>\r\n            <div class=\"star__scores\">\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${wave}</div>\r\n                <div class=\"star__text\">WAVES</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${bat}</div>\r\n                <div class=\"star__text\">BATTERIES</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${bullet}</div>\r\n                <div class=\"star__text\">BULLETS</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${boss}</div>\r\n                <div class=\"star__text\">BOSS</div>\r\n              </div>\r\n            </div>\r\n          `;\r\n        }\r\n        fillStarScore(...firstStarData);\r\n        starWrapper1.innerHTML = starScoreHTML;\r\n        fillStarScore(...secondStarData);\r\n        starWrapper2.innerHTML = starScoreHTML;\r\n        fillStarScore(...thirdStarData);\r\n        starWrapper3.innerHTML = starScoreHTML;\r\n      });\r\n  }\r\n  // \r\n  generateProp() {\r\n    // \r\n    if (this.prop) return;\r\n    this.propGeneratedTimer = setTimeout(() => {\r\n      this.propGeneratedInterval -= 1;\r\n      // 20 \r\n      if (this.propGeneratedInterval === 0) {\r\n        let propName;\r\n        //  5 \r\n        if (this.shooter.hearts < 5) {\r\n          propName = props[getRandom(0, 4)];\r\n        } else {\r\n          propName = props[getRandom(1, 4)];\r\n        }\r\n        this.prop = new Prop({\r\n          src: `../img/${propName}.svg`,\r\n          axisRotateR: gameHalfDiagonalL,\r\n          axisRotateAngle: getRandom(0, 360),\r\n        });\r\n        //  20 (200 * 100) \r\n        this.propGeneratedInterval = 200;\r\n      }\r\n      this.generateProp();\r\n    }, 100);\r\n  }\r\n  // \r\n  countdownTime() {\r\n    this.countdownTimer = setTimeout(() => {\r\n      if (this.countdownSeconds === 0) {\r\n        this.currentLevel += 1;\r\n        this.setLevel(this.currentLevel);\r\n        return;\r\n      }\r\n      this.countdownSeconds -= 1;\r\n      gameTime.textContent = `00:${this.countdownSeconds < 10 ? `0${this.countdownSeconds}` : this.countdownSeconds}`;\r\n      this.countdownTime();\r\n    }, 1000);\r\n  }\r\n  countupTime() {\r\n    this.countupTimer = setTimeout(() => {\r\n      this.beatBossSeconds += 1;\r\n      gameTime.textContent = `00:${this.beatBossSeconds < 10 ? `0${this.beatBossSeconds}` : this.beatBossSeconds}`;\r\n      this.countupTime();\r\n    }, 1000);\r\n  }\r\n  //  shooter \r\n  recoverShooterHPBar() {\r\n    this.hpRecoverTimer = setTimeout(() => {\r\n      if (this.isPause || !this.isStart) {\r\n        this.recoverShooterHPBar();\r\n        return;\r\n      }\r\n      const nowHPW = shooterHPBar.offsetWidth;\r\n      if (nowHPW < 216) {\r\n        const recoverHPBarW = nowHPW + 1;\r\n        shooterHPBar.style.width = `${recoverHPBarW}px`;\r\n      }\r\n      this.recoverShooterHPBar();\r\n    }, 300);\r\n  }\r\n  //  3 \r\n  clearCrawler() {\r\n    gameCrawler.textContent = '';\r\n    // CONFUSED \r\n    // setTimeout(this.clearCrawler, 3000);\r\n    this.crawlerClearedTimer = setTimeout(() => {\r\n      this.clearCrawler();\r\n    }, 3000);\r\n  }\r\n  // \r\n  setEnemy(form, seconds = 0) {\r\n    setTimeout(() => {\r\n      switch (form) {\r\n        case 'circle': {\r\n          this.circles.push(new Circle({\r\n            axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\r\n            axisRotateAngle: getRandom(0, 360),\r\n            axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n            rotate: getRandom(0, 360),\r\n          }));\r\n          break;\r\n        }\r\n        case 'triangle': {\r\n          // axisRotateAngle  rotate \r\n          const angle = getRandom(0, 360);\r\n          this.triangles.push(new Triangle({\r\n            axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\r\n            axisRotateAngle: angle,\r\n            axisRotateAngleV: getRandom(2, 8) / 10,\r\n            rotate: angle,\r\n          }));\r\n          break;\r\n        }\r\n        case 'polygon': {\r\n          const rotateR = getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL / 1.5);\r\n          const rotateAngle = getRandom(0, 360);\r\n          const rotate = getRandom(0, 360);\r\n          this.polygons.push(new Polygon({\r\n            axisRotateR: {\r\n              whole: rotateR,\r\n              big: rotateR,\r\n              small: rotateR,\r\n            },\r\n            axisRotateAngle: {\r\n              whole: rotateAngle,\r\n              big: rotateAngle,\r\n              small: rotateAngle,\r\n            },\r\n            rotate: {\r\n              whole: rotate,\r\n              big: rotate,\r\n              small: rotate,\r\n            },\r\n            rotateV: getRandom(4, 8) / 10,\r\n          }));\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    }, seconds * 1000);\r\n  }\r\n  // \r\n  initLevel(level, seconds) {\r\n    gameLevel.textContent = `Wave ${level}`;\r\n    this.countdownSeconds = seconds;\r\n    gameTime.textContent = `00:${this.countdownSeconds}`;\r\n    this.countdownTime();\r\n  }\r\n  // \r\n  setLevel(level) {\r\n    switch (level) {\r\n      case 1:\r\n        this.initLevel('01', 10);\r\n        const rotateNum = 360;\r\n        this.boss = new Boss({\r\n          axisRotateR: getRandom(gameH / 3, gameH / 2.5),\r\n          axisRotateAngle: rotateNum,\r\n          rotate: rotateNum - 90,\r\n        });\r\n        // \r\n        // this.setEnemy('circle', 2);\r\n        // this.setEnemy('triangle', 0);\r\n        // this.setEnemy('polygon', 0);\r\n        break;\r\n      // case 2:\r\n      //   this.initLevel('02', 20);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('polygon', 10);\r\n      //   break;\r\n      // case 3:\r\n      //   this.initLevel('03', 20);\r\n      //   this.setEnemy('polygon', 2);\r\n      //   this.setEnemy('circle', 5);\r\n      //   this.setEnemy('polygon', 10);\r\n      //   break;\r\n      // case 4:\r\n      //   this.initLevel('04', 30);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('polygon', 10);\r\n      //   this.setEnemy('triangle', 15);\r\n      //   this.setEnemy('polygon', 20);\r\n      //   break;\r\n      // case 5:\r\n      //   this.initLevel('05', 30);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('circle', 5);\r\n      //   this.setEnemy('polygon', 15);\r\n      //   this.setEnemy('triangle', 20);\r\n      //   break;\r\n      // case 6:\r\n      //   this.initLevel('06', 40);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('triangle', 5);\r\n      //   this.setEnemy('circle', 15);\r\n      //   this.setEnemy('circle', 25);\r\n      //   this.setEnemy('polygon', 25);\r\n      //   break;\r\n      // case 7:\r\n      //   this.initLevel('07', 60);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('circle', 10);\r\n      //   this.setEnemy('triangle', 10);\r\n      //   this.setEnemy('polygon', 15);\r\n      //   this.setEnemy('polygon', 20);\r\n      //   this.setEnemy('triangle', 25);\r\n      //   this.setEnemy('polygon', 25);\r\n      //   this.setEnemy('polygon', 35);\r\n      //   this.setEnemy('triangle', 35);\r\n      //   this.setEnemy('polygon', 40);\r\n      //   this.setEnemy('circle', 45);\r\n      //   this.setEnemy('circle', 50);\r\n      //   break;\r\n      // case 8:\r\n      //   this.initLevel('08', 60);\r\n      //   this.setEnemy('circle', 5);\r\n      //   this.setEnemy('triangle', 10);\r\n      //   this.setEnemy('triangle', 10);\r\n      //   this.setEnemy('polygon', 15);\r\n      //   this.setEnemy('circle', 15);\r\n      //   this.setEnemy('circle', 20);\r\n      //   this.setEnemy('polygon', 30);\r\n      //   this.setEnemy('circle', 35);\r\n      //   this.setEnemy('triangle', 35);\r\n      //   this.setEnemy('polygon', 35);\r\n      //   this.setEnemy('circle', 45);\r\n      //   this.setEnemy('triangle', 45);\r\n      //   this.setEnemy('circle', 50);\r\n      //   this.setEnemy('polygon', 50);\r\n      //   break;\r\n      // case 9:\r\n      //   this.initLevel('09', 30);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('circle', 2);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('triangle', 2);\r\n      //   this.setEnemy('polygon', 10);\r\n      //   this.setEnemy('circle', 15);\r\n      //   this.setEnemy('triangle', 15);\r\n      //   this.setEnemy('polygon', 15);\r\n      //   this.setEnemy('polygon', 25);\r\n      //   break;\r\n      // case 10:\r\n      //   gameLevel.textContent = 'Wave 10';\r\n      //   const rotateNum = getRandom(0, 360);\r\n      //   this.boss = new Boss({\r\n      //     axisRotateR: getRandom(gameH / 3, gameH / 2.5),\r\n      //     axisRotateAngle: rotateNum,\r\n      //     rotate: rotateNum - 90,\r\n      //   });\r\n      //   this.countupTime();\r\n      //   break;\r\n      default:\r\n        break;\r\n    }\r\n    playSound('synth', 'A6');\r\n  }\r\n  checkPlayerName() {\r\n    // const playerName = document.getElementById('player-name').value;\r\n    if (playerName.value) {\r\n      return true;\r\n    } else {\r\n      playerName.classList.add('warn');\r\n      playSound('synth', 'A3');\r\n      playSound('synth', 'A2', '8n', 160);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n// Page Loaded\r\nfunction handleLoad() {\r\n  game = new Game();\r\n  initCanvas();\r\n  game.init();\r\n}\r\n\r\n// load & resize event\r\nwindow.addEventListener('load', handleLoad);\r\nwindow.addEventListener('resize', initCanvas);\r\n\r\n\r\n\r\n// Mouse Events & Recording\r\nlet mouseMovePos = {}\r\nlet mouseMoveAngle = 0;\r\nfunction handleMouseMove(evt) {\r\n  mouseMovePos.x = evt.x - ww / 2;\r\n  mouseMovePos.y = evt.y - wh / 2;\r\n  const angle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n  mouseMoveAngle = angle < 0 ? (angle + 2 * Math.PI) : angle;\r\n};\r\n\r\nlet beforeShootTime = new Date();\r\nfunction handleClick() {\r\n  if (game.isPause) return;\r\n  game.shooter.shoot();\r\n};\r\n\r\nfunction handleKeyup(evt) {\r\n  if (game.isStart) {\r\n    if (evt.key === 's') {\r\n      game.shooter.shoot();\r\n    }\r\n    if (evt.key === 'p') {\r\n      game.pauseGame();\r\n    }\r\n  } else {\r\n    if (evt.key === 'Enter') {\r\n      if (!game.checkPlayerName()) return;\r\n      game.startGame();\r\n    }\r\n  }\r\n  if (evt.key === 'm') {\r\n    game.isMuted = !game.isMuted;\r\n    bgm.muted = !bgm.muted;\r\n    victoryBgm.muted = !victoryBgm.muted;\r\n  }\r\n}\r\n\r\nfunction handlePlayerName() {\r\n  playerName.addEventListener('focus', function () {\r\n    playerName.classList.remove('shine');\r\n    playerName.classList.remove('warn');\r\n  });\r\n\r\n  playerName.addEventListener('focusout', function () {\r\n    if (!playerName.value) {\r\n      playerName.classList.add('shine');\r\n    }\r\n  });\r\n\r\n  playerName.addEventListener('input', function () {\r\n    if (playerName.value) {\r\n      startBtn.classList.add('shine');\r\n    } else {\r\n      startBtn.classList.remove('shine');\r\n    }\r\n  });\r\n}","class Polygon {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      rotate: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      HP: {\r\n        whole: 1,\r\n        big: 1,\r\n        small: 1,\r\n      },\r\n      axisRotateRV: 0,\r\n      rotateV: 0,\r\n      color: globalColor.red,\r\n      // \r\n      isJustSplite: true,\r\n      scale: 0,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  originPos(form) {\r\n    return {\r\n      x: (gameW / 2) + this.axisRotateR[form] * Math.cos(this.axisRotateAngle[form] * degToPi),\r\n      y: (gameH / 2) + this.axisRotateR[form] * Math.sin(this.axisRotateAngle[form] * degToPi),\r\n    };\r\n  }\r\n\r\n\r\n  draw() {\r\n    if (this.HP.whole) {\r\n      ctx.save();\r\n      ctx.translate(this.originPos('whole').x, this.originPos('whole').y);\r\n      ctx.rotate(this.rotate.whole * degToPi);\r\n      ctx.scale(this.scale, this.scale);\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(23, 150);\r\n      ctx.$triLineTo(34, 202);\r\n      ctx.$triLineTo(22, 255);\r\n      ctx.$triLineTo(22, 324);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n      ctx.moveTo(9.6, -2);\r\n      ctx.$triLineTo(22, 324);\r\n      ctx.$triLineTo(21, 8);\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(10, 36);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n      ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(23, 150);\r\n      ctx.lineTo(-8.8, 0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // \r\n      drawLightning({\r\n        x: -0.8,\r\n        y: -16\r\n      });\r\n      ctx.restore();\r\n    } else {\r\n      // \r\n      if (this.HP.big) {\r\n        ctx.save();\r\n        ctx.translate(this.originPos('big').x, this.originPos('big').y);\r\n        ctx.rotate(this.rotate.big * degToPi);\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.$triLineTo(34, 202);\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.beginPath();\r\n        ctx.moveTo(-8.8, 0);\r\n        ctx.$triLineTo(4.8, 64);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        drawLightning({\r\n          x: -12,\r\n          y: -8\r\n        }, 0.6);\r\n        ctx.restore();\r\n      }\r\n      // \r\n      if (this.HP.small) {\r\n        ctx.save();\r\n        ctx.translate(this.originPos('small').x, this.originPos('small').y);\r\n        ctx.rotate(this.rotate.small * degToPi);\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n        ctx.$triLineTo(4.8, 64);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        ctx.moveTo(9.6, -2);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(10, 36);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // \r\n        drawLightning({\r\n          x: 10,\r\n          y: -8\r\n        }, 0.5);\r\n        ctx.restore();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    enemyMethods.approach(this);\r\n    // \r\n    if (this.HP.whole) {\r\n      this.rotate.whole = this.rotate.big = this.rotate.small += this.rotateV;\r\n      //  shooter\r\n      game.isStart && enemyMethods.hitShooter(game.polygons, idx, 'whole', this.axisRotateR.whole, this.axisRotateAngle.whole);\r\n    } else {\r\n      // let rotateDirection;\r\n      // \r\n      if (this.isJustSplite) {\r\n        // const rotateOriginPos = 90 - 70;\r\n        // const rotateDirection = (((this.rotate.whole % 360) >= rotateOriginPos) && ((this.rotate.whole % 360) < (180 + rotateOriginPos))) ? -1 : 1;\r\n        const rotateDirection = Math.random() >= 0.5 ? 1 : -1;\r\n        TweenLite.to(this.axisRotateAngle, 2.4, {\r\n          big: `+=${getRandom(15, 30) * rotateDirection}`,\r\n          small: `-=${getRandom(15, 30) * rotateDirection}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.axisRotateR, 2.4, {\r\n          big: `+=${getRandom(50, 150)}`,\r\n          small: `+=${getRandom(50, 150)}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.rotate, 2.4, {\r\n          big: `+=${getRandom(180, 270)}`,\r\n          small: `-=${getRandom(180, 270)}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        // gameCrawler.textContent = 'ENEMY SPLITS';\r\n        this.isJustSplite = false;\r\n      }\r\n      //  shooter\r\n      if (this.HP.big) {\r\n        // \r\n        this.rotate.big += this.rotateV * 1.4;\r\n        enemyMethods.hitShooter(game.polygons, idx, 'big', this.axisRotateR.big, this.axisRotateAngle.big);\r\n      }\r\n      //  shooter\r\n      if (this.HP.small) {\r\n        // \r\n        this.rotate.small -= this.rotateV * 1.6;\r\n        enemyMethods.hitShooter(game.polygons, idx, 'small', this.axisRotateR.small, this.axisRotateAngle.small);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = ' ENEMY IS COMING';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    if (isBossGenerate) {\r\n      const rotateNum = getRandom(40, 80);\r\n      const rNum = getRandom(40, 80);\r\n      TweenLite.to(this.axisRotateAngle, 1.6, {\r\n        whole: `-=${rotateNum}`,\r\n        big: `-=${rotateNum}`,\r\n        small: `-=${rotateNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n      TweenLite.to(this.axisRotateR, 1.6, {\r\n        whole: `+=${rNum}`,\r\n        big: `+=${rNum}`,\r\n        small: `+=${rNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    game.isStart && playSound('synth', 'C4', '4n');\r\n  }\r\n}","/*  class */\r\nclass Prop {\r\n  constructor(args) {\r\n    const def = {\r\n      img: new Image(),\r\n      src: '',\r\n      axisRotateR: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngle: 0,\r\n      r: 32,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!this.img.src) {\r\n      this.img.src = this.src;\r\n    }\r\n    if (this.img.complete) {\r\n      ctx.save();\r\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.drawImage(this.img, 0, 0);\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';\r\n      ctx.arc(this.img.width / 2, this.img.height / 2, this.r, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      ctx.restore();\r\n    }\r\n  }\r\n  update() {\r\n    if (!this.axisRotateRV) {\r\n      const seconds = getRandom(5, 10);\r\n      this.axisRotateRV = -(gameHalfDiagonalL / (seconds * updateFPS));\r\n    }\r\n    this.axisRotateR += this.axisRotateRV;\r\n    //  shooter \r\n    const shooter = game.shooter;\r\n    // \r\n    if ((this.axisRotateR + this.r) <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n      // \r\n      game.prop = '';\r\n      const propName = this.src.replace('../img/', '').split('.')[0];\r\n      shooter.getProp(propName);\r\n    }\r\n  }\r\n}","class Shooter {\r\n  constructor(args) {\r\n    const def = {\r\n      color: globalColor.white,\r\n      // r: 34 * 0.85,\r\n      r: 28.9,\r\n      // shieldR: (34 + 36) * 0.85,\r\n      shieldR: 60,\r\n      // cirSolidLineW: 6 * 0.85,\r\n      cirSolidLineW: 6,\r\n      // shieldLineW: 4 * 0.85,\r\n      shieldLineW: 4,\r\n      rotateAngle: 0,\r\n      bullets: [],\r\n      bulletNum: 0,\r\n      hearts: 3,\r\n      state: '',\r\n      isAttacked: false,\r\n      isProtect: false,\r\n      beforeShootTime: new Date(),\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!game.isStart && !game.isEnd) return;\r\n    ctx.save();\r\n    // \r\n    ctx.translate(gameW / 2, gameH / 2);\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n    ctx.shadowBlur = 16;\r\n    ctx.lineWidth = this.cirSolidLineW;\r\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n    if (!this.isAttacked) {\r\n      ctx.strokeStyle = this.color;\r\n    } else {\r\n      ctx.strokeStyle = globalColor.red;\r\n      this.isAttacked = false;\r\n    }\r\n    ctx.stroke();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 0, this.rotateAngle);\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 120, this.rotateAngle);\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 240, this.rotateAngle);\r\n    // ctx.lineWidth = 3 * 0.85;\r\n    ctx.lineWidth = 2.55;\r\n    ctx.stroke();\r\n    ctx.restore();\r\n    // \r\n    ctx.strokeStyle = this.color;\r\n    // const outerR = this.r + 22 * 0.85;\r\n    const outerR = this.r + 20;\r\n    for (let i = 0; i < 360; i += 1) {\r\n      const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\r\n      const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\r\n      const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\r\n      const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\r\n      if (i % 10 < 5) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.lineWidth = 1;\r\n        ctx.stroke();\r\n      }\r\n    }\r\n    // \r\n    ctx.beginPath();\r\n    ctx.lineWidth = this.shieldLineW;\r\n    //  shooter  shield 180\r\n    if (this.state !== 'shield') {\r\n      ctx.arc(0, 0, this.shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\r\n    } else {\r\n      ctx.arc(0, 0, this.shieldR, 90 * degToPi + this.rotateAngle, 270 * degToPi + this.rotateAngle);\r\n    }\r\n    if (!this.isProtect) {\r\n      ctx.strokeStyle = this.color;\r\n    } else {\r\n      ctx.strokeStyle = globalColor.blue;\r\n      this.isProtect = false;\r\n    }\r\n    ctx.stroke();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.save();\r\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n    ctx.shadowBlur = 16;\r\n    ctx.rotate(this.rotateAngle);\r\n    ctx.translate(this.r + 8, 0);\r\n    ctx.moveTo(0, 0);\r\n    //  13.6 10.2\r\n    //  11.8 6.8\r\n    ctx.lineTo(0, 6.8);\r\n    ctx.lineTo(10.2, 6.8);\r\n    ctx.lineTo(22.1, 3.4);\r\n    ctx.lineTo(22.1, -3.4);\r\n    ctx.lineTo(10.2, -6.8);\r\n    ctx.lineTo(0, -6.8);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    ctx.restore();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    this.rotateAngle = mouseMoveAngle;\r\n    this.bullets.forEach((bullet, idx) => {\r\n      bullet.update(idx);\r\n    });\r\n  }\r\n  shoot() {\r\n    const shootTime = new Date();\r\n    if (shootTime - beforeShootTime > 400) {\r\n      let bulletNum;\r\n      //  shooter  double 0.16 \r\n      if (this.state !== 'double') {\r\n        bulletNum = 1;\r\n      } else {\r\n        bulletNum = 2;\r\n      }\r\n      for (let i = 0; i < bulletNum; i++) {\r\n        if (this.state !== 'wave') {\r\n          setTimeout(() => {\r\n            this.bulletNum += 1;\r\n            this.bullets.push(new ShooterBullet({\r\n              // axisRotateR: 62 * 0.85,\r\n              axisRotateR: 52.7,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n            playSound('membrane', 'D3');\r\n          }, 160 * i);\r\n        } else {\r\n          setTimeout(() => {\r\n            this.bulletNum += 1;\r\n            this.bullets.push(new ShooterBullet({\r\n              waveLength: getRandom(40, 80),\r\n              waveFreq: getRandom(2, 4) / 10,\r\n              waveAmp: getRandom(4, 8),\r\n              waveFlow: getRandom(4, 8),\r\n              // axisRotateR: 70 * 0.85,\r\n              axisRotateR: 59.5,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n            playSound('mono', 'F2', '4n', 0, -10);\r\n          }, 160 * i);\r\n        }\r\n      }\r\n      beforeShootTime = shootTime;\r\n    }\r\n  }\r\n  getProp(propName) {\r\n    // \r\n    let lastTime;\r\n    switch (propName) {\r\n      case 'heart':\r\n        this.recoverHeart();\r\n        lastTime = 0;\r\n        gameCrawler.textContent = 'GAIN LIFE';\r\n        break;\r\n      case 'crackdown':\r\n        this.drawCrackdownEffect();\r\n        lastTime = 0;\r\n        gameCrawler.textContent = 'BOOM';\r\n        break;\r\n      case 'shield':\r\n        lastTime = 25000;\r\n        gameCrawler.textContent = 'EXTEND SHIELD';\r\n        break;\r\n      case 'double':\r\n        lastTime = 20000;\r\n        gameCrawler.textContent = 'DOUBLE SHOOT';\r\n        break;\r\n      case 'wave':\r\n        lastTime = 15000;\r\n        gameCrawler.textContent = 'WAVE BULLET';\r\n        break;\r\n      default:\r\n        lastTime = 0;\r\n    }\r\n    //  shooter \r\n    this.state = propName;\r\n    // \r\n    setTimeout(() => {\r\n      this.state = '';\r\n      // \r\n      game.generateProp();\r\n    }, lastTime);\r\n    // \r\n    this.displayPropInfo(propName, lastTime);\r\n    if (propName !== 'crackdown') {\r\n      playSound('synth', 'E5');\r\n      playSound('synth', 'G5', '8n', 160);\r\n    }\r\n  }\r\n  // \r\n  drawCrackdownEffect() {\r\n    let crackdownTime = 1;\r\n    const boss = game.boss;\r\n    const effect = () => {\r\n      if (!game.isPause) {\r\n        crackdownTime += 1;\r\n      }\r\n      ctx.save();\r\n      ctx.beginPath();\r\n      ctx.shadowColor = 'rgba(255, 255, 255, 0.72)';\r\n      ctx.shadowBlur = 2;\r\n      //  1  0\r\n      ctx.strokeStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 98})`;\r\n      ctx.fillStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 490})`;\r\n      ctx.lineWidth = 5;\r\n      /**\r\n       * baseLog()  0  3\r\n       *  (((crackdownTime - 2) / 98) * 26) + 1  1  27\r\n       *  0  528\r\n       */\r\n      const effectR = 176 * baseLog(3, (((crackdownTime - 2) / 98) * 26) + 1);\r\n      ctx.arc(gameW / 2, gameH / 2, effectR, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.stroke();\r\n      ctx.restore();\r\n      // \r\n      game.circles.forEach((circle, idx) => {\r\n        if (effectR > circle.axisRotateR) {\r\n          enemyMethods.dieEffect(circle.r, originPos(circle.axisRotateR, circle.axisRotateAngle).x, originPos(circle.axisRotateR, circle.axisRotateAngle).y, '245, 175, 95');\r\n          game.circles.splice(idx, 1);\r\n        }\r\n      });\r\n      game.triangles.forEach((triangle, idx) => {\r\n        if (effectR > triangle.axisRotateR) {\r\n          enemyMethods.dieEffect(triangle.r, originPos(triangle.axisRotateR, triangle.axisRotateAngle).x, originPos(triangle.axisRotateR, triangle.axisRotateAngle).y, '54, 118, 187');\r\n          game.triangles.splice(idx, 1);\r\n        }\r\n      });\r\n      game.polygons.forEach((polygon, idx) => {\r\n        if (effectR > polygon.axisRotateR.whole) {\r\n          if (polygon.HP.whole) {\r\n            const polygonWholeR = (34 + 21) / 2;\r\n            enemyMethods.dieEffect(polygonWholeR, polygon.originPos('whole').x, polygon.originPos('whole').y, '231, 70, 93');\r\n          } else {\r\n            if (polygon.HP.big) {\r\n              const polygonBigR = (34 + 22) / 2;\r\n              enemyMethods.dieEffect(polygonBigR, polygon.originPos('big').x, polygon.originPos('big').y, '231, 70, 93');\r\n              game.polygons.splice(idx, 1);\r\n            }\r\n            if (polygon.HP.small) {\r\n              const polygonSmallR = (23 + 21) / 2;\r\n              enemyMethods.dieEffect(polygonSmallR, polygon.originPos('small').x, polygon.originPos('small').y, '231, 70, 93');\r\n              game.polygons.splice(idx, 1);\r\n            }\r\n          }\r\n          game.polygons.splice(idx, 1);\r\n        }\r\n      });\r\n      game.subTris.forEach((subTriangle, idx) => {\r\n        if (effectR > subTriangle.axisRotateR) {\r\n          game.subTris.splice(idx, 1);\r\n        }\r\n      });\r\n      //  boss\r\n      if (game.boss) {\r\n        if (effectR > boss.axisRotateR && boss.HP === 0) {\r\n          enemyMethods.bossDieResult();\r\n        }\r\n      }\r\n      if (crackdownTime < 100) {\r\n        requestAnimationFrame(effect);\r\n      }\r\n    }\r\n    requestAnimationFrame(effect);\r\n    if (boss) {\r\n      boss.HP -= 1;\r\n    }\r\n    // playSound('duo', 'F4', '2n');\r\n    playSound('synth', 'C6', '2n');\r\n    // playSound('synth', 'G2', '8n', 0, 20);\r\n    // playSound('duo', 'F2', '2n', 0, 15);\r\n    // playSound('duo', 'E2', '2n', 0, 10);\r\n    // playSound('duo', 'D2', '8n', 1000, 10);\r\n  }\r\n  // \r\n  recoverHeart() {\r\n    const heart = document.createElement('DIV');\r\n    heart.classList.add('panel__game-heart');\r\n    heartWrapper.appendChild(heart);\r\n    this.hearts += 1;\r\n  }\r\n  displayPropInfo(propName, lastTime) {\r\n    if (propName === 'crackdown' || propName === 'heart') return;\r\n    // prop.style.opacity = 1;\r\n    prop.classList.remove('op0');\r\n    propImg.src = `../img/${propName}--panel.svg`;\r\n    lastTime /= 1000;  \r\n    propLastTime.textContent = lastTime;\r\n    const countLastTime = () => {\r\n      const propInfoTimer = setTimeout(() => {\r\n        if (game.isPause) {\r\n          countLastTime();\r\n          return;\r\n        }\r\n        // \r\n        if (!game.isStart) {\r\n          // prop.style.opacity = 0;\r\n          clearTimeout(propInfoTimer);\r\n          return;\r\n        }\r\n        lastTime -= 1;\r\n        propLastTime.textContent = lastTime >= 10 ? lastTime : `0${lastTime}`;\r\n        if (lastTime) {\r\n          countLastTime();\r\n        } else {\r\n          // prop.style.opacity = 0;\r\n          prop.classList.add('op0');\r\n          clearTimeout(propInfoTimer);\r\n        }\r\n      }, 1000);\r\n    }\r\n    countLastTime();\r\n  }\r\n}\r\n\r\n\r\n\r\nclass ShooterBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      // bodyLen: 15 * 0.85,\r\n      bodyLen: 12.75,\r\n      axisRotateR: 0,\r\n      color: globalColor.white,\r\n      v: 10,\r\n      rotateAngle: 0,\r\n      waveLength: 40,\r\n      waveFreq: 0.2,\r\n      waveAmp: 4,\r\n      waveFlow: 4,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n    ctx.translate(gameW / 2, gameH / 2);\r\n    ctx.rotate(this.rotateAngle);\r\n    //  shooter  wave\r\n    if (game.shooter.state !== 'wave') {\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\r\n      // ctx.arc(-7 * 0.85 + this.axisRotateR, 0, 3 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-5.95 + this.axisRotateR, 0, 2.15, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      // ctx.arc(-12 * 0.85 + this.axisRotateR, 0, 2 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-10.2 + this.axisRotateR, 0, 1.7, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\r\n      // ctx.arc(-15 * 0.85 + this.axisRotateR, 0, 1 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-12.75 + this.axisRotateR, 0, 0.85, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      // ctx.arc(0 + this.axisRotateR, 0, 4 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(0 + this.axisRotateR, 0, 3.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // \r\n      ctx.beginPath();\r\n      // ctx.moveTo(3 * 0.85 + this.axisRotateR, 3 * 0.85);\r\n      ctx.moveTo(2.55 + this.axisRotateR, 2.55);\r\n      ctx.lineTo(this.bodyLen + this.axisRotateR, 0);\r\n      // ctx.lineTo(3 * 0.85 + this.axisRotateR, -3 * 0.85);\r\n      ctx.lineTo(2.55 + this.axisRotateR, -2.55);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    } else {\r\n      drawWaveBullet(this, 'axisRotateR', 1.6, 'rgba(255, 255, 255, 0.72)');\r\n    }\r\n    ctx.restore();\r\n  }\r\n  update(bulletIdx) {\r\n    // \r\n    this.axisRotateR += this.v;\r\n    let anglePanFn;\r\n    let shotRRangeFn;\r\n    // \r\n    // \r\n    if (game.shooter.state !== 'wave') {\r\n      const bulletMoveLen = this.axisRotateR + this.bodyLen;\r\n      // \r\n      game.circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= (circle.axisRotateR - (circle.r / 2))) && (bulletMoveLen <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95');\r\n      });\r\n      // \r\n      game.triangles.forEach((triangle, triIdx) => {\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= triangle.axisRotateR) && (bulletMoveLen <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187');\r\n      });\r\n      // \r\n      game.polygons.forEach((polygon, polyIdx) => {\r\n        // \r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (bulletMoveLen >= sideA) && (bulletMoveLen <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn);\r\n        } else {\r\n          // \r\n          // \r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn);\r\n          }\r\n          // \r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn);\r\n          }\r\n        }\r\n      });\r\n      //  boss\r\n      const boss = game.boss;\r\n      if (boss) {\r\n        anglePanFn = () => {\r\n          return Math.asin(18 / (boss.axisRotateR + 6));\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= (boss.axisRotateR + 9 + 8)) && (bulletMoveLen <= (boss.axisRotateR + 28));\r\n        }\r\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'ordinary', true);\r\n      }\r\n    } else {\r\n      // \r\n      // \r\n      game.circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= (circle.axisRotateR - (circle.r / 2))) && (this.axisRotateR <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95', 'wave');\r\n      });\r\n      // \r\n      game.triangles.forEach((triangle, triIdx) => {\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= triangle.axisRotateR) && (this.axisRotateR <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187', 'wave');\r\n      });\r\n      // \r\n      game.polygons.forEach((polygon, polyIdx) => {\r\n        // \r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (this.axisRotateR >= sideA) && (this.axisRotateR <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn, 'wave');\r\n        } else {\r\n          // \r\n          // \r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // \r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // \r\n          if (polygon.HP.big === 0 && polygon.HP.small === 0) {\r\n            game.polygons.splice(polyIdx, 1);\r\n            // \r\n            game.batteryNum += 1;\r\n            batteryNum.textContent = game.batteryNum;\r\n          }\r\n        }\r\n      });\r\n      //  boss\r\n      const boss = game.boss;\r\n      if (boss) {\r\n        anglePanFn = () => {\r\n          return Math.asin(18 / (boss.axisRotateR + 6));\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= (boss.axisRotateR + 9 + 8)) && (this.axisRotateR <= (boss.axisRotateR + 28));\r\n        }\r\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'wave', true);\r\n      }\r\n    }\r\n    // \r\n    this.beyondBoundary(bulletIdx);\r\n  }\r\n  // \r\n  // FIXME \r\n  attackEnemy(enemy, enemyIdx, enemies, bulletIdx, anglePanFn, shotRRangeFn, colorRGB, type = 'ordinary', isBoss = false) {\r\n    /**\r\n     * \r\n     * \r\n     * \r\n     */\r\n    const enemyAnglePan = anglePanFn();\r\n    const enemyAngleMinus = (enemy.axisRotateAngle % 360) * degToPi - enemyAnglePan;\r\n    const enemyAngleAdd = (enemy.axisRotateAngle % 360) * degToPi + enemyAnglePan;\r\n    const shotAngleRange = this.judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type);\r\n    // \r\n    const shotRRange = shotRRangeFn();\r\n\r\n    if (!gameCrawler.textContent) {\r\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE' : 'BANG';\r\n    }\r\n    // \r\n    if (shotAngleRange && shotRRange) {\r\n      // \r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      //  1 \r\n      enemy.HP -= 1;\r\n      if (type === 'ordinary') {\r\n        playSound('membrane', 'D2');\r\n      } else {\r\n        playSound('mono', 'C2', '8n', 0, -10);\r\n      }\r\n      //  0\r\n      if (enemy.HP === 0) {\r\n        if (isBoss) {\r\n          //  boss\r\n          enemyMethods.bossDieResult();\r\n          return;\r\n        } else {\r\n          // \r\n          enemies.splice(enemyIdx, 1);\r\n          // \r\n          enemyMethods.dieEffect(enemy.r, originPos(enemy.axisRotateR, enemy.axisRotateAngle).x, originPos(enemy.axisRotateR, enemy.axisRotateAngle).y, colorRGB);\r\n          // \r\n          game.batteryNum += 1;\r\n          batteryNum.textContent = game.batteryNum;\r\n        }\r\n      }\r\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE\" : 'HIT';\r\n    }\r\n  }\r\n  // \r\n  attackPolygon(polygon, polyIdx, form, sideB1Len, sideB2Len, angleAB1, angleAB2, rotateAngleJudge, bulletIdx, shotRRangeFn, type = 'ordinary') {\r\n    const polyAxisRotateAngle = polygon.axisRotateAngle[form];\r\n    const polyRotate = polygon.rotate[form];\r\n    // \r\n    const sideA = polygon.axisRotateR[form];\r\n    const sideB1 = sideB1Len;\r\n    const sideB2 = sideB2Len;\r\n    /**\r\n     * \r\n     *   whole: 8, 202\r\n     *   big: 70, 202\r\n     *   small: 70, 255\r\n\r\n     * angleB \r\n     *   whole: axisRotateAngle 180, rotate 75\r\n     *     270 - 202 = 68\r\n     *     90 - 8 = 82\r\n     *     (68 + 82) / 2 = 75\r\n     * \r\n     *   big: axisRotateAngle 0, rotate 44\r\n     *     270 - 202 = 68\r\n     *     90 - 70 = 20\r\n     *     (68 + 20) / 2 = 44\r\n     * \r\n     *   small: axisRotateAngle 0, rotate 17.5\r\n     *     270 - 255 = 15\r\n     *     90 - 70 = 20\r\n     *     (15 + 20) / 2 = 17.5\r\n     */\r\n    const sideC1 = cosineFormula(sideA, sideB1, angleAB1);\r\n    const sideC2 = cosineFormula(sideA, sideB2, angleAB2);\r\n    //  axisRotateAnglerotate \r\n    const bottomJudge = (polyAxisRotateAngle <= 180) && ((polyRotate % 360) < rotateAngleJudge || (polyRotate % 360) >= (rotateAngleJudge + 180));\r\n    const topJudge = (polyAxisRotateAngle > 180) && ((polyRotate % 360) >= rotateAngleJudge || (polyRotate % 360) < (rotateAngleJudge + 180));\r\n    let angleB1;\r\n    let angleB2;\r\n\r\n    if (!gameCrawler.textContent) {\r\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE' : 'BANG';\r\n    }\r\n    if (bottomJudge || topJudge) {\r\n      angleB1 = getAngleB(sideA, sideB2, sideC2);\r\n      angleB2 = getAngleB(sideA, sideB1, sideC1);\r\n    } else {\r\n      angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n      angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n    }\r\n    /**\r\n     * \r\n     * axisRotateAngle  360 % 360\r\n     */\r\n    const polyAngleMinus = (polyAxisRotateAngle % 360) * degToPi - angleB1;\r\n    const polyAngleAdd = (polyAxisRotateAngle % 360) * degToPi + angleB2;\r\n    const shotAngleRange = this.judgeShotAngleRange(polyAngleMinus, polyAngleAdd, type);\r\n    // \r\n    const shotRRange = shotRRangeFn();\r\n    // \r\n    if (shotAngleRange && shotRRange) {\r\n      // \r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      //  1 \r\n      polygon.HP[form] -= 1;\r\n      if (form === 'whole') {\r\n        playSound('synth', 'D6', '16n');\r\n      }\r\n      //  0\r\n      if (polygon.HP.big === 0 || polygon.HP.small === 0) {\r\n        // \r\n        const polygonR = form === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\r\n        enemyMethods.dieEffect(polygonR, polygon.originPos(form).x, polygon.originPos(form).y, '231, 70, 93');\r\n      }\r\n      // \r\n      if (polygon.HP.big === 0 && polygon.HP.small === 0) {\r\n        game.polygons.splice(polyIdx, 1);\r\n        // \r\n        game.batteryNum += 1;\r\n        batteryNum.textContent = game.batteryNum;\r\n      }\r\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE!\" : 'HIT';\r\n      if (type === 'ordinary') {\r\n        playSound('membrane', 'D2');\r\n      } else {\r\n        playSound('mono', 'C2', '8n', 0, -10);\r\n      }\r\n    }\r\n  }\r\n  // \r\n  judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type) {\r\n    let shooterRotateAngle;\r\n    //  axisRotateAngle  360  shooter 0 \r\n    if (enemyAngleAdd > Math.PI * 2 && this.rotateAngle < Math.PI) {\r\n      shooterRotateAngle = this.rotateAngle + Math.PI * 2;\r\n    } else if (\r\n      //  axisRotateAngle  0\r\n      (enemyAngleMinus < 0 && enemyAngleAdd < 0) || \r\n      //  axisRotateAngle  0  shooter 0 \r\n      (enemyAngleMinus < 0 && enemyAngleAdd > 0 && this.rotateAngle > Math.PI)) {\r\n      shooterRotateAngle = this.rotateAngle - Math.PI * 2;\r\n    } else {\r\n      shooterRotateAngle = this.rotateAngle;\r\n    }\r\n    // \r\n    // \r\n    if (type !== 'wave') {\r\n      return shooterRotateAngle >= enemyAngleMinus && shooterRotateAngle <= enemyAngleAdd;\r\n    } else {\r\n      // \r\n      const shooterAnglePan = Math.atan2(this.waveLength, this.axisRotateR);\r\n      const shooterAngleMinus = shooterRotateAngle - shooterAnglePan;\r\n      const shooterAngleAdd = shooterRotateAngle + shooterAnglePan;\r\n      return (enemyAngleMinus <= shooterAngleAdd) && (enemyAngleAdd >= shooterAngleMinus);\r\n    }\r\n  }\r\n  // \r\n  beyondBoundary(bulletIdx) {\r\n    /**\r\n     * 856 / 2 = 428\r\n     * 624 / 2 = 312\r\n     * Math.sqrt(428 * 428 + 312 * 312) = 529.6\r\n     */\r\n    if (this.axisRotateR >= 530) {\r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n    }\r\n  }\r\n}","class Triangle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 26,\r\n      rotate: 0,\r\n      scale: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngleV: 0,\r\n      color: globalColor.blue,\r\n      bullets: [],\r\n      beforeRotateAxisAngleTime: new Date(),\r\n      beforeShootTime: new Date(),\r\n      HP: 4,\r\n      isGeneratedSub: false,\r\n      shootTimer: null,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  \r\n  draw() {\r\n    const triOuterBigR = this.r + 4;\r\n    const triInnerBigR = this.r - 16;\r\n    const triInnerSmallR = this.r - 22;\r\n    ctx.save();\r\n    // \r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    ctx.scale(this.scale, this.scale);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.save();\r\n    ctx.translate(4, 0);\r\n    ctx.beginPath();\r\n    ctx.moveTo(triOuterBigR * Math.cos(60 * degToPi), triOuterBigR * Math.sin(60 * degToPi));\r\n    ctx.$triLineTo(triOuterBigR, 180);\r\n    ctx.$triLineTo(triOuterBigR, 300);\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.moveTo(this.r * Math.cos(60 * degToPi), this.r * Math.sin(60 * degToPi));\r\n    ctx.$triLineTo(this.r, 180);\r\n    ctx.$triLineTo(this.r, 300);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // \r\n    ctx.translate(0, -2.8);\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(triInnerBigR, 90);\r\n    ctx.$triLineTo(triInnerBigR, 150);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // \r\n    ctx.translate(8 * Math.cos(-40 * degToPi), 8 * Math.sin(-40 * degToPi))\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(triInnerSmallR, 90);\r\n    ctx.$triLineTo(triInnerSmallR, 150);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    game.isStart && enemyMethods.approach(this);\r\n    // \r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    //  4-8  + \r\n    const rotateAxisAngleTime = new Date();\r\n    let randomRotateAngle;\r\n    if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > getRandom(4000, 8000)) {\r\n      // \r\n      if (this.shootTimer) {\r\n        clearTimeout(this.shootTimer);\r\n      }\r\n      randomRotateAngle = (Math.random() >= 0.25 ? 1 : -1) * getRandom(45, 75);\r\n      //  0.8 \r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `+=${randomRotateAngle}`,\r\n        ease: Power0.easeNone,\r\n      });\r\n      //  1.2 \r\n      TweenLite.to(this, 1.2, {\r\n        rotate: `+=${randomRotateAngle + 360}`,\r\n        ease: Power2.easeInOut,\r\n        onComplete: () => {\r\n          // \r\n          // \r\n          if (!game.isStart || game.isPause || this.HP === 0) return;\r\n          this.shoot();\r\n          //  2.4-7.2 \r\n          this.shootTimer = setTimeout(() => {\r\n            if (!game.isStart || this.HP === 0) return;\r\n            this.shoot();\r\n          }, getRandom(2400, 7200));\r\n        }\r\n      });\r\n      this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\r\n    }\r\n    //  2\r\n    if (this.HP === 2 && !this.isGeneratedSub) {\r\n      for (let i = 1; i <= 2; i += 1) {\r\n        game.subTris.push(new TriSub({\r\n          axisRotateR: this.axisRotateR,\r\n          axisRotateAngle: this.axisRotateAngle,\r\n          rotate: this.rotate,\r\n          order: i,\r\n        }));\r\n      }\r\n      gameCrawler.textContent = 'COUNTERATTACK';\r\n      this.isGeneratedSub = true;\r\n      playSound('synth', 'C6', '16n');\r\n    }\r\n    //  shooter\r\n    enemyMethods.hitShooter(game.triangles, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n\r\n\r\n\r\n  shoot() {\r\n    this.bullets.push(new TriBullet({\r\n      p: {\r\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n      },\r\n      axisRotateR: this.axisRotateR,\r\n      rotateAngle: this.rotate,\r\n    }));\r\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK' : 'ATTACK';\r\n    playSound('membrane', 'G5');\r\n  }\r\n\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = ' ENEMY IS COMING';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    let rotateNum = 0;\r\n    if (isBossGenerate) {\r\n      rotateNum = getRandom(40, 80);\r\n      const rNum = getRandom(40, 80);\r\n      TweenLite.to(this, 1.6, {\r\n        axisRotateAngle: `+=${rotateNum}`,\r\n        axisRotateR: `+=${rNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    TweenLite.to(this, 1.6, {\r\n      rotate: `+=${rotateNum + 360}`,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    game.isStart && playSound('synth', 'B4', '4n');\r\n  }\r\n}\r\n\r\n\r\n\r\nclass TriSub {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      // r: 26 * 0.4,\r\n      r: 10.4,\r\n      rotate: 0,\r\n      rotateV: 4,\r\n      color: globalColor.blue,\r\n      HP: 2,\r\n      isReproduceMoving: false,\r\n      order: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    const triOuterBigR = this.r + 1.6;\r\n    const triInnerBigR = this.r - 6.4;\r\n    const triInnerSmallR = this.r - 8.8;\r\n    ctx.save();\r\n    // \r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    // ctx.scale(0.4, 0.4);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.save();\r\n    ctx.translate(0.8, -Math.sqrt(1.92));\r\n    ctx.beginPath();\r\n    ctx.moveTo(triOuterBigR * Math.cos(0), triOuterBigR * Math.sin(0));\r\n    ctx.lineTo(triOuterBigR * Math.cos(120 * degToPi), triOuterBigR * Math.sin(120 * degToPi));\r\n    ctx.lineTo(triOuterBigR * Math.cos(240 * degToPi), triOuterBigR * Math.sin(240 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    ctx.beginPath();\r\n    ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n    ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n    ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // \r\n    ctx.translate(-1.28, -0.64);\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(triInnerBigR * Math.cos(30 * degToPi), triInnerBigR * Math.sin(30 * degToPi));\r\n    ctx.lineTo(triInnerBigR * Math.cos(90 * degToPi), triInnerBigR * Math.sin(90 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // \r\n    ctx.translate(0, -3.52);\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(triInnerSmallR * Math.cos(30 * degToPi), triInnerSmallR * Math.sin(30 * degToPi));\r\n    ctx.lineTo(triInnerSmallR * Math.cos(90 * degToPi), triInnerSmallR * Math.sin(90 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx) {\r\n    this.rotate += this.rotateV;\r\n    if (!this.isReproduceMoving) {\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `${this.order === 1 ? '+=' : '-='}10`,\r\n        ease: Power2.easeOut,\r\n        onComplete: () => {\r\n          TweenLite.to(this, 1.6, {\r\n            axisRotateR: 0,\r\n            ease: Power1.easeIn,\r\n          });\r\n        }\r\n      });\r\n      this.isReproduceMoving = true;\r\n    }\r\n    //  shooter\r\n    enemyMethods.hitShooter(game.subTris, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n}\r\n\r\n\r\n\r\nclass TriBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      rotateAngle: 0,\r\n      color: globalColor.blue,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n    ctx.translate(this.p.x, this.p.y);\r\n    ctx.rotate(this.rotateAngle * degToPi);\r\n    ctx.translate(this.moveX, 0);\r\n    // \r\n    ctx.fillStyle = this.color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(-16, 0);\r\n    ctx.$triLineTo(38, 174);\r\n    ctx.$triLineTo(16.8, 200);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // \r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.beginPath();\r\n    ctx.moveTo(-16.4, 0);\r\n    ctx.$triLineTo(38, 174);\r\n    ctx.$triLineTo(15.6, 168);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // \r\n    this.moveX += this.moveXV;\r\n    //  shooter\r\n    enemyMethods.attackShooter(this, idx, arr, 37.8);\r\n    // \r\n    this.beyondBoundary(idx, arr);\r\n  }\r\n  // \r\n  beyondBoundary(idx, arr) {\r\n    // Math.sqrt(856 * 856 + 624 * 624) = 1059.3\r\n    if (this.moveX <= -1060) {\r\n      arr.splice(idx, 1);\r\n    }\r\n  }\r\n}","ctx.$triLineTo = function (r, angle, angleAdd = 0) {\r\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\r\n}\r\n\r\n// \r\nfunction drawWaveBullet(bullet, originPos, lineWidth, shadowColor) {\r\n  ctx.strokeStyle = bullet.color;\r\n  ctx.lineWidth = lineWidth;\r\n  ctx.shadowColor = shadowColor;\r\n  ctx.shadowBlur = 2;\r\n  // \r\n  ctx.beginPath();\r\n  for (let i = 0; i < bullet.waveLength; i += 1) {\r\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\r\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), i);\r\n  }\r\n  ctx.stroke();\r\n  // \r\n  ctx.beginPath();\r\n  for (let i = 0; i < bullet.waveLength; i += 1) {\r\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\r\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), -i);\r\n  }\r\n  ctx.stroke();\r\n}\r\n\r\n// \r\nfunction drawBattery(p) {\r\n  ctx.save();\r\n    ctx.translate(p.x, p.y);\r\n    ctx.fillStyle = globalColor.orange;\r\n    // \r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(-24, 0);\r\n    ctx.lineTo(-24, 42);\r\n    ctx.lineTo(0, 42);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // \r\n    ctx.save();\r\n      ctx.translate(0, 44);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(-24, 0);\r\n      ctx.lineTo(-24, 3);\r\n      ctx.lineTo(0, 3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.save();\r\n      ctx.translate(-6.75, 0);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -3);\r\n      ctx.lineTo(-10.5, -3);\r\n      ctx.lineTo(-10.5, -0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // \r\n    drawLightning({ x: -11, y: 9 });\r\n  ctx.restore();\r\n}\r\n\r\n\r\n\r\n// \r\nfunction drawLightning(translate = { x: 0, y: 0 }, scale = 1) {\r\n  ctx.fillStyle = globalColor.white;\r\n  ctx.translate(translate.x, translate.y);\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.rotate(18 * degToPi);\r\n  ctx.lineTo(0, 10 * scale);\r\n  ctx.translate(0, 10 * scale);\r\n  ctx.rotate(-18 * degToPi);\r\n\r\n  ctx.lineTo(10 * scale, 0);\r\n  ctx.translate(10 * scale, 0);\r\n\r\n  ctx.rotate(28 * degToPi);\r\n  ctx.lineTo(0, 16 * scale);\r\n  ctx.translate(0, 16 * scale);\r\n  ctx.rotate(-28 * degToPi);\r\n\r\n  ctx.rotate(3.6 * degToPi);\r\n  ctx.lineTo(0, -10 * scale);\r\n  ctx.translate(0, -10 * scale);\r\n  ctx.rotate(-3.6 * degToPi);\r\n\r\n  ctx.lineTo(-8 * scale, 0);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n}\r\n\r\n\r\n\r\nfunction originPos(axisRotateR, axisRotateAngle) {\r\n  return {\r\n    x: (gameW / 2) + axisRotateR * Math.cos(axisRotateAngle * degToPi),\r\n    y: (gameH / 2) + axisRotateR * Math.sin(axisRotateAngle * degToPi),\r\n  };\r\n}\r\n\r\n\r\n\r\n//  x  y logxy\r\nfunction baseLog(x, y) {\r\n  return Math.log(y) / Math.log(x);\r\n}\r\n\r\n\r\n\r\n// \r\nfunction cosineFormula(a, b, angle) {\r\n  return Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(angle * degToPi));\r\n}\r\n\r\nfunction getAngleB(a, b, c) {\r\n  return Math.acos((a * a + c * c - b * b) / (2 * a * c));\r\n}\r\n\r\n\r\n\r\n// \r\nfunction getRandom(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\n\r\n\r\nfunction playSound(instrument, note, duration = '8n', timeout = 0, volume = 0) {\r\n  if (game.isMuted) return;\r\n  let synth;\r\n  switch (instrument) {\r\n    case 'membrane':\r\n      setTimeout(() => {\r\n        synth = new Tone.MembraneSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    case 'duo':\r\n      setTimeout(() => {\r\n        synth = new Tone.DuoSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    case 'mono':\r\n      setTimeout(() => {\r\n        synth = new Tone.MonoSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    default:\r\n      setTimeout(() => {\r\n        synth = new Tone.Synth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n  }\r\n}\r\n\r\n\r\n/* 2D Vector Class */\r\n// class Vec2 {\r\n//   constructor(x, y) {\r\n//     this.x = x;\r\n//     this.y = y;\r\n//   }\r\n//   set(x, y) {\r\n//     this.x = x;\r\n//     this.y = y;\r\n//   }\r\n//   move(x, y) {\r\n//     this.x += x;\r\n//     this.y += y;\r\n//   }\r\n//   add(v) {\r\n//     return new Vec2(this.x + v.x, this.y + v.y);\r\n//   }\r\n//   sub(v) {\r\n//     return new Vec2(this.x - v.x, this.y - v.y);\r\n//   }\r\n//   mul(s) {\r\n//     return new Vec2(this.x * s, this.y * s);\r\n//   }\r\n//   clone() {\r\n//     return new Vec2(this.x, this.y);\r\n//   }\r\n//   equal(v) {\r\n//     return this.x === v.x && this.y === v.y;\r\n//   }\r\n//   get length() {\r\n//     return Math.sqrt(this.x * this.x + this.y * this.y);\r\n//   }\r\n//   set length(newVal) {\r\n//     const newLength = this.unit.mul(newVal);\r\n//     this.set(newLength.x, newLength.y);\r\n//   }\r\n//   get angle() {\r\n//     return Math.atan2(this.y, this.x);\r\n//   }\r\n//   get unit() {\r\n//     return this.mul(1 / this.length);\r\n//   }\r\n// }"]}