{"version":3,"sources":["boss.js","circle.js","enemy.js","index.js","polygon.js","prop.js","shooter.js","triangle.js","utility.js"],"names":["Boss","args","def","axisRotateR","axisRotateAngle","rotate","scale","axisRotateAngleV","rotateV","bullets","HP","beforeGenerateEnemyTime","Date","beginAppear","isAppearing","isDisappeared","appearTimes","appearTimer","disappearTimer","Object","assign","ctx","save","translate","originPos","x","y","degToPi","fillStyle","beginPath","moveTo","lineTo","closePath","fill","globalColor","orange","white","red","blue","strokeStyle","lineWidth","arc","Math","PI","stroke","restore","forEach","bullet","draw","appear","idx","arr","update","game","isEnd","gameCrawler","textContent","TweenLite","to","ease","Expo","easeOut","rotateNum","getRandom","onComplete","setTimeout","isPause","shoot","generateEnemy","disappear","playSound","push","BossBullet","p","rotateAngle","waveLength","num","chooseEnemy","circles","Circle","isBossGenerate","triangles","Triangle","polygons","Polygon","whole","big","small","random","color","moveX","moveXV","waveFreq","waveAmp","waveFlow","isBoss","drawWaveBullet","enemyMethods","attackShooter","r","axisRotateRV","beforeRotateTime","isRotating","circleBigR","circleSmallR","subAxisRotateR","cos","sin","$triLineTo","isStart","approach","rotateTime","Power2","hitShooter","i","timer","CirBullet","clearTimeout","Back","config","from","enemy","isPolygon","shooter","shooterBody","cirSolidLineW","distance","seconds","updateFPS","dieEffect","enemyR","effectX","effectY","colorRGB","dieTime","effect","shadowColor","shadowBlur","effectR","baseLog","requestAnimationFrame","enemies","enemyIdx","type","enemyAxisRotateR","enemyAxisRotateAngle","shieldAngleRange","state","abs","mouseMoveAngle","judgeWhatEnemyHit","splice","polygonR","attackShooterResult","shieldR","shieldLineW","isProtect","bulletIdx","bulletLen","shooterShield","bulletRotate","angleGap","currentLevel","boss","shooterHPBarOriginW","shooterHPBarW","shooterHPBar","offsetWidth","isAttacked","style","width","hearts","shooterHeart","document","querySelectorAll","parentNode","removeChild","endGame","crawlerClearedTimer","playerName","bossDieResult","bgm","pause","currentTime","victoryBgm","play","volume","updateTime","yellow","blueDark","props","startBtn","getElementById","restartBtn","starsBtn","backBtn","restartBtnStars","cover","gamePanel","batteryInfo","heartWrapper","prop","propImg","propLastTime","batteryNum","result","panel","container","keyboard","gameTime","gameLevel","resultBoss","resultBattery","resultBullet","rankingNum","resultRanking","resultScore","resultStars","starWrapper1","starWrapper2","starWrapper3","shareFb","shareTwitter","canvas","getContext","ww","wh","gameW","gameH","gameHalfDiagonalL","initCanvas","height","round","sqrt","documentElement","clientWidth","clientHeight","coverCircle","coverTriangle","coverPolygon","Game","subTris","blockV","countdownSeconds","hpRecoverTimer","countdownTimer","countupTimer","propGeneratedTimer","propGeneratedInterval","beatBossSeconds","isMuted","isDisplayStars","addEventListener","handleMouseMove","handleClick","window","handleKeyup","handlePlayerName","checkPlayerName","startGame","drawCover","render","setBlockV","recoverShooterHPBar","classList","add","remove","handleGameStars","open","url","name","encodeURIComponent","fillRect","drawBlock","circle","triangle","polygon","subTriangle","drawMouse","Shooter","rotateR","mouseMovePosX","mouseMovePos","mouseMovePosY","length","display","value","innerHTML","heart","createElement","appendChild","cursor","pointerEvents","countdownStartTime","setLevel","generateProp","clearCrawler","loadingIcon","bulletNum","handleGameResult","countdownTime","countupTime","level","battery","axios","get","params","then","res","data","rank","totalPlayers","firstStarData","firstData","secondStarData","secondData","thirdStarData","thirdData","starScoreHTML","fillStarScore","wave","bat","propName","Prop","src","nowHPW","recoverHPBarW","form","angle","initLevel","setEnemy","handleLoad","init","evt","atan2","beforeShootTime","key","pauseGame","muted","isJustSplite","drawLightning","rotateDirection","Circ","rNum","img","Image","complete","drawImage","replace","split","getProp","outerR","x1","y1","x2","y2","shootTime","ShooterBullet","lastTime","recoverHeart","drawCrackdownEffect","displayPropInfo","crackdownTime","polygonWholeR","polygonBigR","polygonSmallR","countLastTime","propInfoTimer","bodyLen","v","anglePanFn","shotRRangeFn","bulletMoveLen","cirIdx","asin","attackEnemy","triIdx","lengthX","lengthY","polyIdx","sideA","attackPolygon","NaN","beyondBoundary","enemyAnglePan","enemyAngleMinus","enemyAngleAdd","shotAngleRange","judgeShotAngleRange","shotRRange","sideB1Len","sideB2Len","angleAB1","angleAB2","rotateAngleJudge","polyAxisRotateAngle","polyRotate","sideB1","sideB2","sideC1","cosineFormula","sideC2","bottomJudge","topJudge","angleB1","angleB2","getAngleB","polyAngleMinus","polyAngleAdd","shooterRotateAngle","shooterAnglePan","shooterAngleMinus","shooterAngleAdd","beforeRotateAxisAngleTime","isGeneratedSub","shootTimer","triOuterBigR","triInnerBigR","triInnerSmallR","rotateAxisAngleTime","randomRotateAngle","Power0","easeNone","easeInOut","TriSub","order","TriBullet","isReproduceMoving","Power1","easeIn","angleAdd","degree","drawBattery","log","a","b","c","acos","min","max","floor","instrument","note","duration","timeout","synth","Tone","MembraneSynth","toMaster","triggerAttackRelease","DuoSynth","MonoSynth","Synth","Vec2","s","newVal","newLength","unit","mul","set"],"mappings":";;;;;;;;IAAMA,I;;;AACJ,gBAAYC,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,WAAW,EAAE,CADH;AAEVC,MAAAA,eAAe,EAAE,CAFP;AAGVC,MAAAA,MAAM,EAAE,CAHE;AAIVC,MAAAA,KAAK,EAAE,CAJG;AAKV;AACAC,MAAAA,gBAAgB,EAAE,CANR;AAOVC,MAAAA,OAAO,EAAE,CAPC;AAQVC,MAAAA,OAAO,EAAE,EARC;AASVC,MAAAA,EAAE,EAAE,CATM;AAUVC,MAAAA,uBAAuB,EAAE,IAAIC,IAAJ,EAVf;AAWVC,MAAAA,WAAW,EAAE,IAXH;AAYVC,MAAAA,WAAW,EAAE,KAZH;AAaVC,MAAAA,aAAa,EAAE,KAbL;AAcVC,MAAAA,WAAW,EAAE,CAdH;AAeVC,MAAAA,WAAW,EAAE,IAfH;AAgBVC,MAAAA,cAAc,EAAE;AAhBN,KAAZ;AAkBAC,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACLmB,MAAAA,GAAG,CAACC,IAAJ;AACED,MAAAA,GAAG,CAACE,SAAJ,CAAcC,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CAAhE,EAAmED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB,CAArH;AACAL,MAAAA,GAAG,CAACf,KAAJ,CAAU,KAAKA,KAAf,EAAsB,KAAKA,KAA3B;AACAe,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,GAAcsB,OAAzB,EAJG,CAKH;;AACAN,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAhBG,CAiBH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACC,MAA5B;AACAd,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GA5BG,CA6BH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,IAAI,CAAlB;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,IAAI,CAAlB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,KAAK,CAApB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,KAAK,CAArB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,CAAZ,EAAe,IAAI,CAAnB;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAxCG,CAyCH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,EAAX,EAAe,CAAC,CAAhB;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAhB,EAAmB,CAAC,CAApB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,EAAvB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAA5B;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,EAAX,EAAe,KAAK,CAApB;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAlDG,CAmDH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAC,CAAjB;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAjB,EAAoB,CAAC,CAArB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAArB,EAAwB,EAAxB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAArB,EAAwB,KAAK,CAA7B;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,KAAK,CAArB;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GA5DG,CA6DH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACG,GAA5B;AACAhB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,CAAvB;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAAT,GAAa,CAAxB,EAA2B,CAA3B;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAAT,GAAa,CAAb,GAAiB,EAA5B,EAAgC,KAAK,CAArC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAAT,GAAa,CAAb,GAAiB,EAA5B,EAAgC,KAAK,CAAL,GAAS,CAAzC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAAL,GAAS,CAAhC;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAtEG,CAuEH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACI,IAA5B;AACAjB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAzB,EAA4B,CAA5B;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,CAA7B,EAAgC,CAAhC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,EAAlB,GAAuB,CAAlC,EAAqC,KAAK,CAA1C;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,EAAlB,GAAuB,CAAlC,EAAqC,KAAK,CAAL,GAAS,CAA9C;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAzB,EAA4B,KAAK,CAAL,GAAS,CAArC;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAhFG,CAiFH;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAAL,GAAS,CAAhC;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAApB,EAAuB,KAAK,CAAL,GAAS,CAAT,GAAa,CAApC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAAT,GAAa,EAAxB,EAA4B,KAAK,CAAL,GAAS,CAAT,GAAa,CAAzC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAK,CAAL,GAAS,CAAT,GAAa,EAAxB,EAA4B,KAAK,CAAL,GAAS,CAArC;AACAV,MAAAA,GAAG,CAACY,IAAJ,GAxFG,CAyFH;;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAzB,EAA4B,KAAK,CAAL,GAAS,CAArC;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAzB,EAA4B,KAAK,CAAL,GAAS,CAAT,GAAa,CAAzC;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,EAAd,GAAmB,CAA9B,EAAiC,KAAK,CAAL,GAAS,CAAT,GAAa,CAA9C;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,EAAd,GAAmB,CAA9B,EAAiC,KAAK,CAAL,GAAS,CAA1C;AACAV,MAAAA,GAAG,CAACY,IAAJ,GA/FG,CAgGH;;AACAZ,MAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACE,KAA9B;AACAf,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,GAAhB;AACAnB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,KAAK,CAAL,GAAS,CAAT,GAAa,EAArB,EAAyB,KAAK,CAAL,GAAS,CAAlC,EAAqC,GAArC,EAA0C,CAA1C,EAA6CC,IAAI,CAACC,EAAL,GAAU,CAAvD;AACAtB,MAAAA,GAAG,CAACuB,MAAJ,GArGG,CAsGH;;AACAvB,MAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACC,MAA9B,CAvGG,CAwGH;;AACAd,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,GAA7B,EAAkC,IAAI,EAAtC;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,GAAlB,GAAwB,GAAnC,EAAwC,IAAI,EAAJ,GAAS,GAAjD;AACAV,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,GAAlB,GAAwB,GAAnC,EAAwC,IAAI,EAA5C;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,GAA7B,EAAkC,IAAI,EAAJ,GAAS,GAA3C;AACAV,MAAAA,GAAG,CAACuB,MAAJ,GA9GG,CA+GH;;AACAvB,MAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,EAAlB,GAAuB,CAAvB,GAA2B,CAAtC,EAAyC,KAAK,CAAL,GAAS,IAAlD;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,EAAlB,GAAuB,CAAlC,EAAqC,KAAK,CAA1C;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,EAAlB,GAAuB,CAAlC,EAAqC,KAAK,CAAL,GAAS,CAA9C;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAD,GAAM,CAAN,GAAU,CAAV,GAAc,CAAd,GAAkB,CAA7B,EAAgC,KAAK,CAAL,GAAS,CAAzC;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ;AACFZ,MAAAA,GAAG,CAACwB,OAAJ,GAxHK,CAyHL;;AACA,WAAKpC,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACC,IAAP;AACD,OAFD;AAGD;;;6BACQ;AACP;AACA,WAAKnC,WAAL,IAAoB,KAAKoC,MAAL,EAApB;AACA,WAAKpC,WAAL,GAAmB,KAAnB;;AACA,UAAI,CAAC,KAAKC,WAAN,IAAqB,CAAC,KAAKC,aAA/B,EAA8C,CAC7C,CALM,CAMP;;;AACA,WAAKN,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAASG,GAAT,EAAcC,GAAd,EAAsB;AACzCJ,QAAAA,MAAM,CAACK,MAAP,CAAcF,GAAd,EAAmBC,GAAnB;AACD,OAFD;AAGD;;;6BACQ;AAAA;;AACP,UAAIE,IAAI,CAACC,KAAT,EAAgB;AAChB,WAAKtC,WAAL,IAAoB,CAApB;AACA,WAAKD,aAAL,GAAqB,KAArB;AACA,WAAKD,WAAL,GAAmB,IAAnB;AACAyC,MAAAA,WAAW,CAACC,WAAZ,GAA0B,kBAA1B;AACAC,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBpD,QAAAA,KAAK,EAAE,CADe;AAEtBqD,QAAAA,IAAI,EAAEC,IAAI,CAACC;AAFW,OAAxB;AAIA,UAAMC,SAAS,GAAGC,SAAS,CAAC,EAAD,EAAK,GAAL,CAA3B;AACAN,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBtD,QAAAA,eAAe,cAAO0D,SAAP,CADO;AAEtBzD,QAAAA,MAAM,cAAOyD,SAAP,CAFgB;AAGtBH,QAAAA,IAAI,EAAEC,IAAI,CAACC,OAHW;AAItBG,QAAAA,UAAU,EAAE,sBAAM;AAChB,UAAA,KAAI,CAAClD,WAAL,GAAmB,KAAnB;AACD;AANqB,OAAxB;;AAQA,UAAI,KAAKE,WAAL,IAAoB,KAAKA,WAAL,GAAmB,CAA3C,EAA8C;AAC5CiD,QAAAA,UAAU,CAAC,YAAM;AACf,cAAI,KAAI,CAACvD,EAAL,KAAY,CAAZ,IAAiB2C,IAAI,CAACa,OAA1B,EAAmC;;AACnC,UAAA,KAAI,CAACC,KAAL;AACD,SAHS,EAGP,IAHO,CAAV;AAID,OALD,MAKO;AACLF,QAAAA,UAAU,CAAC,YAAM;AACf,cAAI,KAAI,CAACvD,EAAL,KAAY,CAAZ,IAAiB2C,IAAI,CAACa,OAA1B,EAAmC;;AACnC,UAAA,KAAI,CAACE,aAAL;AACD,SAHS,EAGP,IAHO,CAAV;AAID;;AACD,WAAKlD,cAAL,GAAsB+C,UAAU,CAAC,YAAM;AACrC,YAAI,KAAI,CAACvD,EAAL,KAAY,CAAZ,IAAiB2C,IAAI,CAACa,OAA1B,EAAmC;;AACnC,QAAA,KAAI,CAACG,SAAL;AACD,OAH+B,EAG7B,IAH6B,CAAhC;AAIAC,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,EAAmB,IAAnB,CAAT;AACD;;;gCACW;AAAA;;AACV,UAAIjB,IAAI,CAACC,KAAT,EAAgB;AAChB,WAAKvC,aAAL,GAAqB,IAArB;AACA0C,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBpD,QAAAA,KAAK,EAAE,CADe;AAEtBqD,QAAAA,IAAI,EAAEC,IAAI,CAACC;AAFW,OAAxB;AAIA,UAAMC,SAAS,GAAGC,SAAS,CAAC,EAAD,EAAK,GAAL,CAA3B;AACAN,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBtD,QAAAA,eAAe,cAAO0D,SAAP,CADO;AAEtBzD,QAAAA,MAAM,cAAOyD,SAAP,CAFgB;AAGtBH,QAAAA,IAAI,EAAEC,IAAI,CAACC;AAHW,OAAxB;AAKA,WAAK5C,WAAL,GAAmBgD,UAAU,CAAC,YAAM;AAClC,YAAI,MAAI,CAACvD,EAAL,KAAY,CAAZ,IAAiB2C,IAAI,CAACa,OAA1B,EAAmC;;AACnC,QAAA,MAAI,CAACjB,MAAL;AACD,OAH4B,EAG1B,IAH0B,CAA7B;AAIAqB,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,EAAmB,IAAnB,CAAT;AACD;;;4BACO;AAAA;;AACN,WAAK7D,OAAL,CAAa8D,IAAb,CAAkB,IAAIC,UAAJ,CAAe;AAC/BC,QAAAA,CAAC,EAAE;AACDhD,UAAAA,CAAC,EAAED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CADpD;AAEDC,UAAAA,CAAC,EAAEF,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB;AAFpD,SAD4B;AAK/BgD,QAAAA,WAAW,EAAE,KAAKrE,MALa;AAM/BF,QAAAA,WAAW,EAAE,KAAKA;AANa,OAAf,CAAlB;AAQAmE,MAAAA,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAT;AACAL,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACxD,OAAL,CAAa8D,IAAb,CAAkB,IAAIC,UAAJ,CAAe;AAC/BC,UAAAA,CAAC,EAAE;AACDhD,YAAAA,CAAC,EAAED,SAAS,CAAC,MAAI,CAACrB,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAT,CAAkDqB,CADpD;AAEDC,YAAAA,CAAC,EAAEF,SAAS,CAAC,MAAI,CAACrB,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAT,CAAkDsB;AAFpD,WAD4B;AAK/BgD,UAAAA,WAAW,EAAE,MAAI,CAACrE,MALa;AAM/BsE,UAAAA,UAAU,EAAE,EANmB;AAO/BxE,UAAAA,WAAW,EAAE,MAAI,CAACA;AAPa,SAAf,CAAlB;;AASAmE,QAAAA,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAT;AACD,OAXS,EAWP,GAXO,CAAV;AAYD;;;oCACe;AAAA;;AACd,UAAIM,GAAJ;;AACA,UAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxBD,QAAAA,GAAG,GAAGb,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAf;;AACA,gBAAQa,GAAR;AACE,eAAK,CAAL;AACEvB,YAAAA,IAAI,CAACyB,OAAL,CAAaP,IAAb,CAAkB,IAAIQ,MAAJ,CAAW;AAC3B5E,cAAAA,WAAW,EAAE,MAAI,CAACA,WADS;AAE3BC,cAAAA,eAAe,EAAE,MAAI,CAACA,eAAL,GAAuB,GAFb;AAG3BG,cAAAA,gBAAgB,EAAE,EAAEwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAApB,CAHS;AAI3B1D,cAAAA,MAAM,EAAE0D,SAAS,CAAC,CAAD,EAAI,GAAJ,CAJU;AAK3BiB,cAAAA,cAAc,EAAE;AALW,aAAX,CAAlB;AAOA;;AACF,eAAK,CAAL;AACE3B,YAAAA,IAAI,CAAC4B,SAAL,CAAeV,IAAf,CAAoB,IAAIW,QAAJ,CAAa;AAC/B/E,cAAAA,WAAW,EAAE,MAAI,CAACA,WADa;AAE/BC,cAAAA,eAAe,EAAE,MAAI,CAACA,eAAL,GAAuB,GAFT;AAG/BG,cAAAA,gBAAgB,EAAEwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAHL;AAI/B1D,cAAAA,MAAM,EAAE,MAAI,CAACD,eAAL,GAAuB,GAJA;AAK/B4E,cAAAA,cAAc,EAAE;AALe,aAAb,CAApB;AAOA;;AACF,eAAK,CAAL;AACE,gBAAM3E,MAAM,GAAG0D,SAAS,CAAC,CAAD,EAAI,GAAJ,CAAxB;AACAV,YAAAA,IAAI,CAAC8B,QAAL,CAAcZ,IAAd,CAAmB,IAAIa,OAAJ,CAAY;AAC7BjF,cAAAA,WAAW,EAAE;AACXkF,gBAAAA,KAAK,EAAE,MAAI,CAAClF,WADD;AAEXmF,gBAAAA,GAAG,EAAE,MAAI,CAACnF,WAFC;AAGXoF,gBAAAA,KAAK,EAAE,MAAI,CAACpF;AAHD,eADgB;AAM7BC,cAAAA,eAAe,EAAE;AACfiF,gBAAAA,KAAK,EAAE,MAAI,CAACjF,eAAL,GAAuB,GADf;AAEfkF,gBAAAA,GAAG,EAAE,MAAI,CAAClF,eAAL,GAAuB,GAFb;AAGfmF,gBAAAA,KAAK,EAAE,MAAI,CAACnF,eAAL,GAAuB;AAHf,eANY;AAW7BC,cAAAA,MAAM,EAAE;AACNgF,gBAAAA,KAAK,EAAEhF,MADD;AAENiF,gBAAAA,GAAG,EAAEjF,MAFC;AAGNkF,gBAAAA,KAAK,EAAElF;AAHD,eAXqB;AAgB7BG,cAAAA,OAAO,EAAEuD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAhBE;AAiB7BiB,cAAAA,cAAc,EAAE;AAjBa,aAAZ,CAAnB;AAmBA;;AACF;AACE;AA1CJ;AA4CD,OA9CD;;AA+CAH,MAAAA,WAAW;;AACX,UAAInC,IAAI,CAAC8C,MAAL,MAAiB,GAArB,EAA0B;AACxBvB,QAAAA,UAAU,CAAC,YAAM;AACfY,UAAAA,WAAW;AACZ,SAFS,EAEP,GAFO,CAAV;AAGD;AACF;;;;;;IAGGL,U;;;AACJ,sBAAYvE,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVuE,MAAAA,CAAC,EAAE;AACDhD,QAAAA,CAAC,EAAE,CADF;AAEDC,QAAAA,CAAC,EAAE;AAFF,OADO;AAKVvB,MAAAA,WAAW,EAAE,CALH;AAMVsF,MAAAA,KAAK,EAAEvD,WAAW,CAACC,MANT;AAOVuD,MAAAA,KAAK,EAAE,CAPG;AAQVC,MAAAA,MAAM,EAAE,CARE;AASVjB,MAAAA,WAAW,EAAE,CATH;AAUVC,MAAAA,UAAU,EAAE,EAVF;AAWViB,MAAAA,QAAQ,EAAE,GAXA;AAYVC,MAAAA,OAAO,EAAE,CAZC;AAaVC,MAAAA,QAAQ,EAAE,CAbA;AAcVC,MAAAA,MAAM,EAAE;AAdE,KAAZ;AAgBA5E,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACLmB,MAAAA,GAAG,CAACC,IAAJ;AACED,MAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKkD,CAAL,CAAOhD,CAArB,EAAwB,KAAKgD,CAAL,CAAO/C,CAA/B;AACAL,MAAAA,GAAG,CAAChB,MAAJ,CAAW,CAAC,KAAKqE,WAAL,GAAmB,EAApB,IAA0B/C,OAArC,EAHG,CAIH;;AACAqE,MAAAA,cAAc,CAAC,IAAD,EAAO,OAAP,EAAgB,GAAhB,EAAqB,0BAArB,CAAd;AACF3E,MAAAA,GAAG,CAACwB,OAAJ;AACD;;;2BACMK,G,EAAKC,G,EAAK;AACf;AACA,WAAKuC,KAAL,IAAc,KAAKC,MAAnB;AACAM,MAAAA,YAAY,CAACC,aAAb,CAA2B,IAA3B,EAAiChD,GAAjC,EAAsCC,GAAtC;AACD;;;;;;;;;;;;;ICzUG4B,M;;;AACJ,kBAAY9E,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,WAAW,EAAE,CADH;AAEVC,MAAAA,eAAe,EAAE,CAFP;AAGV+F,MAAAA,CAAC,EAAE,EAHO;AAIV9F,MAAAA,MAAM,EAAE,CAJE;AAKVC,MAAAA,KAAK,EAAE,CALG;AAMV8F,MAAAA,YAAY,EAAE,CANJ;AAOV7F,MAAAA,gBAAgB,EAAE,CAPR;AAQV;AACAkF,MAAAA,KAAK,EAAEvD,WAAW,CAACC,MATT;AAUVzB,MAAAA,EAAE,EAAE,CAVM;AAWVD,MAAAA,OAAO,EAAE,EAXC;AAYV4F,MAAAA,gBAAgB,EAAE,IAAIzF,IAAJ,EAZR;AAaV0F,MAAAA,UAAU,EAAE,KAbF;AAcVzF,MAAAA,WAAW,EAAE,IAdH;AAeVmE,MAAAA,cAAc,EAAE;AAfN,KAAZ;AAiBA7D,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BAGM;AACL,UAAMqG,UAAU,GAAG,KAAKJ,CAAL,GAAS,CAA5B;AACA,UAAMK,YAAY,GAAG,KAAKL,CAAL,GAAS,EAA9B;AACA,UAAMM,cAAc,GAAG,EAAvB;AACApF,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAcC,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CAAhE,EAAmED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB,CAArH;AACAL,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,GAAcsB,OAAzB;AACAN,MAAAA,GAAG,CAACf,KAAJ,CAAU,KAAKA,KAAf,EAAsB,KAAKA,KAA3B,EAPK,CAQL;;AACAe,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc8D,UAAd,EAA0B,CAA1B,EAA6B7D,IAAI,CAACC,EAAL,GAAU,CAAvC;AACAtB,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACY,IAAJ,GAZK,CAaL;;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAC,EAAT,EAAa,CAAb,EAAgB+D,YAAhB,EAA8B,CAA9B,EAAiC9D,IAAI,CAACC,EAAL,GAAU,CAA3C;AACAtB,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACY,IAAJ,GAjBK,CAkBL;;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK0D,CAAnB,EAAsB,CAAtB,EAAyBzD,IAAI,CAACC,EAAL,GAAU,CAAnC;AACAtB,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACY,IAAJ,GAtBK,CAuBL;;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B,CAzBK,CA0BL;;AACAf,MAAAA,GAAG,CAACoB,GAAJ,CAAQgE,cAAc,GAAG/D,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAAzB,EAAiD8E,cAAc,GAAG/D,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAAlE,EAA0F,GAA1F,EAA+F,CAA/F,EAAkGe,IAAI,CAACC,EAAL,GAAU,CAA5G;AACAtB,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQgE,cAAc,GAAG/D,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAAzB,EAAkD8E,cAAc,GAAG/D,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAnE,EAA4F,GAA5F,EAAiG,CAAjG,EAAoGe,IAAI,CAACC,EAAL,GAAU,CAA9G;AACAtB,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQgE,cAAc,GAAG/D,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAAzB,EAAkD8E,cAAc,GAAG/D,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAnE,EAA4F,GAA5F,EAAiG,CAAjG,EAAoGe,IAAI,CAACC,EAAL,GAAU,CAA9G;AACAtB,MAAAA,GAAG,CAACY,IAAJ,GAlCK,CAmCL;;AACAZ,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,CAAZ,EAAe,CAAf;AACAV,MAAAA,GAAG,CAACuF,UAAJ,CAAe,CAAC,CAAhB,EAAmB,EAAnB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,CAAC,EAAhB,EAAoB,GAApB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,CAAC,GAAhB,EAAqB,GAArB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,CAAC,CAAhB,EAAmB,GAAnB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,CAAC,GAAhB,EAAqB,GAArB;AACAvF,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ,GA9CK,CA+CL;;AACA,WAAKpC,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACC,IAAP;AACD,OAFD;AAGD;;;2BAGME,G,EAAK;AAAA;;AACV,WAAKrC,WAAL,IAAoB,KAAKoC,MAAL,CAAY,KAAK+B,cAAjB,CAApB;AACA,WAAKnE,WAAL,GAAmB,KAAnB;AACAwC,MAAAA,IAAI,CAACwD,OAAL,IAAgBZ,YAAY,CAACa,QAAb,CAAsB,IAAtB,CAAhB,CAHU,CAIV;;AACA,WAAKrG,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAASG,GAAT,EAAcC,GAAd,EAAsB;AACzCJ,QAAAA,MAAM,CAACK,MAAP,CAAcF,GAAd,EAAmBC,GAAnB;AACD,OAFD,EALU,CAQV;;AACA,UAAI,CAAC,KAAKmD,UAAV,EAAsB;AACpB,aAAKlG,eAAL,IAAwB,KAAKG,gBAA7B;AACD,OAXS,CAYV;;;AACA,UAAMwG,UAAU,GAAG,IAAInG,IAAJ,EAAnB;;AACA,UAAKmG,UAAU,GAAG,KAAKV,gBAAnB,GAAuCtC,SAAS,CAAC,IAAD,EAAO,IAAP,CAApD,EAAkE;AAChE,aAAKuC,UAAL,GAAkB,IAAlB;AACA7C,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtB;AACA;AACArD,UAAAA,MAAM,EAAE,KAAKD,eAHS;AAItBuD,UAAAA,IAAI,EAAEqD,MAAM,CAACnD,OAJS;AAKtB;AACAG,UAAAA,UAAU,EAAE,sBAAM;AAChB,YAAA,KAAI,CAACsC,UAAL,GAAkB,KAAlB;AACA,gBAAI,CAACjD,IAAI,CAACwD,OAAV,EAAmB;;AACnB,YAAA,KAAI,CAAC1C,KAAL;AACD;AAVqB,SAAxB;AAYA,aAAKkC,gBAAL,GAAwBU,UAAxB;AACD,OA7BS,CA8BV;;;AACAd,MAAAA,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAACyB,OAA7B,EAAsC5B,GAAtC,EAA2C,QAA3C,EAAqD,KAAK/C,WAA1D,EAAuE,KAAKC,eAA5E;AACD;;;4BAGO;AAAA;;AAAA,iCAEG8G,CAFH;AAGJ,YAAMC,KAAK,GAAGlD,UAAU,CAAC,YAAM;AAC7B,UAAA,MAAI,CAACxD,OAAL,CAAa8D,IAAb,CAAkB,IAAI6C,SAAJ,CAAc;AAC9B3C,YAAAA,CAAC,EAAE;AACDhD,cAAAA,CAAC,EAAED,SAAS,CAAC,MAAI,CAACrB,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAT,CAAkDqB,CADpD;AAEDC,cAAAA,CAAC,EAAEF,SAAS,CAAC,MAAI,CAACrB,WAAN,EAAmB,MAAI,CAACC,eAAxB,CAAT,CAAkDsB;AAFpD,aAD2B;AAK9BgD,YAAAA,WAAW,EAAE,MAAI,CAACrE,MALY;AAM9BqF,YAAAA,KAAK,EAAE,CAAC,MAAI,CAACS,CAAN,GAAU,EANa;AAO9B;AACAhG,YAAAA,WAAW,EAAE,MAAI,CAACA;AARY,WAAd,CAAlB;;AAUAkH,UAAAA,YAAY,CAACF,KAAD,CAAZ,CAX6B,CAY7B;AACD,SAbuB,EAarBD,CAAC,GAAGnD,SAAS,CAAC,GAAD,EAAM,GAAN,CAbQ,CAAxB;AAHI;;AACN;AACA,WAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAA7B,EAAqCmD,CAAC,IAAI,CAA1C,EAA6C;AAAA,cAApCA,CAAoC;AAe5C;;AACD3D,MAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,gBAAvB,GAA0C,UAApE;AACAlB,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD;;;2BAGMU,c,EAAgB;AACrBzB,MAAAA,WAAW,CAACC,WAAZ,GAA0B,mBAA1B,CADqB,CAErB;;AACAC,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBpD,QAAAA,KAAK,EAAE,CADe;AAEtBqD,QAAAA,IAAI,EAAE2D,IAAI,CAACzD,OAAL,CAAa0D,MAAb,CAAoB,GAApB;AAFgB,OAAxB;AAIA9D,MAAAA,SAAS,CAAC+D,IAAV,CAAe,IAAf,EAAqB,GAArB,EAA0B;AACxBnH,QAAAA,MAAM,EAAE,CADgB;AAExBsD,QAAAA,IAAI,EAAE2D,IAAI,CAACzD,OAAL,CAAa0D,MAAb,CAAoB,GAApB;AAFkB,OAA1B;;AAIA,UAAIvC,cAAJ,EAAoB;AAClBvB,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBvD,UAAAA,WAAW,cAAO4D,SAAS,CAAC,EAAD,EAAK,GAAL,CAAhB,CADW;AAEtBJ,UAAAA,IAAI,EAAEqD,MAAM,CAACnD;AAFS,SAAxB;AAID;;AACDR,MAAAA,IAAI,CAACwD,OAAL,IAAgBvC,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,CAAzB,CAjBqB,CAkBrB;AACD;;;;;;IAKG8C,S;;;AACJ,qBAAYnH,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVuE,MAAAA,CAAC,EAAE;AACDhD,QAAAA,CAAC,EAAE,CADF;AAEDC,QAAAA,CAAC,EAAE;AAFF,OADO;AAKVvB,MAAAA,WAAW,EAAE,CALH;AAMVsF,MAAAA,KAAK,EAAEvD,WAAW,CAACC,MANT;AAOVuD,MAAAA,KAAK,EAAE,CAPG;AAQVC,MAAAA,MAAM,EAAE,CAAC,CARC;AASV;AACAjB,MAAAA,WAAW,EAAE;AAVH,KAAZ;AAYAvD,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACLmB,MAAAA,GAAG,CAACC,IAAJ;AACED,MAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKkD,CAAL,CAAOhD,CAArB,EAAwB,KAAKgD,CAAL,CAAO/C,CAA/B;AACAL,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKqE,WAAL,GAAmB/C,OAA9B;AACAN,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,KAAKiD,KAAb,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6BhD,IAAI,CAACC,EAAL,GAAU,CAAvC;AACAtB,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACY,IAAJ;AACFZ,MAAAA,GAAG,CAACwB,OAAJ;AACD;;;2BACMK,G,EAAKC,G,EAAK;AACf;AACA,WAAKuC,KAAL,IAAc,KAAKC,MAAnB,CAFe,CAGf;;AACAM,MAAAA,YAAY,CAACC,aAAb,CAA2B,IAA3B,EAAiChD,GAAjC,EAAsCC,GAAtC;AACD;;;;;;;;;AChMH;;;AAGA,IAAM8C,YAAY,GAAG;AACnB;AACAa,EAAAA,QAFmB,oBAEVW,KAFU,EAEH;AACd,QAAMtH,WAAW,GAAGsH,KAAK,CAACtH,WAA1B;AACA,QAAMuH,SAAS,GAAG,QAAOvH,WAAP,MAAwB,QAA1C;;AACA,QAAI,CAACsH,KAAK,CAACrB,YAAX,EAAyB;AACvB,UAAMuB,OAAO,GAAGtE,IAAI,CAACsE,OAArB;AACA,UAAMC,WAAW,GAAID,OAAO,CAACxB,CAAR,GAAawB,OAAO,CAACE,aAAR,GAAwB,CAA1D;AACA,UAAMC,QAAQ,GAAG,CAACJ,SAAS,GAAGvH,WAAW,CAACkF,KAAf,GAAwBlF,WAAW,GAAGsH,KAAK,CAACtB,CAAtD,IAA4DyB,WAA7E;AACA,UAAMG,OAAO,GAAIhE,SAAS,CAAC,EAAD,EAAK,EAAL,CAA1B;AACA0D,MAAAA,KAAK,CAACrB,YAAN,GAAqB,EAAE0B,QAAQ,IAAIC,OAAO,GAAGC,SAAd,CAAV,CAArB;AACD;;AACD,QAAIN,SAAJ,EAAe;AACb,UAAID,KAAK,CAAC/G,EAAN,CAAS2E,KAAb,EAAoB;AAClBlF,QAAAA,WAAW,CAACoF,KAAZ,GAAoBpF,WAAW,CAACmF,GAAZ,GAAkBnF,WAAW,CAACkF,KAAZ,IAAqBoC,KAAK,CAACrB,YAAjE;AACD,OAFD,MAEO;AACL;AACAjG,QAAAA,WAAW,CAACmF,GAAZ,IAAmBmC,KAAK,CAACrB,YAAN,GAAqBrC,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAjD,CAFK,CAGL;;AACA5D,QAAAA,WAAW,CAACoF,KAAZ,IAAqBkC,KAAK,CAACrB,YAAN,GAAqBrC,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAnD;AACD;AACF,KATD,MASO;AACL0D,MAAAA,KAAK,CAACtH,WAAN,IAAqBsH,KAAK,CAACrB,YAA3B;AACD;AACF,GAxBkB;AA2BnB;AACA6B,EAAAA,SA5BmB,qBA4BTC,MA5BS,EA4BDC,OA5BC,EA4BQC,OA5BR,EA4BiBC,QA5BjB,EA4B2C;AAAA,QAAhBtC,MAAgB,uEAAP,KAAO;AAC5D,QAAIuC,OAAO,GAAG,CAAd;;AACA,QAAIC,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,UAAI,CAAClF,IAAI,CAACa,OAAV,EAAmB;AACjBoE,QAAAA,OAAO,IAAI,CAAX;AACD;;AACDjH,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACkB,WAAJ,kBAA0B8F,QAA1B,eAAuC,CAAC,KAAKC,OAAN,IAAiB,EAAxD;AACAjH,MAAAA,GAAG,CAACO,SAAJ,kBAAwByG,QAAxB,eAAqC,CAAC,KAAKC,OAAN,IAAiB,GAAtD;AACAjH,MAAAA,GAAG,CAACmH,WAAJ,kBAA0BH,QAA1B;AACAhH,MAAAA,GAAG,CAACoH,UAAJ,GAAiB,CAAjB;AACApH,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,CAAhB;AACA,UAAMkG,OAAO,GAAGR,MAAM,GAAGS,OAAO,CAAC,CAAD,EAAM,CAACL,OAAO,GAAG,CAAX,IAAgB,EAAjB,GAAuB,CAAxB,GAA6B,CAAjC,CAAhC;AACAjH,MAAAA,GAAG,CAACoB,GAAJ,CAAQ0F,OAAR,EAAiBC,OAAjB,EAA0BM,OAA1B,EAAmC,CAAnC,EAAsChG,IAAI,CAACC,EAAL,GAAU,CAAhD;AACAtB,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACuB,MAAJ;AACAvB,MAAAA,GAAG,CAACwB,OAAJ,GAfiB,CAgBjB;;AACA,UAAIyF,OAAO,GAAG,EAAd,EAAkB;AAChBM,QAAAA,qBAAqB,CAACL,MAAD,CAArB;AACD;AACF,KApBD;;AAqBAK,IAAAA,qBAAqB,CAACL,MAAD,CAArB;;AACA,QAAI,CAACxC,MAAL,EAAa;AACX9B,MAAAA,UAAU,CAAC,YAAM;AACfV,QAAAA,WAAW,CAACC,WAAZ,GAA0B,cAA1B;AACD,OAFS,EAEP,CAFO,CAAV;AAGD,KA5B2D,CA6B5D;;;AACAc,IAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,CAAtB,EAAyB,EAAzB,CAAT;AACAA,IAAAA,SAAS,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,CAApB,EAAuB,EAAvB,CAAT;AACAA,IAAAA,SAAS,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,CAApB,EAAuB,EAAvB,CAAT;AACD,GA7DkB;AAgEnB;AACA2C,EAAAA,UAjEmB,sBAiER4B,OAjEQ,EAiECC,QAjED,EAiEWC,IAjEX,EAiEiBC,gBAjEjB,EAiEmCC,oBAjEnC,EAiEyD;AAC1E,QAAMxB,KAAK,GAAGoB,OAAO,CAACC,QAAD,CAArB;AACA,QAAMnB,OAAO,GAAGtE,IAAI,CAACsE,OAArB;AACA,QAAIuB,gBAAJ;;AACA,QAAIvB,OAAO,CAACwB,KAAR,KAAkB,QAAtB,EAAgC;AAC9BD,MAAAA,gBAAgB,GAAGxG,IAAI,CAAC0G,GAAL,CAASC,cAAc,GAAGJ,oBAAoB,GAAGtH,OAAjD,KAA8D,MAAMA,OAApE,IAAgFe,IAAI,CAAC0G,GAAL,CAASC,cAAc,GAAGJ,oBAAoB,GAAGtH,OAAjD,KAA8D,MAAMA,OAAvK;AACD,KAFD,MAEO;AACLuH,MAAAA,gBAAgB,GAAGxG,IAAI,CAAC0G,GAAL,CAASC,cAAc,GAAGJ,oBAAoB,GAAGtH,OAAjD,KAA8D,KAAKA,OAAnE,IAA+Ee,IAAI,CAAC0G,GAAL,CAASC,cAAc,GAAGJ,oBAAoB,GAAGtH,OAAjD,KAA8D,MAAMA,OAAtK;AACD,KARyE,CAS1E;AACA;;;AACA,QAAM2H,iBAAiB,GAAG,SAApBA,iBAAoB,GAAY;AACpC,UAAIP,IAAI,KAAK,KAAT,IAAkBA,IAAI,KAAK,OAA/B,EAAwC;AACtCF,QAAAA,OAAO,CAACU,MAAR,CAAeT,QAAf,EAAyB,CAAzB,EADsC,CAEtC;;AACA,YAAIC,IAAI,KAAK,OAAb,EAAsB;AACpB,cAAMV,QAAQ,GAAGU,IAAI,KAAK,QAAT,GAAoB,cAApB,GAAqC,cAAtD;AACA9C,UAAAA,YAAY,CAACgC,SAAb,CAAuBR,KAAK,CAACtB,CAA7B,EAAgC3E,SAAS,CAACwH,gBAAD,EAAmBC,oBAAnB,CAAT,CAAkDxH,CAAlF,EAAqFD,SAAS,CAACwH,gBAAD,EAAmBC,oBAAnB,CAAT,CAAkDvH,CAAvI,EAA0I2G,QAA1I;AACD,SAHD,MAGO;AACL,cAAMmB,QAAQ,GAAG,CAAC,KAAK,EAAN,IAAY,CAA7B;AACAvD,UAAAA,YAAY,CAACgC,SAAb,CAAuBuB,QAAvB,EAAiC/B,KAAK,CAACjG,SAAN,CAAgBuH,IAAhB,EAAsBtH,CAAvD,EAA0DgG,KAAK,CAACjG,SAAN,CAAgBuH,IAAhB,EAAsBrH,CAAhF,EAAmF,aAAnF;AACD;AACF,OAVD,MAUO;AACL+F,QAAAA,KAAK,CAAC/G,EAAN,CAASqI,IAAT,KAAkB,CAAlB;;AACA,YAAMS,SAAQ,GAAGT,IAAI,KAAK,KAAT,GAAiB,CAAC,KAAK,EAAN,IAAY,CAA7B,GAAiC,CAAC,KAAK,EAAN,IAAY,CAA9D;;AACA9C,QAAAA,YAAY,CAACgC,SAAb,CAAuBuB,SAAvB,EAAiC/B,KAAK,CAACjG,SAAN,CAAgBuH,IAAhB,EAAsBtH,CAAvD,EAA0DgG,KAAK,CAACjG,SAAN,CAAgBuH,IAAhB,EAAsBrH,CAAhF,EAAmF,aAAnF;;AACA,YAAI+F,KAAK,CAAC/G,EAAN,CAAS4E,GAAT,KAAiB,CAAjB,IAAsBmC,KAAK,CAAC/G,EAAN,CAAS6E,KAAT,KAAmB,CAA7C,EAAgD;AAC9CsD,UAAAA,OAAO,CAACU,MAAR,CAAeT,QAAf,EAAyB,CAAzB;AACD;AACF;AACF,KAnBD,CAX0E,CA+B1E;;;AACA,QAAIE,gBAAgB,IAAKrB,OAAO,CAACxB,CAAR,GAAawB,OAAO,CAACE,aAAR,GAAwB,CAA9D,EAAmE;AACjE;AACAyB,MAAAA,iBAAiB;AACjBrD,MAAAA,YAAY,CAACwD,mBAAb;AACAnF,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT,CAJiE,CAKjE;AACD,KAND,MAMO,IAAI4E,gBAAgB,IAAKF,gBAAgB,IAAKrB,OAAO,CAAC+B,OAAR,GAAmB/B,OAAO,CAACgC,WAAR,GAAsB,CAAvF,EAA6F;AAClGL,MAAAA,iBAAiB;AACjB3B,MAAAA,OAAO,CAACiC,SAAR,GAAoB,IAApB;AACArG,MAAAA,WAAW,CAACC,WAAZ,GAA0B,SAA1B;AACAc,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD;AACF,GA7GkB;AAgHnB;AACA4B,EAAAA,aAjHmB,yBAiHLnD,MAjHK,EAiHG8G,SAjHH,EAiHcpJ,OAjHd,EAiHsC;AAAA,QAAfqJ,SAAe,uEAAH,CAAG;AACvD,QAAMnC,OAAO,GAAGtE,IAAI,CAACsE,OAArB;AACA,QAAMC,WAAW,GAAGD,OAAO,CAACxB,CAAR,GAAawB,OAAO,CAACE,aAAR,GAAwB,CAAzD;AACA,QAAMkC,aAAa,GAAGpC,OAAO,CAAC+B,OAAR,GAAmB/B,OAAO,CAACgC,WAAR,GAAsB,CAA/D,CAHuD,CAIvD;;AACA,QAAIjH,IAAI,CAAC0G,GAAL,CAASrG,MAAM,CAAC2C,KAAhB,KAA2B3C,MAAM,CAAC5C,WAAP,IAAsByH,WAAW,GAAGkC,SAApC,CAA/B,EAAgF;AAC9E;AACA7D,MAAAA,YAAY,CAACwD,mBAAb,GAF8E,CAG9E;;AACAhJ,MAAAA,OAAO,CAAC8I,MAAR,CAAeM,SAAf,EAA0B,CAA1B;AACA9G,MAAAA,MAAM,CAACgD,MAAP,GAAgBzB,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAzB,GAAwDA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAjE;AACD,KAXsD,CAYvD;;;AACA,QAAM0F,YAAY,GAAGjH,MAAM,CAACgD,MAAP,GAAgBhD,MAAM,CAAC2B,WAAP,GAAqB,EAArC,GAA0C3B,MAAM,CAAC2B,WAAtE;AACA,QAAMuF,QAAQ,GAAGvH,IAAI,CAAC0G,GAAL,CAAUC,cAAc,GAAG1H,OAAlB,IAA+BqI,YAAY,GAAG,GAAhB,IAAwBA,YAAY,GAAG,CAAf,GAAmB,GAAnB,GAAyB,CAAjD,CAA9B,CAAT,CAAjB;AACA,QAAId,gBAAJ;;AACA,QAAIvB,OAAO,CAACwB,KAAR,KAAkB,QAAtB,EAAgC;AAC9BD,MAAAA,gBAAgB,GAAIe,QAAQ,IAAI,GAAb,IAAsBA,QAAQ,IAAI,GAArD;AACD,KAFD,MAEO;AACLf,MAAAA,gBAAgB,GAAIe,QAAQ,IAAI,EAAb,IAAqBA,QAAQ,IAAI,GAApD;AACD;;AACD,QAAIf,gBAAgB,IAAKxG,IAAI,CAAC0G,GAAL,CAASrG,MAAM,CAAC2C,KAAhB,KAA2B3C,MAAM,CAAC5C,WAAP,IAAsB4J,aAAa,GAAGD,SAAtC,CAApD,EAAwG;AACtG;AACArJ,MAAAA,OAAO,CAAC8I,MAAR,CAAeM,SAAf,EAA0B,CAA1B;AACAtG,MAAAA,WAAW,CAACC,WAAZ,GAA0B,SAA1B;AACAc,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD;AACF,GA5IkB;AA+InB;AACAmF,EAAAA,mBAhJmB,iCAgJG;AACpB,QAAI,CAACpG,IAAI,CAACwD,OAAN,IAAkBxD,IAAI,CAAC6G,YAAL,KAAsB,EAAtB,IAA4B,CAAC7G,IAAI,CAAC8G,IAAxD,EAA+D;AAC/D,QAAMxC,OAAO,GAAGtE,IAAI,CAACsE,OAArB;AACA,QAAMyC,mBAAmB,GAAG,GAA5B,CAHoB,CAIpB;;AACA,QAAMC,aAAa,GAAGC,YAAY,CAACC,WAAb,GAA4BH,mBAAmB,GAAG,CAAxE;AACAzC,IAAAA,OAAO,CAAC6C,UAAR,GAAqB,IAArB,CANoB,CAOpB;AACA;;AACAF,IAAAA,YAAY,CAACG,KAAb,CAAmBC,KAAnB,aAA8BL,aAAa,GAAG,CAAhB,GAAoB,CAApB,GAAwBA,aAAtD,QAToB,CAUpB;;AACA,QAAIA,aAAa,IAAI,CAArB,EAAwB;AACtB;AACA,UAAI1C,OAAO,CAACgD,MAAZ,EAAoB;AAClB;AACA,YAAMC,YAAY,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,oBAA1B,CAArB;AACAF,QAAAA,YAAY,CAAC,CAAD,CAAZ,CAAgBG,UAAhB,CAA2BC,WAA3B,CAAuCJ,YAAY,CAAC,CAAD,CAAnD;AACAjD,QAAAA,OAAO,CAACgD,MAAR,IAAkB,CAAlB,CAJkB,CAKlB;;AACAL,QAAAA,YAAY,CAACG,KAAb,CAAmBC,KAAnB,aAA8BN,mBAA9B;AACD,OAPD,MAOO;AACL;AACA/G,QAAAA,IAAI,CAAC4H,OAAL;AACA3G,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,CAAT;AACAA,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,GAAtB,CAAT;AACAA,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,GAAtB,CAAT;AACA+C,QAAAA,YAAY,CAAChE,IAAI,CAAC6H,mBAAN,CAAZ;AACA3H,QAAAA,WAAW,CAACC,WAAZ,kBAAkC,KAAK2H,UAAvC;AACA;AACD;AACF;;AACD5H,IAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,QAAvB,GAAkC,QAA5D;AACD,GAhLkB;AAmLnB4F,EAAAA,aAnLmB,2BAmLH;AACd,QAAIjB,IAAI,GAAG9G,IAAI,CAAC8G,IAAhB;AACAlE,IAAAA,YAAY,CAACgC,SAAb,CAAuB,GAAvB,EAA4BzG,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDqB,CAA9E,EAAiFD,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDsB,CAAnI,EAAsI,cAAtI,EAAsJ,IAAtJ;AACAuC,IAAAA,UAAU,CAAC,YAAM;AACfgC,MAAAA,YAAY,CAACgC,SAAb,CAAuB,GAAvB,EAA4BzG,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDqB,CAA9E,EAAiFD,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDsB,CAAnI,EAAsI,cAAtI,EAAsJ,IAAtJ;AACD,KAFS,EAEP,GAFO,CAAV;AAGAuC,IAAAA,UAAU,CAAC,YAAM;AACfgC,MAAAA,YAAY,CAACgC,SAAb,CAAuB,GAAvB,EAA4BzG,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDqB,CAA9E,EAAiFD,SAAS,CAAC2I,IAAI,CAAChK,WAAN,EAAmBgK,IAAI,CAAC/J,eAAxB,CAAT,CAAkDsB,CAAnI,EAAsI,aAAtI,EAAqJ,IAArJ;AACD,KAFS,EAEP,GAFO,CAAV;AAGA2B,IAAAA,IAAI,CAAC8G,IAAL,GAAY,IAAZ,CATc,CAUd;;AACAkB,IAAAA,GAAG,CAACC,KAAJ;AACAD,IAAAA,GAAG,CAACE,WAAJ,GAAkB,CAAlB;AACAC,IAAAA,UAAU,CAACC,IAAX;AACAD,IAAAA,UAAU,CAACE,MAAX,GAAoB,GAApB,CAdc,CAed;;AACAzH,IAAAA,UAAU,CAAC,YAAM;AACfZ,MAAAA,IAAI,CAAC4H,OAAL;AACD,KAFS,EAEP,IAFO,CAAV;AAGA5D,IAAAA,YAAY,CAAChE,IAAI,CAAC6H,mBAAN,CAAZ;AACA3H,IAAAA,WAAW,CAACC,WAAZ,GAA0B,gBAA1B;AACD;AAxMkB,CAArB;;;;;;;;;;;;;;;;;ACHA;AACA,IAAMwE,SAAS,GAAG,EAAlB;AACA,IAAI2D,UAAU,GAAG,CAAjB;AAEA,IAAMzJ,WAAW,GAAG;AAClBG,EAAAA,GAAG,EAAE,SADa;AAElBF,EAAAA,MAAM,EAAE,SAFU;AAGlByJ,EAAAA,MAAM,EAAE,SAHU;AAIlBtJ,EAAAA,IAAI,EAAE,SAJY;AAKlBuJ,EAAAA,QAAQ,EAAE,SALQ;AAMlBzJ,EAAAA,KAAK,EAAE;AANW,CAApB;AASA,IAAM0J,KAAK,GAAG,CAAC,OAAD,EAAU,WAAV,EAAuB,QAAvB,EAAiC,QAAjC,EAA2C,MAA3C,CAAd;AAGA;AACA;AACE;AACA;AACA;AACF;AAEA;AACA;AACA;;AAEA,IAAMC,QAAQ,GAAGlB,QAAQ,CAACmB,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAMC,UAAU,GAAGpB,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AACA,IAAME,QAAQ,GAAGrB,QAAQ,CAACmB,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAMG,OAAO,GAAGtB,QAAQ,CAACmB,cAAT,CAAwB,UAAxB,CAAhB;AACA,IAAMI,eAAe,GAAGvB,QAAQ,CAACmB,cAAT,CAAwB,oBAAxB,CAAxB;AAEA,IAAMK,KAAK,GAAGxB,QAAQ,CAACmB,cAAT,CAAwB,OAAxB,CAAd;AACA,IAAMM,SAAS,GAAGzB,QAAQ,CAACmB,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAMO,WAAW,GAAG1B,QAAQ,CAACmB,cAAT,CAAwB,cAAxB,CAApB;AACA,IAAM1B,YAAY,GAAGO,QAAQ,CAACmB,cAAT,CAAwB,IAAxB,CAArB;AACA,IAAMQ,YAAY,GAAG3B,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB;AACA,IAAMS,IAAI,GAAG5B,QAAQ,CAACmB,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMU,OAAO,GAAG7B,QAAQ,CAACmB,cAAT,CAAwB,WAAxB,CAAhB;AACA,IAAMW,YAAY,GAAG9B,QAAQ,CAACmB,cAAT,CAAwB,iBAAxB,CAArB;AACA,IAAMY,UAAU,GAAG/B,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AACA,IAAMa,MAAM,GAAGhC,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAf,C,CACA;;AACA,IAAMc,KAAK,GAAGjC,QAAQ,CAACmB,cAAT,CAAwB,OAAxB,CAAd;AACA,IAAMe,SAAS,GAAGlC,QAAQ,CAACmB,cAAT,CAAwB,WAAxB,CAAlB;AACA,IAAMgB,QAAQ,GAAGnC,QAAQ,CAACmB,cAAT,CAAwB,UAAxB,CAAjB;AACA,IAAMiB,QAAQ,GAAGpC,QAAQ,CAACmB,cAAT,CAAwB,WAAxB,CAAjB;AACA,IAAMkB,SAAS,GAAGrC,QAAQ,CAACmB,cAAT,CAAwB,YAAxB,CAAlB;AACA,IAAMzI,WAAW,GAAGsH,QAAQ,CAACmB,cAAT,CAAwB,cAAxB,CAApB;AACA,IAAMb,UAAU,GAAGN,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AAEA,IAAMmB,UAAU,GAAGtC,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AACA,IAAMoB,aAAa,GAAGvC,QAAQ,CAACmB,cAAT,CAAwB,gBAAxB,CAAtB;AACA,IAAMqB,YAAY,GAAGxC,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB,C,CACA;;AACA,IAAMsB,UAAU,GAAGzC,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AAEA,IAAMuB,aAAa,GAAG1C,QAAQ,CAACmB,cAAT,CAAwB,gBAAxB,CAAtB;AACA,IAAMwB,WAAW,GAAG3C,QAAQ,CAACmB,cAAT,CAAwB,cAAxB,CAApB;AACA,IAAMyB,WAAW,GAAG5C,QAAQ,CAACmB,cAAT,CAAwB,cAAxB,CAApB,C,CAEA;;AACA,IAAMX,GAAG,GAAGR,QAAQ,CAACmB,cAAT,CAAwB,KAAxB,CAAZ;AACA,IAAMR,UAAU,GAAGX,QAAQ,CAACmB,cAAT,CAAwB,aAAxB,CAAnB;AAEA,IAAM0B,YAAY,GAAG7C,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB;AACA,IAAM2B,YAAY,GAAG9C,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB;AACA,IAAM4B,YAAY,GAAG/C,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB;AAEA,IAAM6B,OAAO,GAAGhD,QAAQ,CAACmB,cAAT,CAAwB,UAAxB,CAAhB;AACA,IAAM8B,YAAY,GAAGjD,QAAQ,CAACmB,cAAT,CAAwB,eAAxB,CAArB;AAKA;;AACA,IAAM+B,MAAM,GAAGlD,QAAQ,CAACmB,cAAT,CAAwB,MAAxB,CAAf;AACA,IAAM3K,GAAG,GAAG0M,MAAM,CAACC,UAAP,CAAkB,IAAlB,CAAZ;AACA,IAAIC,EAAJ;AACA,IAAIC,EAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,iBAAJ;;AAEA,SAASC,UAAT,GAAsB;AACpBH,EAAAA,KAAK,GAAGJ,MAAM,CAACrD,KAAf;AACA0D,EAAAA,KAAK,GAAGL,MAAM,CAACQ,MAAf;AACAF,EAAAA,iBAAiB,GAAG3L,IAAI,CAAC8L,KAAL,CAAW9L,IAAI,CAAC+L,IAAL,CAAUV,MAAM,CAACrD,KAAP,GAAeqD,MAAM,CAACrD,KAAtB,GAA8BqD,MAAM,CAACQ,MAAP,GAAgBR,MAAM,CAACQ,MAA/D,IAAyE,CAApF,CAApB;AACAN,EAAAA,EAAE,GAAGpD,QAAQ,CAAC6D,eAAT,CAAyBC,WAA9B;AACAT,EAAAA,EAAE,GAAGrD,QAAQ,CAAC6D,eAAT,CAAyBE,YAA9B;AACD;;AAID,IAAMjN,OAAO,GAAGe,IAAI,CAACC,EAAL,GAAU,GAA1B;AACA,IAAIkM,WAAJ;AACA,IAAIC,aAAJ;AACA,IAAIC,YAAJ;AACA,IAAI1L,IAAJ;;IAIM2L,I;;;AACJ,gBAAY/O,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVyH,MAAAA,OAAO,EAAE,IADC;AAEV8E,MAAAA,IAAI,EAAE,IAFI;AAGVG,MAAAA,UAAU,EAAE,CAHF;AAIV9H,MAAAA,OAAO,EAAE,EAJC;AAKVG,MAAAA,SAAS,EAAE,EALD;AAMVE,MAAAA,QAAQ,EAAE,EANA;AAOV8J,MAAAA,OAAO,EAAE,EAPC;AAQVpI,MAAAA,OAAO,EAAE,KARC;AASVvD,MAAAA,KAAK,EAAE,KATG;AAUVY,MAAAA,OAAO,EAAE,KAVC;AAWVgL,MAAAA,MAAM,EAAE;AACNzN,QAAAA,CAAC,EAAE,CAAC,CADE;AAENC,QAAAA,CAAC,EAAE;AAFG,OAXE;AAeVwI,MAAAA,YAAY,EAAE,CAfJ;AAgBViF,MAAAA,gBAAgB,EAAE,CAhBR;AAiBV;AACAC,MAAAA,cAAc,EAAE,IAlBN;AAmBVC,MAAAA,cAAc,EAAE,IAnBN;AAoBVC,MAAAA,YAAY,EAAE,IApBJ;AAqBVC,MAAAA,kBAAkB,EAAE,IArBV;AAsBVrE,MAAAA,mBAAmB,EAAE,IAtBX;AAuBVsE,MAAAA,qBAAqB,EAAE,GAvBb;AAwBVrF,MAAAA,IAAI,EAAE,IAxBI;AAyBVgB,MAAAA,UAAU,EAAE,EAzBF;AA0BVsE,MAAAA,eAAe,EAAE,CA1BP;AA2BVC,MAAAA,OAAO,EAAE,KA3BC;AA4BVC,MAAAA,cAAc,EAAE;AA5BN,KAAZ;AA8BAxO,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AAAA;;AACL6N,MAAAA,MAAM,CAAC6B,gBAAP,CAAwB,WAAxB,EAAqCC,eAArC;AACA9B,MAAAA,MAAM,CAAC6B,gBAAP,CAAwB,OAAxB,EAAiCE,WAAjC;AACAC,MAAAA,MAAM,CAACH,gBAAP,CAAwB,OAAxB,EAAiCI,WAAjC;AACAC,MAAAA,gBAAgB;AAChBlE,MAAAA,QAAQ,CAAC6D,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACvC,YAAI,CAAC,KAAI,CAACM,eAAL,EAAL,EAA6B;;AAC7B,QAAA,KAAI,CAACC,SAAL;AACD,OAHD;AAIAlE,MAAAA,UAAU,CAAC2D,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACzC,QAAA,KAAI,CAACO,SAAL;AACD,OAFD;AAGA/D,MAAAA,eAAe,CAACwD,gBAAhB,CAAiC,OAAjC,EAA0C,YAAM;AAC9C,QAAA,KAAI,CAACO,SAAL;AACD,OAFD;AAGA,WAAKC,SAAL;AACA,WAAKC,MAAL;AACA,WAAKjN,MAAL,GAjBK,CAkBL;;AACA,WAAKkN,SAAL,GAnBK,CAoBL;;AACA,WAAKC,mBAAL;AACArE,MAAAA,QAAQ,CAAC0D,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACvCrC,QAAAA,aAAa,CAACiD,SAAd,CAAwBC,GAAxB,CAA4B,KAA5B;AACAjD,QAAAA,WAAW,CAACgD,SAAZ,CAAsBC,GAAtB,CAA0B,KAA1B;AACAhD,QAAAA,WAAW,CAAC+C,SAAZ,CAAsBE,MAAtB,CAA6B,KAA7B;AACA7D,QAAAA,MAAM,CAAC2D,SAAP,CAAiBC,GAAjB,CAAqB,KAArB;;AACA,YAAI,CAAC,KAAI,CAACd,cAAV,EAA0B;AACxB,UAAA,KAAI,CAACgB,eAAL;AACD;;AACD,QAAA,KAAI,CAAChB,cAAL,GAAsB,IAAtB;AACD,OATD;AAUAxD,MAAAA,OAAO,CAACyD,gBAAR,CAAyB,OAAzB,EAAkC,YAAY;AAC5CrC,QAAAA,aAAa,CAACiD,SAAd,CAAwBE,MAAxB,CAA+B,KAA/B;AACAlD,QAAAA,WAAW,CAACgD,SAAZ,CAAsBE,MAAtB,CAA6B,KAA7B;AACAjD,QAAAA,WAAW,CAAC+C,SAAZ,CAAsBC,GAAtB,CAA0B,KAA1B;AACA5D,QAAAA,MAAM,CAAC2D,SAAP,CAAiBE,MAAjB,CAAwB,KAAxB;AACD,OALD;AAMA7C,MAAAA,OAAO,CAAC+B,gBAAR,CAAyB,OAAzB,EAAkC,YAAY;AAC5CG,QAAAA,MAAM,CAACa,IAAP,CAAY,qFAAZ,EAAmG,EAAnG,EAAuG,oFAAvG;AACD,OAFD;AAGA9C,MAAAA,YAAY,CAAC8B,gBAAb,CAA8B,OAA9B,EAAuC,YAAY;AACjD;AACA,YAAMiB,GAAG,GAAG,wCAAZ;AACA,YAAMC,IAAI,GAAG,UAAb;AACAf,QAAAA,MAAM,CAACa,IAAP,wCAA4CG,kBAAkB,CAACF,GAAD,CAA9D,kBAA2EE,kBAAkB,CAACD,IAAD,CAA7F,GAAuG,EAAvG,EAA2G,oFAA3G;AACD,OALD;AAMD;;;6BACQ;AAAA;;AACP;AACAzP,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAAC2J,QAA5B;AACAxK,MAAAA,GAAG,CAAC2P,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB7C,KAAnB,EAA0BC,KAA1B,EAHO,CAIP;;AACA,WAAK6C,SAAL;;AACA,UAAI,CAAC,KAAKpK,OAAN,IAAiB,CAAC,KAAKvD,KAA3B,EAAkC;AAChCjC,QAAAA,GAAG,CAACC,IAAJ;AACED,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACoB,GAAJ,CAAQ0L,KAAK,GAAG,CAAhB,EAAmBC,KAAK,GAAG,CAA3B,EAA8B,GAA9B,EAAmC,CAAnC,EAAsC1L,IAAI,CAACC,EAAL,GAAU,CAAhD;AACAtB,QAAAA,GAAG,CAACkB,WAAJ,GAAkB,0BAAlB;AACAlB,QAAAA,GAAG,CAACuB,MAAJ;AACAvB,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACoB,GAAJ,CAAQ0L,KAAK,GAAG,CAAhB,EAAmBC,KAAK,GAAG,CAA3B,EAA8B,GAA9B,EAAmC,CAAnC,EAAsC1L,IAAI,CAACC,EAAL,GAAU,CAAhD;AACAtB,QAAAA,GAAG,CAACmB,SAAJ,GAAgB,GAAhB;AACAnB,QAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACE,KAA9B;AACAf,QAAAA,GAAG,CAACuB,MAAJ;AACFvB,QAAAA,GAAG,CAACwB,OAAJ;AACD,OAlBM,CAmBP;;;AACA,WAAK8E,OAAL,CAAa3E,IAAb,GApBO,CAqBP;;AACA,WAAK8B,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAAClO,IAAP;AACD,OAFD,EAtBO,CAyBP;;AACA,WAAKiC,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAc;AACnCA,QAAAA,QAAQ,CAACnO,IAAT;AACD,OAFD,EA1BO,CA6BP;;AACA,WAAKmC,QAAL,CAAcrC,OAAd,CAAsB,UAACsO,OAAD,EAAa;AACjCA,QAAAA,OAAO,CAACpO,IAAR;AACD,OAFD,EA9BO,CAiCP;;AACA,WAAKiM,OAAL,CAAanM,OAAb,CAAqB,UAACuO,WAAD,EAAiB;AACpCA,QAAAA,WAAW,CAACrO,IAAZ;AACD,OAFD,EAlCO,CAqCP;;AACA,WAAKyJ,IAAL,IAAa,KAAKA,IAAL,CAAUzJ,IAAV,EAAb,CAtCO,CAuCP;;AACA,WAAKmH,IAAL,IAAa,KAAKA,IAAL,CAAUnH,IAAV,EAAb;;AACA,UAAI,KAAK6D,OAAT,EAAkB;AAChB;AACA,aAAKyK,SAAL;AACD;;AACD1I,MAAAA,qBAAqB,CAAC,YAAM;AAC1B,QAAA,MAAI,CAACyH,MAAL;AACD,OAFoB,CAArB;AAGD;;;6BACQ;AAAA;;AACP1E,MAAAA,UAAU,IAAI,CAAd;;AACA,UAAI,CAAC,KAAKzH,OAAN,IAAiB,CAAC,KAAKZ,KAA3B,EAAkC;AAChC;AACA,aAAKqE,OAAL,CAAavE,MAAb,GAFgC,CAGhC;;AACA,aAAK0B,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAAShO,GAAT,EAAiB;AACpCgO,UAAAA,MAAM,CAAC9N,MAAP,CAAcF,GAAd;AACD,SAFD,EAJgC,CAOhC;;AACA,aAAK+B,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAWjO,GAAX,EAAmB;AACxCiO,UAAAA,QAAQ,CAAC/N,MAAT,CAAgBF,GAAhB;AACD,SAFD,EARgC,CAWhC;;AACA,aAAKiC,QAAL,CAAcrC,OAAd,CAAsB,UAACsO,OAAD,EAAUlO,GAAV,EAAkB;AACtCkO,UAAAA,OAAO,CAAChO,MAAR,CAAeF,GAAf;AACD,SAFD,EAZgC,CAehC;;AACA,aAAK+L,OAAL,CAAanM,OAAb,CAAqB,UAACuO,WAAD,EAAcnO,GAAd,EAAsB;AACzCmO,UAAAA,WAAW,CAACjO,MAAZ,CAAmBF,GAAnB;AACD,SAFD,EAhBgC,CAmBhC;;AACA,aAAKuJ,IAAL,IAAa,KAAKA,IAAL,CAAUrJ,MAAV,EAAb,CApBgC,CAqBhC;;AACA,aAAK+G,IAAL,IAAa,KAAKA,IAAL,CAAU/G,MAAV,EAAb;AACD;;AACDa,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACb,MAAL;AACD,OAFS,EAEP,OAAO4E,SAFA,CAAV;AAGD,K,CACD;;;;gCACY;AACV,WAAKL,OAAL,GAAe,IAAI4J,OAAJ,EAAf,CADU,CAEV;;AACA,WAAKzM,OAAL,CAAaP,IAAb,CAAkB,IAAIQ,MAAJ,CAAW;AAC3B5E,QAAAA,WAAW,EAAE4D,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAiB,GAAG,GAA5C,CADK;AAE3BjO,QAAAA,eAAe,EAAE,GAFU;AAG3BG,QAAAA,gBAAgB,EAAE,EAAEwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAApB,CAHS;AAI3B1D,QAAAA,MAAM,EAAE0D,SAAS,CAAC,CAAD,EAAI,GAAJ;AAJU,OAAX,CAAlB,EAHU,CASV;;AACA,WAAKkB,SAAL,CAAeV,IAAf,CAAoB,IAAIW,QAAJ,CAAa;AAC/B/E,QAAAA,WAAW,EAAE4D,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAiB,GAAG,GAA5C,CADS;AAE/BjO,QAAAA,eAAe,EAAE,EAFc;AAG/BG,QAAAA,gBAAgB,EAAGwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAHN;AAI/B1D,QAAAA,MAAM,EAAE;AAJuB,OAAb,CAApB,EAVU,CAgBV;;AACA,UAAMmR,OAAO,GAAGzN,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAiB,GAAG,GAA5C,CAAzB;AACA,UAAMhO,MAAM,GAAG0D,SAAS,CAAC,CAAD,EAAI,GAAJ,CAAxB;AACA,UAAMvD,OAAO,GAAIuD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAAnC;AACA,WAAKoB,QAAL,CAAcZ,IAAd,CAAmB,IAAIa,OAAJ,CAAY;AAC7BjF,QAAAA,WAAW,EAAE;AACXkF,UAAAA,KAAK,EAAEmM,OADI;AAEXlM,UAAAA,GAAG,EAAEkM,OAFM;AAGXjM,UAAAA,KAAK,EAAEiM;AAHI,SADgB;AAM7BpR,QAAAA,eAAe,EAAE;AACfiF,UAAAA,KAAK,EAAE,GADQ;AAEfC,UAAAA,GAAG,EAAE,GAFU;AAGfC,UAAAA,KAAK,EAAE;AAHQ,SANY;AAW7BlF,QAAAA,MAAM,EAAE;AACNgF,UAAAA,KAAK,EAAEhF,MADD;AAENiF,UAAAA,GAAG,EAAEjF,MAFC;AAGNkF,UAAAA,KAAK,EAAElF;AAHD,SAXqB;AAgB7BG,QAAAA,OAAO,EAAPA;AAhB6B,OAAZ,CAAnB;AAkBD,K,CACD;;;;gCACY;AACVa,MAAAA,GAAG,CAACC,IAAJ;AACED,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACkB,WAAJ,GAAkB,2BAAlB;AACAlB,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,GAAhB,CAJQ,CAKR;;AACA,WAAK,IAAI0E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,IAAI,CAA7B,EAAgC;AAC9B7F,QAAAA,GAAG,CAACS,MAAJ,CAAWoF,CAAC,GAAG,EAAJ,GAAWyE,UAAU,GAAG,KAAKuD,MAAL,CAAYzN,CAA1B,GAA+B,EAApD,EAAyD,CAAzD;AACAJ,QAAAA,GAAG,CAACU,MAAJ,CAAWmF,CAAC,GAAG,EAAJ,GAAWyE,UAAU,GAAG,KAAKuD,MAAL,CAAYzN,CAA1B,GAA+B,EAApD,EAAyD2M,KAAzD;AACD,OATO,CAUR;;;AACA,WAAK,IAAIlH,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,EAApB,EAAwBA,EAAC,IAAI,CAA7B,EAAgC;AAC9B7F,QAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAcoF,EAAC,GAAG,EAAJ,GAAWyE,UAAU,GAAG,KAAKuD,MAAL,CAAYxN,CAA1B,GAA+B,EAAvD;AACAL,QAAAA,GAAG,CAACU,MAAJ,CAAWoM,KAAX,EAAkBjH,EAAC,GAAG,EAAJ,GAAWyE,UAAU,GAAG,KAAKuD,MAAL,CAAYxN,CAA1B,GAA+B,EAA3D;AACD;;AACDL,MAAAA,GAAG,CAACuB,MAAJ;AACFvB,MAAAA,GAAG,CAACwB,OAAJ;AACD,K,CACD;;;;gCACY;AACV,UAAM4O,aAAa,GAAGC,YAAY,CAACjQ,CAAb,GAAiB0M,KAAK,GAAG,CAA/C;AACA,UAAMwD,aAAa,GAAGD,YAAY,CAAChQ,CAAb,GAAiB0M,KAAK,GAAG,CAA/C;AACA,UAAMwD,MAAM,GAAG,EAAf;AACAvQ,MAAAA,GAAG,CAACC,IAAJ;AACED,MAAAA,GAAG,CAACE,SAAJ,CAAckQ,aAAd,EAA6BE,aAA7B;AACAtQ,MAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACE,KAA9B;AACAf,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,GAAhB;AACAnB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC8P,MAAZ,EAAoB,CAApB;AACAvQ,MAAAA,GAAG,CAACU,MAAJ,CAAW6P,MAAX,EAAmB,CAAnB;AACAvQ,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAC8P,MAAf;AACAvQ,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc6P,MAAd;AACAvQ,MAAAA,GAAG,CAACuB,MAAJ;AACFvB,MAAAA,GAAG,CAACwB,OAAJ;AACAxB,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACoB,GAAJ,CAAQgP,aAAR,EAAuBE,aAAvB,EAAsC,GAAtC,EAA2C,CAA3C,EAA8CjP,IAAI,CAACC,EAAL,GAAU,CAAxD;AACAtB,MAAAA,GAAG,CAACY,IAAJ;AACD,K,CACD;;;;gCACY;AAAA;;AACVgC,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACiL,MAAL,CAAYzN,CAAZ,GAAgBiB,IAAI,CAAC8C,MAAL,KAAgB,CAAhB,GAAoB,CAApC;AACA,QAAA,MAAI,CAAC0J,MAAL,CAAYxN,CAAZ,GAAgBgB,IAAI,CAAC8C,MAAL,KAAgB,CAAhB,GAAoB,CAApC;;AACA,QAAA,MAAI,CAAC8K,SAAL;AACD,OAJS,EAIP,IAJO,CAAV;AAKD,K,CACD;;;;gCACY;AAAA;;AACV,WAAKzJ,OAAL,GAAe,IAAf;AACA,WAAKvD,KAAL,GAAa,KAAb,CAFU,CAGV;;AACA+I,MAAAA,KAAK,CAAC5B,KAAN,CAAYoH,OAAZ,GAAsB,MAAtB,CAJU,CAKV;;AACAvF,MAAAA,SAAS,CAAC7B,KAAV,CAAgBoH,OAAhB,GAA0B,OAA1B,CANU,CAOV;;AACA,WAAKjF,UAAL,GAAkB,CAAlB;AACAA,MAAAA,UAAU,CAACpJ,WAAX,GAAyB,KAAKoJ,UAA9B,CATU,CAUV;;AACAtC,MAAAA,YAAY,CAACG,KAAb,CAAmBC,KAAnB,GAA2B,OAA3B,CAXU,CAYV;;AACA,WAAKS,UAAL,GAAkBA,UAAU,CAAC2G,KAA7B,CAbU,CAcV;;AACA,WAAKnK,OAAL,GAAe,IAAI4J,OAAJ,EAAf,CAfU,CAgBV;;AACA/E,MAAAA,YAAY,CAACuF,SAAb,GAAyB,EAAzB;;AACA,WAAK,IAAI7K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKS,OAAL,CAAagD,MAAjC,EAAyCzD,CAAC,EAA1C,EAA8C;AAC5C,YAAM8K,KAAK,GAAGnH,QAAQ,CAACoH,aAAT,CAAuB,KAAvB,CAAd;AACAD,QAAAA,KAAK,CAACxB,SAAN,CAAgBC,GAAhB,CAAoB,mBAApB;AACAjE,QAAAA,YAAY,CAAC0F,WAAb,CAAyBF,KAAzB;AACD,OAtBS,CAuBV;;;AACA,WAAKlN,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACzQ,OAAP,GAAiB,EAAjB;AACD,OAFD;AAGA,WAAKwE,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAc;AACnCA,QAAAA,QAAQ,CAAC1Q,OAAT,GAAmB,EAAnB;AACA0Q,QAAAA,QAAQ,CAACzQ,EAAT,GAAc,CAAd;AACD,OAHD;AAIA,WAAKoE,OAAL,GAAe,EAAf;AACA,WAAKG,SAAL,GAAiB,EAAjB;AACA,WAAKE,QAAL,GAAgB,EAAhB;;AACA,UAAI,KAAKgF,IAAT,EAAe;AACb,aAAKA,IAAL,CAAU1J,OAAV,GAAoB,EAApB;AACA,aAAK0J,IAAL,GAAY,IAAZ;AACD,OArCS,CAsCV;;;AACA4C,MAAAA,SAAS,CAACtC,KAAV,CAAgB0H,MAAhB,GAAyB,MAAzB,CAvCU,CAwCV;;AACAtF,MAAAA,MAAM,CAAC2D,SAAP,CAAiBC,GAAjB,CAAqB,KAArB,EAzCU,CA0CV;;AACA3D,MAAAA,KAAK,CAACrC,KAAN,CAAY2H,aAAZ,GAA4B,MAA5B,CA3CU,CA4CV;;AACA7F,MAAAA,WAAW,CAACiE,SAAZ,CAAsBE,MAAtB,CAA6B,KAA7B,EA7CU,CA8CV;;AACA1D,MAAAA,QAAQ,CAACwD,SAAT,CAAmBE,MAAnB,CAA0B,KAA1B,EA/CU,CAgDV;;AACAxD,MAAAA,SAAS,CAAC1J,WAAV,GAAwB,EAAxB,CAjDU,CAkDV;;AACA,WAAK0G,YAAL,GAAoB,CAApB,CAnDU,CAoDV;;AACA,WAAKiF,gBAAL,GAAwB,CAAxB;AAEA5L,MAAAA,WAAW,CAACC,WAAZ,yBAA+B,KAAK2H,UAApC;AACA8B,MAAAA,QAAQ,CAACzJ,WAAT,iBAA8B,KAAK2L,gBAAnC;;AACA,UAAMkD,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/BpO,QAAAA,UAAU,CAAC,YAAM;AACf,cAAI,MAAI,CAACkL,gBAAL,KAA0B,CAA9B,EAAiC;AAC/B,YAAA,MAAI,CAACjF,YAAL,IAAqB,CAArB;;AACA,YAAA,MAAI,CAACoI,QAAL,CAAc,MAAI,CAACpI,YAAnB,EAF+B,CAG/B;;;AACA,YAAA,MAAI,CAACqI,YAAL,GAJ+B,CAK/B;;;AACA,YAAA,MAAI,CAACC,YAAL;;AACA;AACD;;AACD,UAAA,MAAI,CAACrD,gBAAL,IAAyB,CAAzB;AACAlC,UAAAA,QAAQ,CAACzJ,WAAT,iBAA8B,MAAI,CAAC2L,gBAAnC;;AACA,kBAAQ,MAAI,CAACA,gBAAb;AACE,iBAAK,CAAL;AACE5L,cAAAA,WAAW,CAACC,WAAZ,GAA0B,sBAA1B;AACA;;AACF,iBAAK,CAAL;AACED,cAAAA,WAAW,CAACC,WAAZ,GAA0B,oBAA1B;AACA;;AACF,iBAAK,CAAL;AACED,cAAAA,WAAW,CAACC,WAAZ,GAA0B,YAA1B;AACA;;AACF;AACE;AAXJ;;AAaAc,UAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,CAAT;AACA+N,UAAAA,kBAAkB;AACnB,SA3BS,EA2BP,IA3BO,CAAV;AA4BD,OA7BD;;AA8BAA,MAAAA,kBAAkB;AAClB/N,MAAAA,SAAS,CAAC,OAAD,EAAU,KAAV,CAAT;AACAA,MAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,GAAtB,CAAT,CAzFU,CA0FV;;AACAkH,MAAAA,UAAU,CAACF,KAAX;AACAE,MAAAA,UAAU,CAACD,WAAX,GAAyB,CAAzB;AACAF,MAAAA,GAAG,CAACI,IAAJ;AACAJ,MAAAA,GAAG,CAACK,MAAJ,GAAa,GAAb,CA9FU,CA+FV;;AACA6B,MAAAA,aAAa,CAACiD,SAAd,CAAwBE,MAAxB,CAA+B,KAA/B;AACAlD,MAAAA,WAAW,CAACgD,SAAZ,CAAsBE,MAAtB,CAA6B,KAA7B;AACAjD,MAAAA,WAAW,CAAC+C,SAAZ,CAAsBC,GAAtB,CAA0B,KAA1B;AACA5D,MAAAA,MAAM,CAAC2D,SAAP,CAAiBE,MAAjB,CAAwB,KAAxB,EAnGU,CAoGV;;AACA,UAAM+B,WAAW,GAAG,oDAApB;AACAnF,MAAAA,UAAU,CAACyE,SAAX,GAAuBU,WAAvB;AACA/E,MAAAA,YAAY,CAACqE,SAAb,GAAyBU,WAAzB;AACA9E,MAAAA,YAAY,CAACoE,SAAb,GAAyBU,WAAzB;AACA7E,MAAAA,YAAY,CAACmE,SAAb,GAAyBU,WAAzB,CAzGU,CA0GV;;AACA,WAAK9C,cAAL,GAAsB,KAAtB;AACD,K,CACD;;;;8BACU;AACR,WAAK9I,OAAL,GAAe,KAAf;AACA,WAAKvD,KAAL,GAAa,IAAb,CAFQ,CAGR;AACA;AACA;;AACA,UAAI,KAAK4G,YAAL,KAAsB,EAA1B,EAA8B;AAC5BiD,QAAAA,UAAU,CAAC3J,WAAX,GAAyB,IAAzB;AACD,OAFD,MAEO;AACL2J,QAAAA,UAAU,CAAC3J,WAAX,GAAyB,KAAKiM,eAA9B;AACD;;AACDrC,MAAAA,aAAa,CAAC5J,WAAd,GAA4B,KAAKoJ,UAAjC;AACAS,MAAAA,YAAY,CAAC7J,WAAb,GAA2B,KAAKmE,OAAL,CAAa+K,SAAxC,CAZQ,CAaR;;AACA7F,MAAAA,MAAM,CAAC2D,SAAP,CAAiBE,MAAjB,CAAwB,KAAxB,EAdQ,CAeR;;AACAnE,MAAAA,WAAW,CAACiE,SAAZ,CAAsBC,GAAtB,CAA0B,KAA1B,EAhBQ,CAiBR;;AACAzD,MAAAA,QAAQ,CAACwD,SAAT,CAAmBC,GAAnB,CAAuB,KAAvB,EAlBQ,CAmBR;;AACAhE,MAAAA,IAAI,CAAC+D,SAAL,CAAeC,GAAf,CAAmB,KAAnB,EApBQ,CAqBR;;AACA1D,MAAAA,SAAS,CAACtC,KAAV,CAAgB0H,MAAhB,GAAyB,MAAzB,CAtBQ,CAuBR;;AACArF,MAAAA,KAAK,CAACrC,KAAN,CAAY2H,aAAZ,GAA4B,MAA5B;AACA,WAAKO,gBAAL;AACAtL,MAAAA,YAAY,CAAC,KAAKgI,cAAN,CAAZ;AACAhI,MAAAA,YAAY,CAAC,KAAKiI,YAAN,CAAZ;AACAjI,MAAAA,YAAY,CAAC,KAAKkI,kBAAN,CAAZ;AACD,K,CACD;;;;gCACY;AACV,UAAI,CAAC,KAAKrF,YAAV,EAAwB;AACxB,WAAKhG,OAAL,GAAe,CAAC,KAAKA,OAArB;;AACA,UAAI,KAAKA,OAAT,EAAkB;AAChBmD,QAAAA,YAAY,CAAC,KAAKgI,cAAN,CAAZ;AACAhI,QAAAA,YAAY,CAAC,KAAKiI,YAAN,CAAZ;AACAjI,QAAAA,YAAY,CAAC,KAAKkI,kBAAN,CAAZ;AACAlI,QAAAA,YAAY,CAAC,KAAK6D,mBAAN,CAAZ;AACD,OALD,MAKO;AACL,YAAI,CAAC,KAAKf,IAAV,EAAgB;AACd,eAAKyI,aAAL;AACD,SAFD,MAEO;AACL,eAAKC,WAAL;AACD;;AACD,aAAKN,YAAL;AACA,aAAKC,YAAL;AACA,YAAMrI,IAAI,GAAG9G,IAAI,CAAC8G,IAAlB;;AACA,YAAIA,IAAI,CAACpJ,aAAT,EAAwB;AACtBsG,UAAAA,YAAY,CAAC8C,IAAI,CAAClJ,WAAN,CAAZ;AACAkJ,UAAAA,IAAI,CAAClH,MAAL;AACD,SAHD,MAGO;AACLoE,UAAAA,YAAY,CAAC8C,IAAI,CAACjJ,cAAN,CAAZ;AACAiJ,UAAAA,IAAI,CAAC9F,SAAL;AACD;AACF;AACF;;;uCACkB;AACjB,UAAMyM,IAAI,GAAG,KAAK3F,UAAlB;AACA,UAAM2H,KAAK,GAAG,KAAK5I,YAAnB;AACA,UAAM6I,OAAO,GAAG,KAAKnG,UAArB;AACA,UAAM7J,MAAM,GAAG,KAAK4E,OAAL,CAAa+K,SAA5B;AACA,UAAIvI,IAAJ;;AACA,UAAI2I,KAAK,KAAK,CAAd,EAAiB;AACf3I,QAAAA,IAAI,GAAG,IAAP;AACD,OAFD,MAEO;AACLA,QAAAA,IAAI,GAAG,KAAKsF,eAAZ;AACD;;AACDuD,MAAAA,KAAK,CAACC,GAAN,CAAU,sGAAV,EAAkH;AAChHC,QAAAA,MAAM,EAAE;AACNpC,UAAAA,IAAI,EAAJA,IADM;AAENgC,UAAAA,KAAK,EAALA,KAFM;AAGNC,UAAAA,OAAO,EAAPA,OAHM;AAINhQ,UAAAA,MAAM,EAANA,MAJM;AAKNoH,UAAAA,IAAI,EAAJA;AALM;AADwG,OAAlH,EASCgJ,IATD,CASM,UAACC,GAAD,EAAS;AACb,YAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACA/F,QAAAA,UAAU,CAACyE,SAAX,0BACOsB,IAAI,CAACC,IADZ,wCAEiBD,IAAI,CAACE,YAFtB;AAID,OAfD;AAgBD;;;sCACiB;AAChBP,MAAAA,KAAK,CAACC,GAAN,CAAU,oGAAV,EACGE,IADH,CACQ,UAACC,GAAD,EAAS;AACb,YAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACA,YAAMG,aAAa,GAAGH,IAAI,CAACI,SAA3B;AACA,YAAMC,cAAc,GAAGL,IAAI,CAACM,UAA5B;AACA,YAAMC,aAAa,GAAGP,IAAI,CAACQ,SAA3B;AACA,YAAIC,aAAa,GAAG,EAApB;;AACA,iBAASC,aAAT,CAAuBjD,IAAvB,EAA6BkD,IAA7B,EAAmCC,GAAnC,EAAwClR,MAAxC,EAAgDoH,IAAhD,EAAsD;AACpD2J,UAAAA,aAAa,qDACehD,IADf,mJAIkBkD,IAJlB,sLAQkBC,GARlB,0LAYkBlR,MAZlB,wLAgBkBoH,IAhBlB,uHAAb;AAqBD;;AACD4J,QAAAA,aAAa,MAAb,4BAAiBP,aAAjB;AACA9F,QAAAA,YAAY,CAACqE,SAAb,GAAyB+B,aAAzB;AACAC,QAAAA,aAAa,MAAb,4BAAiBL,cAAjB;AACA/F,QAAAA,YAAY,CAACoE,SAAb,GAAyB+B,aAAzB;AACAC,QAAAA,aAAa,MAAb,4BAAiBH,aAAjB;AACAhG,QAAAA,YAAY,CAACmE,SAAb,GAAyB+B,aAAzB;AACD,OApCH;AAqCD,K,CACD;;;;mCACe;AAAA;;AACb;AACA,UAAI,KAAKrH,IAAT,EAAe;AACf,WAAK8C,kBAAL,GAA0BtL,UAAU,CAAC,YAAM;AACzC,QAAA,MAAI,CAACuL,qBAAL,IAA8B,CAA9B,CADyC,CAEzC;;AACA,YAAI,MAAI,CAACA,qBAAL,KAA+B,CAAnC,EAAsC;AACpC,cAAI0E,QAAJ,CADoC,CAEpC;;AACA,cAAI,MAAI,CAACvM,OAAL,CAAagD,MAAb,GAAsB,CAA1B,EAA6B;AAC3BuJ,YAAAA,QAAQ,GAAGpI,KAAK,CAAC/H,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAV,CAAhB;AACD,WAFD,MAEO;AACLmQ,YAAAA,QAAQ,GAAGpI,KAAK,CAAC/H,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAV,CAAhB;AACD;;AACD,UAAA,MAAI,CAAC0I,IAAL,GAAY,IAAI0H,IAAJ,CAAS;AACnBC,YAAAA,GAAG,mBAAYF,QAAZ,SADgB;AAEnB/T,YAAAA,WAAW,EAAEkO,iBAFM;AAGnBjO,YAAAA,eAAe,EAAE2D,SAAS,CAAC,CAAD,EAAI,GAAJ;AAHP,WAAT,CAAZ,CARoC,CAapC;;AACA,UAAA,MAAI,CAACyL,qBAAL,GAA6B,GAA7B;AACD;;AACD,QAAA,MAAI,CAAC+C,YAAL;AACD,OApBmC,EAoBjC,GApBiC,CAApC;AAqBD,K,CACD;;;;oCACgB;AAAA;;AACd,WAAKlD,cAAL,GAAsBpL,UAAU,CAAC,YAAM;AACrC,YAAI,MAAI,CAACkL,gBAAL,KAA0B,CAA9B,EAAiC;AAC/B,UAAA,MAAI,CAACjF,YAAL,IAAqB,CAArB;;AACA,UAAA,MAAI,CAACoI,QAAL,CAAc,MAAI,CAACpI,YAAnB;;AACA;AACD;;AACD,QAAA,MAAI,CAACiF,gBAAL,IAAyB,CAAzB;AACAlC,QAAAA,QAAQ,CAACzJ,WAAT,gBAA6B,MAAI,CAAC2L,gBAAL,GAAwB,EAAxB,cAAiC,MAAI,CAACA,gBAAtC,IAA2D,MAAI,CAACA,gBAA7F;;AACA,QAAA,MAAI,CAACyD,aAAL;AACD,OAT+B,EAS7B,IAT6B,CAAhC;AAUD;;;kCACa;AAAA;;AACZ,WAAKtD,YAAL,GAAoBrL,UAAU,CAAC,YAAM;AACnC,QAAA,MAAI,CAACwL,eAAL,IAAwB,CAAxB;AACAxC,QAAAA,QAAQ,CAACzJ,WAAT,gBAA6B,MAAI,CAACiM,eAAL,GAAuB,EAAvB,cAAgC,MAAI,CAACA,eAArC,IAAyD,MAAI,CAACA,eAA3F;;AACA,QAAA,MAAI,CAACoD,WAAL;AACD,OAJ6B,EAI3B,IAJ2B,CAA9B;AAKD,K,CACD;;;;0CACsB;AAAA;;AACpB,WAAKzD,cAAL,GAAsBnL,UAAU,CAAC,YAAM;AACrC,YAAI,MAAI,CAACC,OAAL,IAAgB,CAAC,MAAI,CAAC2C,OAA1B,EAAmC;AACjC,UAAA,MAAI,CAAC0J,mBAAL;;AACA;AACD;;AACD,YAAM8D,MAAM,GAAG/J,YAAY,CAACC,WAA5B;;AACA,YAAI8J,MAAM,GAAG,GAAb,EAAkB;AAChB,cAAMC,aAAa,GAAGD,MAAM,GAAG,CAA/B;AACA/J,UAAAA,YAAY,CAACG,KAAb,CAAmBC,KAAnB,aAA8B4J,aAA9B;AACD;;AACD,QAAA,MAAI,CAAC/D,mBAAL;AACD,OAX+B,EAW7B,GAX6B,CAAhC;AAYD,K,CACD;;;;mCACe;AAAA;;AACbhN,MAAAA,WAAW,CAACC,WAAZ,GAA0B,EAA1B,CADa,CAEb;AACA;;AACA,WAAK0H,mBAAL,GAA2BjH,UAAU,CAAC,YAAM;AAC1C,QAAA,OAAI,CAACuO,YAAL;AACD,OAFoC,EAElC,IAFkC,CAArC;AAGD,K,CACD;;;;6BACS+B,I,EAAmB;AAAA;;AAAA,UAAbxM,OAAa,uEAAH,CAAG;AAC1B9D,MAAAA,UAAU,CAAC,YAAM;AACf,gBAAQsQ,IAAR;AACE,eAAK,QAAL;AAAe;AACb,cAAA,OAAI,CAACzP,OAAL,CAAaP,IAAb,CAAkB,IAAIQ,MAAJ,CAAW;AAC3B5E,gBAAAA,WAAW,EAAE4D,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAxB,CADK;AAE3BjO,gBAAAA,eAAe,EAAE2D,SAAS,CAAC,CAAD,EAAI,GAAJ,CAFC;AAG3BxD,gBAAAA,gBAAgB,EAAE,EAAEwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAApB,CAHS;AAI3B1D,gBAAAA,MAAM,EAAE0D,SAAS,CAAC,CAAD,EAAI,GAAJ;AAJU,eAAX,CAAlB;;AAMA;AACD;;AACD,eAAK,UAAL;AAAiB;AACf;AACA,kBAAMyQ,KAAK,GAAGzQ,SAAS,CAAC,CAAD,EAAI,GAAJ,CAAvB;;AACA,cAAA,OAAI,CAACkB,SAAL,CAAeV,IAAf,CAAoB,IAAIW,QAAJ,CAAa;AAC/B/E,gBAAAA,WAAW,EAAE4D,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAxB,CADS;AAE/BjO,gBAAAA,eAAe,EAAEoU,KAFc;AAG/BjU,gBAAAA,gBAAgB,EAAEwD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAHL;AAI/B1D,gBAAAA,MAAM,EAAEmU;AAJuB,eAAb,CAApB;;AAMA;AACD;;AACD,eAAK,SAAL;AAAgB;AACd,kBAAMhD,OAAO,GAAGzN,SAAS,CAACsK,iBAAiB,GAAG,CAArB,EAAwBA,iBAAiB,GAAG,GAA5C,CAAzB;AACA,kBAAM3J,WAAW,GAAGX,SAAS,CAAC,CAAD,EAAI,GAAJ,CAA7B;AACA,kBAAM1D,MAAM,GAAG0D,SAAS,CAAC,CAAD,EAAI,GAAJ,CAAxB;;AACA,cAAA,OAAI,CAACoB,QAAL,CAAcZ,IAAd,CAAmB,IAAIa,OAAJ,CAAY;AAC7BjF,gBAAAA,WAAW,EAAE;AACXkF,kBAAAA,KAAK,EAAEmM,OADI;AAEXlM,kBAAAA,GAAG,EAAEkM,OAFM;AAGXjM,kBAAAA,KAAK,EAAEiM;AAHI,iBADgB;AAM7BpR,gBAAAA,eAAe,EAAE;AACfiF,kBAAAA,KAAK,EAAEX,WADQ;AAEfY,kBAAAA,GAAG,EAAEZ,WAFU;AAGfa,kBAAAA,KAAK,EAAEb;AAHQ,iBANY;AAW7BrE,gBAAAA,MAAM,EAAE;AACNgF,kBAAAA,KAAK,EAAEhF,MADD;AAENiF,kBAAAA,GAAG,EAAEjF,MAFC;AAGNkF,kBAAAA,KAAK,EAAElF;AAHD,iBAXqB;AAgB7BG,gBAAAA,OAAO,EAAEuD,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB;AAhBE,eAAZ,CAAnB;;AAkBA;AACD;;AACD;AACE;AA9CJ;AAgDD,OAjDS,EAiDPgE,OAAO,GAAG,IAjDH,CAAV;AAkDD,K,CACD;;;;8BACU+K,K,EAAO/K,O,EAAS;AACxBmF,MAAAA,SAAS,CAAC1J,WAAV,kBAAgCsP,KAAhC;AACA,WAAK3D,gBAAL,GAAwBpH,OAAxB;AACAkF,MAAAA,QAAQ,CAACzJ,WAAT,gBAA6B,KAAK2L,gBAAlC;AACA,WAAKyD,aAAL;AACD,K,CACD;;;;6BACSE,K,EAAO;AACd,cAAQA,KAAR;AACE,aAAK,CAAL;AACE,eAAK2B,SAAL,CAAe,IAAf,EAAqB,EAArB,EADF,CAEE;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,CAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,SAAd,EAAyB,CAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,CAAL;AACE,eAAKD,SAAL,CAAe,IAAf,EAAqB,EAArB;AACA,eAAKC,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,CAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,QAAd,EAAwB,EAAxB;AACA,eAAKA,QAAL,CAAc,UAAd,EAA0B,EAA1B;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA,eAAKA,QAAL,CAAc,SAAd,EAAyB,EAAzB;AACA;;AACF,aAAK,EAAL;AACExH,UAAAA,SAAS,CAAC1J,WAAV,GAAwB,SAAxB;AACA,cAAMM,SAAS,GAAGC,SAAS,CAAC,CAAD,EAAI,GAAJ,CAA3B;AACA,eAAKoG,IAAL,GAAY,IAAInK,IAAJ,CAAS;AACnBG,YAAAA,WAAW,EAAE4D,SAAS,CAACqK,KAAK,GAAG,CAAT,EAAYA,KAAK,GAAG,GAApB,CADH;AAEnBhO,YAAAA,eAAe,EAAE0D,SAFE;AAGnBzD,YAAAA,MAAM,EAAEyD,SAAS,GAAG;AAHD,WAAT,CAAZ;AAKA,eAAK+O,WAAL;AACA;;AACF;AACE;AAzGJ;;AA2GAvO,MAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,CAAT;AACD;;;sCACiB;AAChB;AACA,UAAI6G,UAAU,CAAC2G,KAAf,EAAsB;AACpB,eAAO,IAAP;AACD,OAFD,MAEO;AACL3G,QAAAA,UAAU,CAACqF,SAAX,CAAqBC,GAArB,CAAyB,MAAzB;AACAnM,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,CAAT;AACAA,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,GAAtB,CAAT;AACA,eAAO,KAAP;AACD;AACF;;;;KAKH;;;AACA,SAASqQ,UAAT,GAAsB;AACpBtR,EAAAA,IAAI,GAAG,IAAI2L,IAAJ,EAAP;AACAV,EAAAA,UAAU;AACVjL,EAAAA,IAAI,CAACuR,IAAL;AACD,C,CAED;;;AACA7E,MAAM,CAACH,gBAAP,CAAwB,MAAxB,EAAgC+E,UAAhC;AACA5E,MAAM,CAACH,gBAAP,CAAwB,QAAxB,EAAkCtB,UAAlC,E,CAIA;;AACA,IAAIoD,YAAY,GAAG,EAAnB;AACA,IAAIrI,cAAc,GAAG,CAArB;;AACA,SAASwG,eAAT,CAAyBgF,GAAzB,EAA8B;AAC5BnD,EAAAA,YAAY,CAACjQ,CAAb,GAAiBoT,GAAG,CAACpT,CAAJ,GAAQwM,EAAE,GAAG,CAA9B;AACAyD,EAAAA,YAAY,CAAChQ,CAAb,GAAiBmT,GAAG,CAACnT,CAAJ,GAAQwM,EAAE,GAAG,CAA9B;AACA,MAAMsG,KAAK,GAAG9R,IAAI,CAACoS,KAAL,CAAWpD,YAAY,CAAChQ,CAAxB,EAA2BgQ,YAAY,CAACjQ,CAAxC,CAAd;AACA4H,EAAAA,cAAc,GAAGmL,KAAK,GAAG,CAAR,GAAaA,KAAK,GAAG,IAAI9R,IAAI,CAACC,EAA9B,GAAoC6R,KAArD;AACD;;AAAA;AAED,IAAIO,eAAe,GAAG,IAAInU,IAAJ,EAAtB;;AACA,SAASkP,WAAT,GAAuB;AACrB,MAAIzM,IAAI,CAACa,OAAT,EAAkB;AAClBb,EAAAA,IAAI,CAACsE,OAAL,CAAaxD,KAAb;AACD;;AAAA;;AAED,SAAS6L,WAAT,CAAqB6E,GAArB,EAA0B;AACxB,MAAIxR,IAAI,CAACwD,OAAT,EAAkB;AAChB,QAAIgO,GAAG,CAACG,GAAJ,KAAY,GAAhB,EAAqB;AACnB3R,MAAAA,IAAI,CAACsE,OAAL,CAAaxD,KAAb;AACD;;AACD,QAAI0Q,GAAG,CAACG,GAAJ,KAAY,GAAhB,EAAqB;AACnB3R,MAAAA,IAAI,CAAC4R,SAAL;AACD;AACF,GAPD,MAOO;AACL,QAAIJ,GAAG,CAACG,GAAJ,KAAY,OAAhB,EAAyB;AACvB,UAAI,CAAC3R,IAAI,CAAC6M,eAAL,EAAL,EAA6B;AAC7B7M,MAAAA,IAAI,CAAC8M,SAAL;AACD;AACF;;AACD,MAAI0E,GAAG,CAACG,GAAJ,KAAY,GAAhB,EAAqB;AACnB3R,IAAAA,IAAI,CAACqM,OAAL,GAAe,CAACrM,IAAI,CAACqM,OAArB;AACArE,IAAAA,GAAG,CAAC6J,KAAJ,GAAY,CAAC7J,GAAG,CAAC6J,KAAjB;AACA1J,IAAAA,UAAU,CAAC0J,KAAX,GAAmB,CAAC1J,UAAU,CAAC0J,KAA/B;AACD;AACF;;AAED,SAASjF,gBAAT,GAA4B;AAC1B9E,EAAAA,UAAU,CAACyE,gBAAX,CAA4B,OAA5B,EAAqC,YAAY;AAC/CzE,IAAAA,UAAU,CAACqF,SAAX,CAAqBE,MAArB,CAA4B,OAA5B;AACAvF,IAAAA,UAAU,CAACqF,SAAX,CAAqBE,MAArB,CAA4B,MAA5B;AACD,GAHD;AAKAvF,EAAAA,UAAU,CAACyE,gBAAX,CAA4B,UAA5B,EAAwC,YAAY;AAClD,QAAI,CAACzE,UAAU,CAAC2G,KAAhB,EAAuB;AACrB3G,MAAAA,UAAU,CAACqF,SAAX,CAAqBC,GAArB,CAAyB,OAAzB;AACD;AACF,GAJD;AAMAtF,EAAAA,UAAU,CAACyE,gBAAX,CAA4B,OAA5B,EAAqC,YAAY;AAC/C,QAAIzE,UAAU,CAAC2G,KAAf,EAAsB;AACpB/F,MAAAA,QAAQ,CAACyE,SAAT,CAAmBC,GAAnB,CAAuB,OAAvB;AACD,KAFD,MAEO;AACL1E,MAAAA,QAAQ,CAACyE,SAAT,CAAmBE,MAAnB,CAA0B,OAA1B;AACD;AACF,GAND;AAOD;;;;;;;;;ICj5BKtL,O;;;AACJ,mBAAYnF,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,WAAW,EAAE;AACXkF,QAAAA,KAAK,EAAE,CADI;AAEXC,QAAAA,GAAG,EAAE,CAFM;AAGXC,QAAAA,KAAK,EAAE;AAHI,OADH;AAMVnF,MAAAA,eAAe,EAAE;AACfiF,QAAAA,KAAK,EAAE,CADQ;AAEfC,QAAAA,GAAG,EAAE,CAFU;AAGfC,QAAAA,KAAK,EAAE;AAHQ,OANP;AAWVlF,MAAAA,MAAM,EAAE;AACNgF,QAAAA,KAAK,EAAE,CADD;AAENC,QAAAA,GAAG,EAAE,CAFC;AAGNC,QAAAA,KAAK,EAAE;AAHD,OAXE;AAgBV7E,MAAAA,EAAE,EAAE;AACF2E,QAAAA,KAAK,EAAE,CADL;AAEFC,QAAAA,GAAG,EAAE,CAFH;AAGFC,QAAAA,KAAK,EAAE;AAHL,OAhBM;AAqBVa,MAAAA,YAAY,EAAE,CArBJ;AAsBV5F,MAAAA,OAAO,EAAE,CAtBC;AAuBViF,MAAAA,KAAK,EAAEvD,WAAW,CAACG,GAvBT;AAwBV;AACA8S,MAAAA,YAAY,EAAE,IAzBJ;AA0BV7U,MAAAA,KAAK,EAAE,CA1BG;AA2BVO,MAAAA,WAAW,EAAE,IA3BH;AA4BVmE,MAAAA,cAAc,EAAE;AA5BN,KAAZ;AA8BA7D,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;8BAGSqU,I,EAAM;AACd,aAAO;AACL9S,QAAAA,CAAC,EAAG0M,KAAK,GAAG,CAAT,GAAc,KAAKhO,WAAL,CAAiBoU,IAAjB,IAAyB7R,IAAI,CAACgE,GAAL,CAAS,KAAKtG,eAAL,CAAqBmU,IAArB,IAA6B5S,OAAtC,CADrC;AAELD,QAAAA,CAAC,EAAG0M,KAAK,GAAG,CAAT,GAAc,KAAKjO,WAAL,CAAiBoU,IAAjB,IAAyB7R,IAAI,CAACiE,GAAL,CAAS,KAAKvG,eAAL,CAAqBmU,IAArB,IAA6B5S,OAAtC;AAFrC,OAAP;AAID;;;2BAGM;AACL,UAAI,KAAKjB,EAAL,CAAQ2E,KAAZ,EAAmB;AACjBhE,QAAAA,GAAG,CAACC,IAAJ;AACAD,QAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKC,SAAL,CAAe,OAAf,EAAwBC,CAAtC,EAAyC,KAAKD,SAAL,CAAe,OAAf,EAAwBE,CAAjE;AACAL,QAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,CAAYgF,KAAZ,GAAoB1D,OAA/B;AACAN,QAAAA,GAAG,CAACf,KAAJ,CAAU,KAAKA,KAAf,EAAsB,KAAKA,KAA3B,EAJiB,CAKjB;;AACAe,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,QAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKY,IAAI,CAACgE,GAAL,CAAS,IAAI/E,OAAb,CAAhB,EAAuC,KAAKe,IAAI,CAACiE,GAAL,CAAS,IAAIhF,OAAb,CAA5C;AACAN,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACW,SAAJ;AACAX,QAAAA,GAAG,CAACY,IAAJ,GAfiB,CAgBjB;;AACAZ,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,QAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgB,CAAC,CAAjB;AACAT,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,QAAAA,GAAG,CAACW,SAAJ;AACAX,QAAAA,GAAG,CAACY,IAAJ,GAzBiB,CA0BjB;;AACAZ,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,QAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKY,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAAhB,EAAwC,KAAKe,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAA7C;AACAN,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,QAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,QAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,GAAZ,EAAiB,CAAjB;AACAV,QAAAA,GAAG,CAACW,SAAJ;AACAX,QAAAA,GAAG,CAACY,IAAJ,GAlCiB,CAmCjB;;AACAmT,QAAAA,aAAa,CAAC;AACZ3T,UAAAA,CAAC,EAAE,CAAC,GADQ;AAEZC,UAAAA,CAAC,EAAE,CAAC;AAFQ,SAAD,CAAb;AAIAL,QAAAA,GAAG,CAACwB,OAAJ;AACD,OAzCD,MAyCO;AACL;AACA,YAAI,KAAKnC,EAAL,CAAQ4E,GAAZ,EAAiB;AACfjE,UAAAA,GAAG,CAACC,IAAJ;AACAD,UAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKC,SAAL,CAAe,KAAf,EAAsBC,CAApC,EAAuC,KAAKD,SAAL,CAAe,KAAf,EAAsBE,CAA7D;AACAL,UAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,CAAYiF,GAAZ,GAAkB3D,OAA7B,EAHe,CAIf;;AACAN,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,UAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKY,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAAhB,EAAwC,KAAKe,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAA7C;AACAN,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACW,SAAJ;AACAX,UAAAA,GAAG,CAACY,IAAJ,GAZe,CAaf;;AACAZ,UAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,GAAZ,EAAiB,CAAjB;AACAT,UAAAA,GAAG,CAACuF,UAAJ,CAAe,GAAf,EAAoB,EAApB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACW,SAAJ;AACAX,UAAAA,GAAG,CAACY,IAAJ,GArBe,CAsBf;;AACAmT,UAAAA,aAAa,CAAC;AACZ3T,YAAAA,CAAC,EAAE,CAAC,EADQ;AAEZC,YAAAA,CAAC,EAAE,CAAC;AAFQ,WAAD,EAGV,GAHU,CAAb;AAIAL,UAAAA,GAAG,CAACwB,OAAJ;AACD,SA9BI,CA+BL;;;AACA,YAAI,KAAKnC,EAAL,CAAQ6E,KAAZ,EAAmB;AACjBlE,UAAAA,GAAG,CAACC,IAAJ;AACAD,UAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKC,SAAL,CAAe,OAAf,EAAwBC,CAAtC,EAAyC,KAAKD,SAAL,CAAe,OAAf,EAAwBE,CAAjE;AACAL,UAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,CAAYkF,KAAZ,GAAoB5D,OAA/B,EAHiB,CAIjB;;AACAN,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,UAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKY,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAAhB,EAAwC,KAAKe,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAA7C;AACAN,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAvF,UAAAA,GAAG,CAACW,SAAJ;AACAX,UAAAA,GAAG,CAACY,IAAJ,GAZiB,CAajB;;AACAZ,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,UAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKY,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAAhB,EAAwC,KAAKe,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAA7C;AACAN,UAAAA,GAAG,CAACuF,UAAJ,CAAe,GAAf,EAAoB,EAApB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,UAAAA,GAAG,CAACW,SAAJ;AACAX,UAAAA,GAAG,CAACY,IAAJ,GApBiB,CAqBjB;;AACAZ,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACO,SAAJ,GAAgB,2BAAhB;AACAP,UAAAA,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgB,CAAC,CAAjB;AACAT,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,CAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,UAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,EAAnB;AACAvF,UAAAA,GAAG,CAACW,SAAJ;AACAX,UAAAA,GAAG,CAACY,IAAJ,GA9BiB,CA+BjB;;AACAmT,UAAAA,aAAa,CAAC;AACZ3T,YAAAA,CAAC,EAAE,EADS;AAEZC,YAAAA,CAAC,EAAE,CAAC;AAFQ,WAAD,EAGV,GAHU,CAAb;AAIAL,UAAAA,GAAG,CAACwB,OAAJ;AACD;AACF;AACF;;;2BAGMK,G,EAAK;AACV,WAAKrC,WAAL,IAAoB,KAAKoC,MAAL,CAAY,KAAK+B,cAAjB,CAApB;AACA,WAAKnE,WAAL,GAAmB,KAAnB;AACAoF,MAAAA,YAAY,CAACa,QAAb,CAAsB,IAAtB,EAHU,CAIV;;AACA,UAAI,KAAKpG,EAAL,CAAQ2E,KAAZ,EAAmB;AACjB,aAAKhF,MAAL,CAAYgF,KAAZ,GAAoB,KAAKhF,MAAL,CAAYiF,GAAZ,GAAkB,KAAKjF,MAAL,CAAYkF,KAAZ,IAAqB,KAAK/E,OAAhE,CADiB,CAEjB;;AACA6C,QAAAA,IAAI,CAACwD,OAAL,IAAgBZ,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAAC8B,QAA7B,EAAuCjC,GAAvC,EAA4C,OAA5C,EAAqD,KAAK/C,WAAL,CAAiBkF,KAAtE,EAA6E,KAAKjF,eAAL,CAAqBiF,KAAlG,CAAhB;AACD,OAJD,MAIO;AACL;AACA;AACA,YAAI,KAAK8P,YAAT,EAAuB;AACrB;AACA;AACA,cAAME,eAAe,GAAG3S,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,CAAvB,GAA2B,CAAC,CAApD;AACA/B,UAAAA,SAAS,CAACC,EAAV,CAAa,KAAKtD,eAAlB,EAAmC,GAAnC,EAAwC;AACtCkF,YAAAA,GAAG,cAAOvB,SAAS,CAAC,EAAD,EAAK,EAAL,CAAT,GAAoBsR,eAA3B,CADmC;AAEtC9P,YAAAA,KAAK,cAAOxB,SAAS,CAAC,EAAD,EAAK,EAAL,CAAT,GAAoBsR,eAA3B,CAFiC;AAGtC1R,YAAAA,IAAI,EAAE2R,IAAI,CAACzR;AAH2B,WAAxC;AAKAJ,UAAAA,SAAS,CAACC,EAAV,CAAa,KAAKvD,WAAlB,EAA+B,GAA/B,EAAoC;AAClCmF,YAAAA,GAAG,cAAOvB,SAAS,CAAC,EAAD,EAAK,GAAL,CAAhB,CAD+B;AAElCwB,YAAAA,KAAK,cAAOxB,SAAS,CAAC,EAAD,EAAK,GAAL,CAAhB,CAF6B;AAGlCJ,YAAAA,IAAI,EAAE2R,IAAI,CAACzR;AAHuB,WAApC;AAKAJ,UAAAA,SAAS,CAACC,EAAV,CAAa,KAAKrD,MAAlB,EAA0B,GAA1B,EAA+B;AAC7BiF,YAAAA,GAAG,cAAOvB,SAAS,CAAC,GAAD,EAAM,GAAN,CAAhB,CAD0B;AAE7BwB,YAAAA,KAAK,cAAOxB,SAAS,CAAC,GAAD,EAAM,GAAN,CAAhB,CAFwB;AAG7BJ,YAAAA,IAAI,EAAE2R,IAAI,CAACzR;AAHkB,WAA/B,EAdqB,CAmBrB;;AACA,eAAKsR,YAAL,GAAoB,KAApB;AACD,SAxBI,CAyBL;;;AACA,YAAI,KAAKzU,EAAL,CAAQ4E,GAAZ,EAAiB;AACf;AACA,eAAKjF,MAAL,CAAYiF,GAAZ,IAAmB,KAAK9E,OAAL,GAAe,GAAlC;AACAyF,UAAAA,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAAC8B,QAA7B,EAAuCjC,GAAvC,EAA4C,KAA5C,EAAmD,KAAK/C,WAAL,CAAiBmF,GAApE,EAAyE,KAAKlF,eAAL,CAAqBkF,GAA9F;AACD,SA9BI,CA+BL;;;AACA,YAAI,KAAK5E,EAAL,CAAQ6E,KAAZ,EAAmB;AACjB;AACA,eAAKlF,MAAL,CAAYkF,KAAZ,IAAqB,KAAK/E,OAAL,GAAe,GAApC;AACAyF,UAAAA,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAAC8B,QAA7B,EAAuCjC,GAAvC,EAA4C,OAA5C,EAAqD,KAAK/C,WAAL,CAAiBoF,KAAtE,EAA6E,KAAKnF,eAAL,CAAqBmF,KAAlG;AACD;AACF;AACF;;;2BAGMP,c,EAAgB;AACrBzB,MAAAA,WAAW,CAACC,WAAZ,GAA0B,mBAA1B;AACAC,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBpD,QAAAA,KAAK,EAAE,CADe;AAEtBqD,QAAAA,IAAI,EAAE2D,IAAI,CAACzD,OAAL,CAAa0D,MAAb,CAAoB,GAApB;AAFgB,OAAxB;;AAIA,UAAIvC,cAAJ,EAAoB;AAClB,YAAMlB,SAAS,GAAGC,SAAS,CAAC,EAAD,EAAK,EAAL,CAA3B;AACA,YAAMwR,IAAI,GAAGxR,SAAS,CAAC,EAAD,EAAK,EAAL,CAAtB;AACAN,QAAAA,SAAS,CAACC,EAAV,CAAa,KAAKtD,eAAlB,EAAmC,GAAnC,EAAwC;AACtCiF,UAAAA,KAAK,cAAOvB,SAAP,CADiC;AAEtCwB,UAAAA,GAAG,cAAOxB,SAAP,CAFmC;AAGtCyB,UAAAA,KAAK,cAAOzB,SAAP,CAHiC;AAItCH,UAAAA,IAAI,EAAEqD,MAAM,CAACnD;AAJyB,SAAxC;AAMAJ,QAAAA,SAAS,CAACC,EAAV,CAAa,KAAKvD,WAAlB,EAA+B,GAA/B,EAAoC;AAClCkF,UAAAA,KAAK,cAAOkQ,IAAP,CAD6B;AAElCjQ,UAAAA,GAAG,cAAOiQ,IAAP,CAF+B;AAGlChQ,UAAAA,KAAK,cAAOgQ,IAAP,CAH6B;AAIlC5R,UAAAA,IAAI,EAAEqD,MAAM,CAACnD;AAJqB,SAApC;AAMD;;AACDR,MAAAA,IAAI,CAACwD,OAAL,IAAgBvC,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,CAAzB;AACD;;;;;;;;;;;;;AC1OH;IACM6P,I;;;AACJ,gBAAYlU,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVsV,MAAAA,GAAG,EAAE,IAAIC,KAAJ,EADK;AAEVrB,MAAAA,GAAG,EAAE,EAFK;AAGVjU,MAAAA,WAAW,EAAE,CAHH;AAIViG,MAAAA,YAAY,EAAE,CAJJ;AAKVhG,MAAAA,eAAe,EAAE,CALP;AAMV+F,MAAAA,CAAC,EAAE;AANO,KAAZ;AAQAhF,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACL,UAAI,CAAC,KAAKsV,GAAL,CAASpB,GAAd,EAAmB;AACjB,aAAKoB,GAAL,CAASpB,GAAT,GAAe,KAAKA,GAApB;AACD;;AACD,UAAI,KAAKoB,GAAL,CAASE,QAAb,EAAuB;AACrBrU,QAAAA,GAAG,CAACC,IAAJ;AACAD,QAAAA,GAAG,CAACE,SAAJ,CAAcC,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CAAhE,EAAmED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB,CAArH;AACAL,QAAAA,GAAG,CAACsU,SAAJ,CAAc,KAAKH,GAAnB,EAAwB,CAAxB,EAA2B,CAA3B;AACAnU,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACkB,WAAJ,GAAkB,0BAAlB;AACAlB,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,KAAK+S,GAAL,CAAS9K,KAAT,GAAiB,CAAzB,EAA4B,KAAK8K,GAAL,CAASjH,MAAT,GAAkB,CAA9C,EAAiD,KAAKpI,CAAtD,EAAyD,CAAzD,EAA4DzD,IAAI,CAACC,EAAL,GAAU,CAAtE;AACAtB,QAAAA,GAAG,CAACuB,MAAJ;AACAvB,QAAAA,GAAG,CAACwB,OAAJ;AACD;AACF;;;6BACQ;AACP,UAAI,CAAC,KAAKuD,YAAV,EAAwB;AACtB,YAAM2B,OAAO,GAAGhE,SAAS,CAAC,CAAD,EAAI,EAAJ,CAAzB;AACA,aAAKqC,YAAL,GAAoB,EAAEiI,iBAAiB,IAAItG,OAAO,GAAGC,SAAd,CAAnB,CAApB;AACD;;AACD,WAAK7H,WAAL,IAAoB,KAAKiG,YAAzB,CALO,CAMP;;AACA,UAAMuB,OAAO,GAAGtE,IAAI,CAACsE,OAArB,CAPO,CAQP;;AACA,UAAK,KAAKxH,WAAL,GAAmB,KAAKgG,CAAzB,IAAgCwB,OAAO,CAACxB,CAAR,GAAawB,OAAO,CAACE,aAAR,GAAwB,CAAzE,EAA8E;AAC5E;AACAxE,QAAAA,IAAI,CAACoJ,IAAL,GAAY,EAAZ;AACA,YAAMyH,QAAQ,GAAG,KAAKE,GAAL,CAASwB,OAAT,CAAiB,SAAjB,EAA4B,EAA5B,EAAgCC,KAAhC,CAAsC,GAAtC,EAA2C,CAA3C,CAAjB;AACAlO,QAAAA,OAAO,CAACmO,OAAR,CAAgB5B,QAAhB;AACD;AACF;;;;;;;;;;;;;IC5CG3C,O;;;AACJ,mBAAYtR,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVuF,MAAAA,KAAK,EAAEvD,WAAW,CAACE,KADT;AAEV;AACA+D,MAAAA,CAAC,EAAE,IAHO;AAIV;AACAuD,MAAAA,OAAO,EAAE,EALC;AAMV;AACA7B,MAAAA,aAAa,EAAE,CAPL;AAQV;AACA8B,MAAAA,WAAW,EAAE,CATH;AAUVjF,MAAAA,WAAW,EAAE,CAVH;AAWVjE,MAAAA,OAAO,EAAE,EAXC;AAYViS,MAAAA,SAAS,EAAE,CAZD;AAaV/H,MAAAA,MAAM,EAAE,CAbE;AAcVxB,MAAAA,KAAK,EAAE,EAdG;AAeVqB,MAAAA,UAAU,EAAE,KAfF;AAgBVZ,MAAAA,SAAS,EAAE,KAhBD;AAiBVmL,MAAAA,eAAe,EAAE,IAAInU,IAAJ;AAjBP,KAAZ;AAmBAO,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACL,UAAI,CAACmD,IAAI,CAACwD,OAAN,IAAiB,CAACxD,IAAI,CAACC,KAA3B,EAAkC;AAClCjC,MAAAA,GAAG,CAACC,IAAJ,GAFK,CAGL;;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc4M,KAAK,GAAG,CAAtB,EAAyBC,KAAK,GAAG,CAAjC;AACA/M,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACmH,WAAJ,GAAkB,0BAAlB;AACAnH,MAAAA,GAAG,CAACoH,UAAJ,GAAiB,EAAjB;AACApH,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,KAAKqF,aAArB;AACAxG,MAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAK0D,CAAnB,EAAsB,CAAtB,EAAyBzD,IAAI,CAACC,EAAL,GAAU,CAAnC;;AACA,UAAI,CAAC,KAAK6H,UAAV,EAAsB;AACpBnJ,QAAAA,GAAG,CAACkB,WAAJ,GAAkB,KAAKkD,KAAvB;AACD,OAFD,MAEO;AACLpE,QAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACG,GAA9B;AACA,aAAKmI,UAAL,GAAkB,KAAlB;AACD;;AACDnJ,MAAAA,GAAG,CAACuB,MAAJ,GAjBK,CAkBL;;AACAvB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAe,KAAKT,CAApB,EAAuB,CAAvB,EAA0B,KAAKzB,WAA/B;AACArD,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAe,KAAKT,CAApB,EAAuB,GAAvB,EAA4B,KAAKzB,WAAjC;AACArD,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAe,KAAKT,CAApB,EAAuB,GAAvB,EAA4B,KAAKzB,WAAjC,EAzBK,CA0BL;;AACArD,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,IAAhB;AACAnB,MAAAA,GAAG,CAACuB,MAAJ;AACAvB,MAAAA,GAAG,CAACwB,OAAJ,GA7BK,CA8BL;;AACAxB,MAAAA,GAAG,CAACkB,WAAJ,GAAkB,KAAKkD,KAAvB,CA/BK,CAgCL;;AACA,UAAMsQ,MAAM,GAAG,KAAK5P,CAAL,GAAS,EAAxB;;AACA,WAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,GAApB,EAAyBA,CAAC,IAAI,CAA9B,EAAiC;AAC/B,YAAM8O,EAAE,GAAGD,MAAM,GAAGrT,IAAI,CAACgE,GAAL,CAASQ,CAAC,GAAGvF,OAAJ,GAAc,KAAK+C,WAA5B,CAApB;AACA,YAAMuR,EAAE,GAAGF,MAAM,GAAGrT,IAAI,CAACiE,GAAL,CAASO,CAAC,GAAGvF,OAAJ,GAAc,KAAK+C,WAA5B,CAApB;AACA,YAAMwR,EAAE,GAAGH,MAAM,GAAGrT,IAAI,CAACgE,GAAL,CAAS,CAACQ,CAAC,GAAG,CAAL,IAAUvF,OAAV,GAAoB,KAAK+C,WAAlC,CAApB;AACA,YAAMyR,EAAE,GAAGJ,MAAM,GAAGrT,IAAI,CAACiE,GAAL,CAAS,CAACO,CAAC,GAAG,CAAL,IAAUvF,OAAV,GAAoB,KAAK+C,WAAlC,CAApB;;AACA,YAAIwC,CAAC,GAAG,EAAJ,GAAS,CAAb,EAAgB;AACd7F,UAAAA,GAAG,CAACQ,SAAJ;AACAR,UAAAA,GAAG,CAACS,MAAJ,CAAWkU,EAAX,EAAeC,EAAf;AACA5U,UAAAA,GAAG,CAACU,MAAJ,CAAWmU,EAAX,EAAeC,EAAf;AACA9U,UAAAA,GAAG,CAACmB,SAAJ,GAAgB,CAAhB;AACAnB,UAAAA,GAAG,CAACuB,MAAJ;AACD;AACF,OA9CI,CA+CL;;;AACAvB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,KAAKmH,WAArB,CAjDK,CAkDL;;AACA,UAAI,KAAKR,KAAL,KAAe,QAAnB,EAA6B;AAC3B9H,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKiH,OAAnB,EAA4B,MAAM/H,OAAN,GAAgB,KAAK+C,WAAjD,EAA8D,MAAM/C,OAAN,GAAgB,KAAK+C,WAAnF;AACD,OAFD,MAEO;AACLrD,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKiH,OAAnB,EAA4B,KAAK/H,OAAL,GAAe,KAAK+C,WAAhD,EAA6D,MAAM/C,OAAN,GAAgB,KAAK+C,WAAlF;AACD;;AACD,UAAI,CAAC,KAAKkF,SAAV,EAAqB;AACnBvI,QAAAA,GAAG,CAACkB,WAAJ,GAAkB,KAAKkD,KAAvB;AACD,OAFD,MAEO;AACLpE,QAAAA,GAAG,CAACkB,WAAJ,GAAkBL,WAAW,CAACI,IAA9B;AACA,aAAKsH,SAAL,GAAiB,KAAjB;AACD;;AACDvI,MAAAA,GAAG,CAACuB,MAAJ,GA9DK,CA+DL;;AACAvB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACmH,WAAJ,GAAkB,0BAAlB;AACAnH,MAAAA,GAAG,CAACoH,UAAJ,GAAiB,EAAjB;AACApH,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKqE,WAAhB;AACArD,MAAAA,GAAG,CAACE,SAAJ,CAAc,KAAK4E,CAAL,GAAS,CAAvB,EAA0B,CAA1B;AACA9E,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd,EAtEK,CAuEL;AACA;;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,GAAd;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,IAAX,EAAiB,GAAjB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,IAAX,EAAiB,GAAjB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,IAAX,EAAiB,CAAC,GAAlB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,IAAX,EAAiB,CAAC,GAAlB;AACAV,MAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,GAAf;AACAV,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ;AACAxB,MAAAA,GAAG,CAACwB,OAAJ,GAnFK,CAoFL;;AACA,WAAKpC,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACC,IAAP;AACD,OAFD;AAGD;;;6BACQ;AACP,WAAK0B,WAAL,GAAmB2E,cAAnB;AACA,WAAK5I,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAASG,GAAT,EAAiB;AACpCH,QAAAA,MAAM,CAACK,MAAP,CAAcF,GAAd;AACD,OAFD;AAGD;;;4BACO;AAAA;;AACN,UAAMkT,SAAS,GAAG,IAAIxV,IAAJ,EAAlB;;AACA,UAAIwV,SAAS,GAAGrB,eAAZ,GAA8B,GAAlC,EAAuC;AACrC,YAAIrC,SAAJ,CADqC,CAErC;;AACA,YAAI,KAAKvJ,KAAL,KAAe,QAAnB,EAA6B;AAC3BuJ,UAAAA,SAAS,GAAG,CAAZ;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,GAAG,CAAZ;AACD;;AACD,aAAK,IAAIxL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwL,SAApB,EAA+BxL,CAAC,EAAhC,EAAoC;AAClC,cAAI,KAAKiC,KAAL,KAAe,MAAnB,EAA2B;AACzBlF,YAAAA,UAAU,CAAC,YAAM;AACf,cAAA,KAAI,CAACyO,SAAL,IAAkB,CAAlB;;AACA,cAAA,KAAI,CAACjS,OAAL,CAAa8D,IAAb,CAAkB,IAAI8R,aAAJ,CAAkB;AAClC;AACAlW,gBAAAA,WAAW,EAAE,IAFqB;AAGlCuE,gBAAAA,WAAW,EAAE2E;AAHqB,eAAlB,CAAlB;;AAKA/E,cAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD,aARS,EAQP,MAAM4C,CARC,CAAV;AASD,WAVD,MAUO;AACLjD,YAAAA,UAAU,CAAC,YAAM;AACf,cAAA,KAAI,CAACyO,SAAL,IAAkB,CAAlB;;AACA,cAAA,KAAI,CAACjS,OAAL,CAAa8D,IAAb,CAAkB,IAAI8R,aAAJ,CAAkB;AAClC1R,gBAAAA,UAAU,EAAEZ,SAAS,CAAC,EAAD,EAAK,EAAL,CADa;AAElC6B,gBAAAA,QAAQ,EAAE7B,SAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,GAAkB,EAFM;AAGlC8B,gBAAAA,OAAO,EAAE9B,SAAS,CAAC,CAAD,EAAI,CAAJ,CAHgB;AAIlC+B,gBAAAA,QAAQ,EAAE/B,SAAS,CAAC,CAAD,EAAI,CAAJ,CAJe;AAKlC;AACA5D,gBAAAA,WAAW,EAAE,IANqB;AAOlCuE,gBAAAA,WAAW,EAAE2E;AAPqB,eAAlB,CAAlB;;AASA/E,cAAAA,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAT;AACD,aAZS,EAYP,MAAM4C,CAZC,CAAV;AAaD;AACF;;AACD6N,QAAAA,eAAe,GAAGqB,SAAlB;AACD;AACF;;;4BACOlC,Q,EAAU;AAAA;;AAChB;AACA,UAAIoC,QAAJ;;AACA,cAAQpC,QAAR;AACE,aAAK,OAAL;AACE,eAAKqC,YAAL;AACAD,UAAAA,QAAQ,GAAG,CAAX;AACA/S,UAAAA,WAAW,CAACC,WAAZ,GAA0B,aAA1B;AACA;;AACF,aAAK,WAAL;AACE,eAAKgT,mBAAL;AACAF,UAAAA,QAAQ,GAAG,CAAX;AACA/S,UAAAA,WAAW,CAACC,WAAZ,GAA0B,QAA1B;AACA;;AACF,aAAK,QAAL;AACE8S,UAAAA,QAAQ,GAAG,KAAX;AACA/S,UAAAA,WAAW,CAACC,WAAZ,GAA0B,iBAA1B;AACA;;AACF,aAAK,QAAL;AACE8S,UAAAA,QAAQ,GAAG,KAAX;AACA/S,UAAAA,WAAW,CAACC,WAAZ,GAA0B,gBAA1B;AACA;;AACF,aAAK,MAAL;AACE8S,UAAAA,QAAQ,GAAG,KAAX;AACA/S,UAAAA,WAAW,CAACC,WAAZ,GAA0B,eAA1B;AACA;;AACF;AACE8S,UAAAA,QAAQ,GAAG,CAAX;AAxBJ,OAHgB,CA6BhB;;;AACA,WAAKnN,KAAL,GAAa+K,QAAb,CA9BgB,CA+BhB;;AACAjQ,MAAAA,UAAU,CAAC,YAAM;AACf,QAAA,MAAI,CAACkF,KAAL,GAAa,EAAb,CADe,CAEf;;AACA9F,QAAAA,IAAI,CAACkP,YAAL;AACD,OAJS,EAIP+D,QAJO,CAAV,CAhCgB,CAqChB;;AACA,WAAKG,eAAL,CAAqBvC,QAArB,EAA+BoC,QAA/B;;AACA,UAAIpC,QAAQ,KAAK,WAAjB,EAA8B;AAC5B5P,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,CAAT;AACAA,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,EAAsB,GAAtB,CAAT;AACD;AACF,K,CACD;;;;0CACsB;AACpB,UAAIoS,aAAa,GAAG,CAApB;AACA,UAAMvM,IAAI,GAAG9G,IAAI,CAAC8G,IAAlB;;AACA,UAAM5B,MAAM,GAAG,SAATA,MAAS,GAAM;AACnB,YAAI,CAAClF,IAAI,CAACa,OAAV,EAAmB;AACjBwS,UAAAA,aAAa,IAAI,CAAjB;AACD;;AACDrV,QAAAA,GAAG,CAACC,IAAJ;AACAD,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACmH,WAAJ,GAAkB,2BAAlB;AACAnH,QAAAA,GAAG,CAACoH,UAAJ,GAAiB,CAAjB,CAPmB,CAQnB;;AACApH,QAAAA,GAAG,CAACkB,WAAJ,iCAAyC,CAAC,MAAMmU,aAAP,IAAwB,EAAjE;AACArV,QAAAA,GAAG,CAACO,SAAJ,iCAAuC,CAAC,MAAM8U,aAAP,IAAwB,GAA/D;AACArV,QAAAA,GAAG,CAACmB,SAAJ,GAAgB,CAAhB;AACA;;;;;;AAKA,YAAMkG,OAAO,GAAG,MAAMC,OAAO,CAAC,CAAD,EAAM,CAAC+N,aAAa,GAAG,CAAjB,IAAsB,EAAvB,GAA6B,EAA9B,GAAoC,CAAxC,CAA7B;AACArV,QAAAA,GAAG,CAACoB,GAAJ,CAAQ0L,KAAK,GAAG,CAAhB,EAAmBC,KAAK,GAAG,CAA3B,EAA8B1F,OAA9B,EAAuC,CAAvC,EAA0ChG,IAAI,CAACC,EAAL,GAAU,CAApD;AACAtB,QAAAA,GAAG,CAACY,IAAJ;AACAZ,QAAAA,GAAG,CAACuB,MAAJ;AACAvB,QAAAA,GAAG,CAACwB,OAAJ,GArBmB,CAsBnB;;AACAQ,QAAAA,IAAI,CAACyB,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAAShO,GAAT,EAAiB;AACpC,cAAIwF,OAAO,GAAGwI,MAAM,CAAC/Q,WAArB,EAAkC;AAChC8F,YAAAA,YAAY,CAACgC,SAAb,CAAuBiJ,MAAM,CAAC/K,CAA9B,EAAiC3E,SAAS,CAAC0P,MAAM,CAAC/Q,WAAR,EAAqB+Q,MAAM,CAAC9Q,eAA5B,CAAT,CAAsDqB,CAAvF,EAA0FD,SAAS,CAAC0P,MAAM,CAAC/Q,WAAR,EAAqB+Q,MAAM,CAAC9Q,eAA5B,CAAT,CAAsDsB,CAAhJ,EAAmJ,cAAnJ;AACA2B,YAAAA,IAAI,CAACyB,OAAL,CAAayE,MAAb,CAAoBrG,GAApB,EAAyB,CAAzB;AACD;AACF,SALD;AAMAG,QAAAA,IAAI,CAAC4B,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAWjO,GAAX,EAAmB;AACxC,cAAIwF,OAAO,GAAGyI,QAAQ,CAAChR,WAAvB,EAAoC;AAClC8F,YAAAA,YAAY,CAACgC,SAAb,CAAuBkJ,QAAQ,CAAChL,CAAhC,EAAmC3E,SAAS,CAAC2P,QAAQ,CAAChR,WAAV,EAAuBgR,QAAQ,CAAC/Q,eAAhC,CAAT,CAA0DqB,CAA7F,EAAgGD,SAAS,CAAC2P,QAAQ,CAAChR,WAAV,EAAuBgR,QAAQ,CAAC/Q,eAAhC,CAAT,CAA0DsB,CAA1J,EAA6J,cAA7J;AACA2B,YAAAA,IAAI,CAAC4B,SAAL,CAAesE,MAAf,CAAsBrG,GAAtB,EAA2B,CAA3B;AACD;AACF,SALD;AAMAG,QAAAA,IAAI,CAAC8B,QAAL,CAAcrC,OAAd,CAAsB,UAACsO,OAAD,EAAUlO,GAAV,EAAkB;AACtC,cAAIwF,OAAO,GAAG0I,OAAO,CAACjR,WAAR,CAAoBkF,KAAlC,EAAyC;AACvC,gBAAI+L,OAAO,CAAC1Q,EAAR,CAAW2E,KAAf,EAAsB;AACpB,kBAAMsR,aAAa,GAAG,CAAC,KAAK,EAAN,IAAY,CAAlC;AACA1Q,cAAAA,YAAY,CAACgC,SAAb,CAAuB0O,aAAvB,EAAsCvF,OAAO,CAAC5P,SAAR,CAAkB,OAAlB,EAA2BC,CAAjE,EAAoE2P,OAAO,CAAC5P,SAAR,CAAkB,OAAlB,EAA2BE,CAA/F,EAAkG,aAAlG;AACD,aAHD,MAGO;AACL,kBAAI0P,OAAO,CAAC1Q,EAAR,CAAW4E,GAAf,EAAoB;AAClB,oBAAMsR,WAAW,GAAG,CAAC,KAAK,EAAN,IAAY,CAAhC;AACA3Q,gBAAAA,YAAY,CAACgC,SAAb,CAAuB2O,WAAvB,EAAoCxF,OAAO,CAAC5P,SAAR,CAAkB,KAAlB,EAAyBC,CAA7D,EAAgE2P,OAAO,CAAC5P,SAAR,CAAkB,KAAlB,EAAyBE,CAAzF,EAA4F,aAA5F;AACA2B,gBAAAA,IAAI,CAAC8B,QAAL,CAAcoE,MAAd,CAAqBrG,GAArB,EAA0B,CAA1B;AACD;;AACD,kBAAIkO,OAAO,CAAC1Q,EAAR,CAAW6E,KAAf,EAAsB;AACpB,oBAAMsR,aAAa,GAAG,CAAC,KAAK,EAAN,IAAY,CAAlC;AACA5Q,gBAAAA,YAAY,CAACgC,SAAb,CAAuB4O,aAAvB,EAAsCzF,OAAO,CAAC5P,SAAR,CAAkB,OAAlB,EAA2BC,CAAjE,EAAoE2P,OAAO,CAAC5P,SAAR,CAAkB,OAAlB,EAA2BE,CAA/F,EAAkG,aAAlG;AACA2B,gBAAAA,IAAI,CAAC8B,QAAL,CAAcoE,MAAd,CAAqBrG,GAArB,EAA0B,CAA1B;AACD;AACF;;AACDG,YAAAA,IAAI,CAAC8B,QAAL,CAAcoE,MAAd,CAAqBrG,GAArB,EAA0B,CAA1B;AACD;AACF,SAnBD;AAoBAG,QAAAA,IAAI,CAAC4L,OAAL,CAAanM,OAAb,CAAqB,UAACuO,WAAD,EAAcnO,GAAd,EAAsB;AACzC,cAAIwF,OAAO,GAAG2I,WAAW,CAAClR,WAA1B,EAAuC;AACrCkD,YAAAA,IAAI,CAAC4L,OAAL,CAAa1F,MAAb,CAAoBrG,GAApB,EAAyB,CAAzB;AACD;AACF,SAJD,EAvDmB,CA4DnB;;AACA,YAAIG,IAAI,CAAC8G,IAAT,EAAe;AACb,cAAIzB,OAAO,GAAGyB,IAAI,CAAChK,WAAf,IAA8BgK,IAAI,CAACzJ,EAAL,KAAY,CAA9C,EAAiD;AAC/CuF,YAAAA,YAAY,CAACmF,aAAb;AACD;AACF;;AACD,YAAIsL,aAAa,GAAG,GAApB,EAAyB;AACvB9N,UAAAA,qBAAqB,CAACL,MAAD,CAArB;AACD;AACF,OArED;;AAsEAK,MAAAA,qBAAqB,CAACL,MAAD,CAArB;;AACA,UAAI4B,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACzJ,EAAL,IAAW,CAAX;AACD,OA5EmB,CA6EpB;;;AACA4D,MAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,CAAT,CA9EoB,CA+EpB;AACA;AACA;AACA;AACD,K,CACD;;;;mCACe;AACb,UAAM0N,KAAK,GAAGnH,QAAQ,CAACoH,aAAT,CAAuB,KAAvB,CAAd;AACAD,MAAAA,KAAK,CAACxB,SAAN,CAAgBC,GAAhB,CAAoB,mBAApB;AACAjE,MAAAA,YAAY,CAAC0F,WAAb,CAAyBF,KAAzB;AACA,WAAKrH,MAAL,IAAe,CAAf;AACD;;;oCACeuJ,Q,EAAUoC,Q,EAAU;AAClC,UAAIpC,QAAQ,KAAK,WAAb,IAA4BA,QAAQ,KAAK,OAA7C,EAAsD,OADpB,CAElC;;AACAzH,MAAAA,IAAI,CAAC+D,SAAL,CAAeE,MAAf,CAAsB,KAAtB;AACAhE,MAAAA,OAAO,CAAC0H,GAAR,oBAAwBF,QAAxB;AACAoC,MAAAA,QAAQ,IAAI,IAAZ;AACA3J,MAAAA,YAAY,CAACnJ,WAAb,GAA2B8S,QAA3B;;AACA,UAAMQ,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,YAAMC,aAAa,GAAG9S,UAAU,CAAC,YAAM;AACrC,cAAIZ,IAAI,CAACa,OAAT,EAAkB;AAChB4S,YAAAA,aAAa;AACb;AACD,WAJoC,CAKrC;;;AACA,cAAI,CAACzT,IAAI,CAACwD,OAAV,EAAmB;AACjB;AACAQ,YAAAA,YAAY,CAAC0P,aAAD,CAAZ;AACA;AACD;;AACDT,UAAAA,QAAQ,IAAI,CAAZ;AACA3J,UAAAA,YAAY,CAACnJ,WAAb,GAA2B8S,QAAQ,IAAI,EAAZ,GAAiBA,QAAjB,cAAgCA,QAAhC,CAA3B;;AACA,cAAIA,QAAJ,EAAc;AACZQ,YAAAA,aAAa;AACd,WAFD,MAEO;AACL;AACArK,YAAAA,IAAI,CAAC+D,SAAL,CAAeC,GAAf,CAAmB,KAAnB;AACApJ,YAAAA,YAAY,CAAC0P,aAAD,CAAZ;AACD;AACF,SApB+B,EAoB7B,IApB6B,CAAhC;AAqBD,OAtBD;;AAuBAD,MAAAA,aAAa;AACd;;;;;;IAKGT,a;;;AACJ,yBAAYpW,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACV;AACA8W,MAAAA,OAAO,EAAE,KAFC;AAGV7W,MAAAA,WAAW,EAAE,CAHH;AAIVsF,MAAAA,KAAK,EAAEvD,WAAW,CAACE,KAJT;AAKV6U,MAAAA,CAAC,EAAE,EALO;AAMVvS,MAAAA,WAAW,EAAE,CANH;AAOVC,MAAAA,UAAU,EAAE,EAPF;AAQViB,MAAAA,QAAQ,EAAE,GARA;AASVC,MAAAA,OAAO,EAAE,CATC;AAUVC,MAAAA,QAAQ,EAAE;AAVA,KAAZ;AAYA3E,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACLmB,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc4M,KAAK,GAAG,CAAtB,EAAyBC,KAAK,GAAG,CAAjC;AACA/M,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKqE,WAAhB,EAHK,CAIL;;AACA,UAAIrB,IAAI,CAACsE,OAAL,CAAawB,KAAb,KAAuB,MAA3B,EAAmC;AACjC;AACA9H,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB,CAHiC,CAIjC;;AACAP,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAC,IAAD,GAAQ,KAAKtC,WAArB,EAAkC,CAAlC,EAAqC,IAArC,EAA2C,CAA3C,EAA8CuC,IAAI,CAACC,EAAL,GAAU,CAAxD;AACAtB,QAAAA,GAAG,CAACY,IAAJ;AACAZ,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB,CARiC,CASjC;;AACAP,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAC,IAAD,GAAQ,KAAKtC,WAArB,EAAkC,CAAlC,EAAqC,GAArC,EAA0C,CAA1C,EAA6CuC,IAAI,CAACC,EAAL,GAAU,CAAvD;AACAtB,QAAAA,GAAG,CAACY,IAAJ;AACAZ,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB,CAbiC,CAcjC;;AACAP,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,CAAC,KAAD,GAAS,KAAKtC,WAAtB,EAAmC,CAAnC,EAAsC,IAAtC,EAA4C,CAA5C,EAA+CuC,IAAI,CAACC,EAAL,GAAU,CAAzD;AACAtB,QAAAA,GAAG,CAACY,IAAJ,GAhBiC,CAiBjC;;AACAZ,QAAAA,GAAG,CAACQ,SAAJ;AACAR,QAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB,CAnBiC,CAoBjC;;AACApE,QAAAA,GAAG,CAACoB,GAAJ,CAAQ,IAAI,KAAKtC,WAAjB,EAA8B,CAA9B,EAAiC,GAAjC,EAAsC,CAAtC,EAAyCuC,IAAI,CAACC,EAAL,GAAU,CAAnD;AACAtB,QAAAA,GAAG,CAACY,IAAJ,GAtBiC,CAuBjC;;AACAZ,QAAAA,GAAG,CAACQ,SAAJ,GAxBiC,CAyBjC;;AACAR,QAAAA,GAAG,CAACS,MAAJ,CAAW,OAAO,KAAK3B,WAAvB,EAAoC,IAApC;AACAkB,QAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKiV,OAAL,GAAe,KAAK7W,WAA/B,EAA4C,CAA5C,EA3BiC,CA4BjC;;AACAkB,QAAAA,GAAG,CAACU,MAAJ,CAAW,OAAO,KAAK5B,WAAvB,EAAoC,CAAC,IAArC;AACAkB,QAAAA,GAAG,CAACW,SAAJ;AACAX,QAAAA,GAAG,CAACY,IAAJ;AACD,OAhCD,MAgCO;AACL+D,QAAAA,cAAc,CAAC,IAAD,EAAO,aAAP,EAAsB,GAAtB,EAA2B,2BAA3B,CAAd;AACD;;AACD3E,MAAAA,GAAG,CAACwB,OAAJ;AACD;;;2BACMgH,S,EAAW;AAAA;;AAChB;AACA,WAAK1J,WAAL,IAAoB,KAAK8W,CAAzB;AACA,UAAIC,UAAJ;AACA,UAAIC,YAAJ,CAJgB,CAKhB;AACA;;AACA,UAAI9T,IAAI,CAACsE,OAAL,CAAawB,KAAb,KAAuB,MAA3B,EAAmC;AACjC,YAAMiO,aAAa,GAAG,KAAKjX,WAAL,GAAmB,KAAK6W,OAA9C,CADiC,CAEjC;;AACA3T,QAAAA,IAAI,CAACyB,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAASmG,MAAT,EAAoB;AACvCH,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOxU,IAAI,CAAC4U,IAAL,CAAUpG,MAAM,CAAC/K,CAAP,GAAW+K,MAAM,CAAC/Q,WAA5B,CAAP;AACD,WAFD;;AAGAgX,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQC,aAAa,IAAKlG,MAAM,CAAC/Q,WAAP,GAAsB+Q,MAAM,CAAC/K,CAAP,GAAW,CAApD,IAA6DiR,aAAa,IAAKlG,MAAM,CAAC/Q,WAAP,GAAsB+Q,MAAM,CAAC/K,CAAP,GAAW,CAAvH;AACD,WAFD;;AAGA,UAAA,MAAI,CAACoR,WAAL,CAAiBrG,MAAjB,EAAyBmG,MAAzB,EAAiChU,IAAI,CAACyB,OAAtC,EAA+C+E,SAA/C,EAA0DqN,UAA1D,EAAsEC,YAAtE,EAAoF,cAApF;AACD,SARD,EAHiC,CAYjC;;AACA9T,QAAAA,IAAI,CAAC4B,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAWqG,MAAX,EAAsB;AAC3CN,UAAAA,UAAU,GAAG,sBAAM;AACjB,gBAAMO,OAAO,GAAGtG,QAAQ,CAAChR,WAAT,GAAwBgR,QAAQ,CAAChL,CAAT,GAAa,CAArD;AACA,gBAAMuR,OAAO,GAAIvG,QAAQ,CAAChL,CAAT,GAAa,CAAd,GAAmBzD,IAAI,CAAC+L,IAAL,CAAU,CAAV,CAAnC;AACA,mBAAO/L,IAAI,CAACoS,KAAL,CAAW4C,OAAX,EAAoBD,OAApB,CAAP;AACD,WAJD;;AAKAN,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQC,aAAa,IAAIjG,QAAQ,CAAChR,WAA3B,IAA4CiX,aAAa,IAAKjG,QAAQ,CAAChR,WAAT,GAAwBgR,QAAQ,CAAChL,CAAT,GAAa,CAA1G;AACD,WAFD;;AAGA,UAAA,MAAI,CAACoR,WAAL,CAAiBpG,QAAjB,EAA2BqG,MAA3B,EAAmCnU,IAAI,CAAC4B,SAAxC,EAAmD4E,SAAnD,EAA8DqN,UAA9D,EAA0EC,YAA1E,EAAwF,cAAxF;AACD,SAVD,EAbiC,CAwBjC;;AACA9T,QAAAA,IAAI,CAAC8B,QAAL,CAAcrC,OAAd,CAAsB,UAACsO,OAAD,EAAUuG,OAAV,EAAsB;AAC1C;AACA,cAAIvG,OAAO,CAAC1Q,EAAR,CAAW2E,KAAf,EAAsB;AACpB8R,YAAAA,YAAY,GAAG,wBAAM;AACnB,kBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBkF,KAAlC;AACA,qBAAQ+R,aAAa,IAAIQ,KAAlB,IAA6BR,aAAa,IAAKQ,KAAK,GAAG,CAA9D;AACD,aAHD;;AAIA,YAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,OAArC,EAA8C,EAA9C,EAAkD,EAAlD,EAAuD,OAAO,MAAM,EAAb,CAAvD,EAA2E,IAAI,EAA/E,EAAoF,EAApF,EAAwF9N,SAAxF,EAAmGsN,YAAnG;AACD,WAND,MAMO;AACL;AACA;AACA,gBAAI/F,OAAO,CAAC1Q,EAAR,CAAW4E,GAAf,EAAoB;AAClB6R,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBmF,GAAlC;AACA,uBAAQ8R,aAAa,IAAIQ,KAAK,GAAG,CAA1B,IAAiCR,aAAa,IAAKQ,KAAK,GAAG,EAAlE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,KAArC,EAA4C,EAA5C,EAAgD,EAAhD,EAAsD,MAAM,EAAP,GAAa,GAAlE,EAAyE,OAAO,KAAK,EAAZ,CAAzE,EAA2F,EAA3F,EAA+F9N,SAA/F,EAA0GsN,YAA1G;AACD,aATI,CAUL;;;AACA,gBAAI/F,OAAO,CAAC1Q,EAAR,CAAW6E,KAAf,EAAsB;AACpB4R,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBoF,KAAlC;AACA,uBAAQ6R,aAAa,IAAIQ,KAAK,GAAG,CAA1B,IAAiCR,aAAa,IAAKQ,KAAK,GAAG,EAAlE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,OAArC,EAA8C,EAA9C,EAAkD,EAAlD,EAAwD,MAAM,IAAP,GAAe,GAAtE,EAA6E,OAAO,KAAK,IAAZ,CAA7E,EAAiG,IAAjG,EAAuG9N,SAAvG,EAAkHsN,YAAlH;AACD;AACF;AACF,SA3BD,EAzBiC,CAqDjC;;AACA,YAAMhN,IAAI,GAAG9G,IAAI,CAAC8G,IAAlB;;AACA,YAAIA,IAAJ,EAAU;AACR+M,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOxU,IAAI,CAAC4U,IAAL,CAAU,MAAMnN,IAAI,CAAChK,WAAL,GAAmB,CAAzB,CAAV,CAAP;AACD,WAFD;;AAGAgX,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQC,aAAa,IAAKjN,IAAI,CAAChK,WAAL,GAAmB,CAAnB,GAAuB,CAA1C,IAAkDiX,aAAa,IAAKjN,IAAI,CAAChK,WAAL,GAAmB,EAA9F;AACD,WAFD;;AAGA,eAAKoX,WAAL,CAAiBpN,IAAjB,EAAuB2N,GAAvB,EAA4B,IAA5B,EAAkCjO,SAAlC,EAA6CqN,UAA7C,EAAyDC,YAAzD,EAAuE,eAAvE,EAAwF,UAAxF,EAAoG,IAApG;AACD;AACF,OAhED,MAgEO;AACL;AACA;AACA9T,QAAAA,IAAI,CAACyB,OAAL,CAAahC,OAAb,CAAqB,UAACoO,MAAD,EAASmG,MAAT,EAAoB;AACvCH,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOxU,IAAI,CAAC4U,IAAL,CAAUpG,MAAM,CAAC/K,CAAP,GAAW+K,MAAM,CAAC/Q,WAA5B,CAAP;AACD,WAFD;;AAGAgX,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQ,MAAI,CAAChX,WAAL,IAAqB+Q,MAAM,CAAC/Q,WAAP,GAAsB+Q,MAAM,CAAC/K,CAAP,GAAW,CAAvD,IAAgE,MAAI,CAAChG,WAAL,IAAqB+Q,MAAM,CAAC/Q,WAAP,GAAsB+Q,MAAM,CAAC/K,CAAP,GAAW,CAA7H;AACD,WAFD;;AAGA,UAAA,MAAI,CAACoR,WAAL,CAAiBrG,MAAjB,EAAyBmG,MAAzB,EAAiChU,IAAI,CAACyB,OAAtC,EAA+C+E,SAA/C,EAA0DqN,UAA1D,EAAsEC,YAAtE,EAAoF,cAApF,EAAoG,MAApG;AACD,SARD,EAHK,CAYL;;AACA9T,QAAAA,IAAI,CAAC4B,SAAL,CAAenC,OAAf,CAAuB,UAACqO,QAAD,EAAWqG,MAAX,EAAsB;AAC3CN,UAAAA,UAAU,GAAG,sBAAM;AACjB,gBAAMO,OAAO,GAAGtG,QAAQ,CAAChR,WAAT,GAAwBgR,QAAQ,CAAChL,CAAT,GAAa,CAArD;AACA,gBAAMuR,OAAO,GAAIvG,QAAQ,CAAChL,CAAT,GAAa,CAAd,GAAmBzD,IAAI,CAAC+L,IAAL,CAAU,CAAV,CAAnC;AACA,mBAAO/L,IAAI,CAACoS,KAAL,CAAW4C,OAAX,EAAoBD,OAApB,CAAP;AACD,WAJD;;AAKAN,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQ,MAAI,CAAChX,WAAL,IAAoBgR,QAAQ,CAAChR,WAA9B,IAA+C,MAAI,CAACA,WAAL,IAAqBgR,QAAQ,CAAChR,WAAT,GAAwBgR,QAAQ,CAAChL,CAAT,GAAa,CAAhH;AACD,WAFD;;AAGA,UAAA,MAAI,CAACoR,WAAL,CAAiBpG,QAAjB,EAA2BqG,MAA3B,EAAmCnU,IAAI,CAAC4B,SAAxC,EAAmD4E,SAAnD,EAA8DqN,UAA9D,EAA0EC,YAA1E,EAAwF,cAAxF,EAAwG,MAAxG;AACD,SAVD,EAbK,CAwBL;;AACA9T,QAAAA,IAAI,CAAC8B,QAAL,CAAcrC,OAAd,CAAsB,UAACsO,OAAD,EAAUuG,OAAV,EAAsB;AAC1C;AACA,cAAIvG,OAAO,CAAC1Q,EAAR,CAAW2E,KAAf,EAAsB;AACpB8R,YAAAA,YAAY,GAAG,wBAAM;AACnB,kBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBkF,KAAlC;AACA,qBAAQ,MAAI,CAAClF,WAAL,IAAoByX,KAArB,IAAgC,MAAI,CAACzX,WAAL,IAAqByX,KAAK,GAAG,CAApE;AACD,aAHD;;AAIA,YAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,OAArC,EAA8C,EAA9C,EAAkD,EAAlD,EAAuD,OAAO,MAAM,EAAb,CAAvD,EAA2E,IAAI,EAA/E,EAAoF,EAApF,EAAwF9N,SAAxF,EAAmGsN,YAAnG,EAAiH,MAAjH;AACD,WAND,MAMO;AACL;AACA;AACA,gBAAI/F,OAAO,CAAC1Q,EAAR,CAAW4E,GAAf,EAAoB;AAClB6R,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBmF,GAAlC;AACA,uBAAQ,MAAI,CAACnF,WAAL,IAAoByX,KAAK,GAAG,CAA7B,IAAoC,MAAI,CAACzX,WAAL,IAAqByX,KAAK,GAAG,EAAxE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,KAArC,EAA4C,EAA5C,EAAgD,EAAhD,EAAsD,MAAM,EAAP,GAAa,GAAlE,EAAyE,OAAO,KAAK,EAAZ,CAAzE,EAA2F,EAA3F,EAA+F9N,SAA/F,EAA0GsN,YAA1G,EAAwH,MAAxH;AACD,aATI,CAUL;;;AACA,gBAAI/F,OAAO,CAAC1Q,EAAR,CAAW6E,KAAf,EAAsB;AACpB4R,cAAAA,YAAY,GAAG,wBAAM;AACnB,oBAAMS,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBoF,KAAlC;AACA,uBAAQ,MAAI,CAACpF,WAAL,IAAoByX,KAAK,GAAG,CAA7B,IAAoC,MAAI,CAACzX,WAAL,IAAqByX,KAAK,GAAG,EAAxE;AACD,eAHD;;AAIA,cAAA,MAAI,CAACC,aAAL,CAAmBzG,OAAnB,EAA4BuG,OAA5B,EAAqC,OAArC,EAA8C,EAA9C,EAAkD,EAAlD,EAAwD,MAAM,IAAP,GAAe,GAAtE,EAA6E,OAAO,KAAK,IAAZ,CAA7E,EAAiG,IAAjG,EAAuG9N,SAAvG,EAAkHsN,YAAlH,EAAgI,MAAhI;AACD,aAjBI,CAkBL;;;AACA,gBAAI/F,OAAO,CAAC1Q,EAAR,CAAW4E,GAAX,KAAmB,CAAnB,IAAwB8L,OAAO,CAAC1Q,EAAR,CAAW6E,KAAX,KAAqB,CAAjD,EAAoD;AAClDlC,cAAAA,IAAI,CAAC8B,QAAL,CAAcoE,MAAd,CAAqBoO,OAArB,EAA8B,CAA9B,EADkD,CAElD;;AACAtU,cAAAA,IAAI,CAACuJ,UAAL,IAAmB,CAAnB;AACAA,cAAAA,UAAU,CAACpJ,WAAX,GAAyBH,IAAI,CAACuJ,UAA9B;AACD;AACF;AACF,SAlCD,EAzBK,CA4DL;;AACA,YAAMzC,KAAI,GAAG9G,IAAI,CAAC8G,IAAlB;;AACA,YAAIA,KAAJ,EAAU;AACR+M,UAAAA,UAAU,GAAG,sBAAM;AACjB,mBAAOxU,IAAI,CAAC4U,IAAL,CAAU,MAAMnN,KAAI,CAAChK,WAAL,GAAmB,CAAzB,CAAV,CAAP;AACD,WAFD;;AAGAgX,UAAAA,YAAY,GAAG,wBAAM;AACnB,mBAAQ,MAAI,CAAChX,WAAL,IAAqBgK,KAAI,CAAChK,WAAL,GAAmB,CAAnB,GAAuB,CAA7C,IAAqD,MAAI,CAACA,WAAL,IAAqBgK,KAAI,CAAChK,WAAL,GAAmB,EAApG;AACD,WAFD;;AAGA,eAAKoX,WAAL,CAAiBpN,KAAjB,EAAuB2N,GAAvB,EAA4B,IAA5B,EAAkCjO,SAAlC,EAA6CqN,UAA7C,EAAyDC,YAAzD,EAAuE,eAAvE,EAAwF,MAAxF,EAAgG,IAAhG;AACD;AACF,OA9Ie,CA+IhB;;;AACA,WAAKY,cAAL,CAAoBlO,SAApB;AACD,K,CACD;AACA;;;;gCACYpC,K,EAAOqB,Q,EAAUD,O,EAASgB,S,EAAWqN,U,EAAYC,Y,EAAc9O,Q,EAA6C;AAAA,UAAnCU,IAAmC,uEAA5B,UAA4B;AAAA,UAAhBhD,MAAgB,uEAAP,KAAO;;AACtH;;;;;AAKA,UAAMiS,aAAa,GAAGd,UAAU,EAAhC;AACA,UAAMe,eAAe,GAAIxQ,KAAK,CAACrH,eAAN,GAAwB,GAAzB,GAAgCuB,OAAhC,GAA0CqW,aAAlE;AACA,UAAME,aAAa,GAAIzQ,KAAK,CAACrH,eAAN,GAAwB,GAAzB,GAAgCuB,OAAhC,GAA0CqW,aAAhE;AACA,UAAMG,cAAc,GAAG,KAAKC,mBAAL,CAAyBH,eAAzB,EAA0CC,aAA1C,EAAyDnP,IAAzD,CAAvB,CATsH,CAUtH;;AACA,UAAMsP,UAAU,GAAGlB,YAAY,EAA/B;;AAEA,UAAI,CAAC5T,WAAW,CAACC,WAAjB,EAA8B;AAC5BD,QAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,QAAvB,GAAkC,QAA5D;AACD,OAfqH,CAgBtH;;;AACA,UAAI2S,cAAc,IAAIE,UAAtB,EAAkC;AAChC;AACAhV,QAAAA,IAAI,CAACsE,OAAL,CAAalH,OAAb,CAAqB8I,MAArB,CAA4BM,SAA5B,EAAuC,CAAvC,EAFgC,CAGhC;;AACApC,QAAAA,KAAK,CAAC/G,EAAN,IAAY,CAAZ;;AACA,YAAIqI,IAAI,KAAK,UAAb,EAAyB;AACvBzE,UAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAT;AACD,SAT+B,CAUhC;;;AACA,YAAImD,KAAK,CAAC/G,EAAN,KAAa,CAAjB,EAAoB;AAClB,cAAIqF,MAAJ,EAAY;AACV;AACAE,YAAAA,YAAY,CAACmF,aAAb;AACA;AACD,WAJD,MAIO;AACL;AACAvC,YAAAA,OAAO,CAACU,MAAR,CAAeT,QAAf,EAAyB,CAAzB,EAFK,CAGL;;AACA7C,YAAAA,YAAY,CAACgC,SAAb,CAAuBR,KAAK,CAACtB,CAA7B,EAAgC3E,SAAS,CAACiG,KAAK,CAACtH,WAAP,EAAoBsH,KAAK,CAACrH,eAA1B,CAAT,CAAoDqB,CAApF,EAAuFD,SAAS,CAACiG,KAAK,CAACtH,WAAP,EAAoBsH,KAAK,CAACrH,eAA1B,CAAT,CAAoDsB,CAA3I,EAA8I2G,QAA9I,EAJK,CAKL;;AACAhF,YAAAA,IAAI,CAACuJ,UAAL,IAAmB,CAAnB;AACAA,YAAAA,UAAU,CAACpJ,WAAX,GAAyBH,IAAI,CAACuJ,UAA9B;AACD;AACF;;AACDrJ,QAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,cAAvB,GAAwC,OAAlE;AACD;AACF,K,CACD;;;;kCACc4L,O,EAASuG,O,EAASpD,I,EAAM+D,S,EAAWC,S,EAAWC,Q,EAAUC,Q,EAAUC,gB,EAAkB7O,S,EAAWsN,Y,EAAiC;AAAA,UAAnBpO,IAAmB,0EAAZ,UAAY;AAC5I,UAAM4P,mBAAmB,GAAGvH,OAAO,CAAChR,eAAR,CAAwBmU,IAAxB,CAA5B;AACA,UAAMqE,UAAU,GAAGxH,OAAO,CAAC/Q,MAAR,CAAekU,IAAf,CAAnB,CAF4I,CAG5I;;AACA,UAAMqD,KAAK,GAAGxG,OAAO,CAACjR,WAAR,CAAoBoU,IAApB,CAAd;AACA,UAAMsE,MAAM,GAAGP,SAAf;AACA,UAAMQ,MAAM,GAAGP,SAAf;AACA;;;;;;;;;;;;;;;;;;;;;;AAsBA,UAAMQ,MAAM,GAAGC,aAAa,CAACpB,KAAD,EAAQiB,MAAR,EAAgBL,QAAhB,CAA5B;AACA,UAAMS,MAAM,GAAGD,aAAa,CAACpB,KAAD,EAAQkB,MAAR,EAAgBL,QAAhB,CAA5B,CA9B4I,CA+B5I;;AACA,UAAMS,WAAW,GAAIP,mBAAmB,IAAI,GAAxB,KAAkCC,UAAU,GAAG,GAAd,GAAqBF,gBAArB,IAA0CE,UAAU,GAAG,GAAd,IAAuBF,gBAAgB,GAAG,GAApH,CAApB;AACA,UAAMS,QAAQ,GAAIR,mBAAmB,GAAG,GAAvB,KAAiCC,UAAU,GAAG,GAAd,IAAsBF,gBAAtB,IAA2CE,UAAU,GAAG,GAAd,GAAsBF,gBAAgB,GAAG,GAAnH,CAAjB;AACA,UAAIU,OAAJ;AACA,UAAIC,OAAJ;;AAEA,UAAI,CAAC9V,WAAW,CAACC,WAAjB,EAA8B;AAC5BD,QAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,QAAvB,GAAkC,QAA5D;AACD;;AACD,UAAI0T,WAAW,IAAIC,QAAnB,EAA6B;AAC3BC,QAAAA,OAAO,GAAGE,SAAS,CAAC1B,KAAD,EAAQkB,MAAR,EAAgBG,MAAhB,CAAnB;AACAI,QAAAA,OAAO,GAAGC,SAAS,CAAC1B,KAAD,EAAQiB,MAAR,EAAgBE,MAAhB,CAAnB;AACD,OAHD,MAGO;AACLK,QAAAA,OAAO,GAAGE,SAAS,CAAC1B,KAAD,EAAQiB,MAAR,EAAgBE,MAAhB,CAAnB;AACAM,QAAAA,OAAO,GAAGC,SAAS,CAAC1B,KAAD,EAAQkB,MAAR,EAAgBG,MAAhB,CAAnB;AACD;AACD;;;;;;AAIA,UAAMM,cAAc,GAAIZ,mBAAmB,GAAG,GAAvB,GAA8BhX,OAA9B,GAAwCyX,OAA/D;AACA,UAAMI,YAAY,GAAIb,mBAAmB,GAAG,GAAvB,GAA8BhX,OAA9B,GAAwC0X,OAA7D;AACA,UAAMlB,cAAc,GAAG,KAAKC,mBAAL,CAAyBmB,cAAzB,EAAyCC,YAAzC,EAAuDzQ,IAAvD,CAAvB,CArD4I,CAsD5I;;AACA,UAAMsP,UAAU,GAAGlB,YAAY,EAA/B,CAvD4I,CAwD5I;;AACA,UAAIgB,cAAc,IAAIE,UAAtB,EAAkC;AAChC;AACAhV,QAAAA,IAAI,CAACsE,OAAL,CAAalH,OAAb,CAAqB8I,MAArB,CAA4BM,SAA5B,EAAuC,CAAvC,EAFgC,CAGhC;;AACAuH,QAAAA,OAAO,CAAC1Q,EAAR,CAAW6T,IAAX,KAAoB,CAApB;;AACA,YAAIA,IAAI,KAAK,OAAb,EAAsB;AACpBjQ,UAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,KAAhB,CAAT;AACD,SAP+B,CAQhC;;;AACA,YAAI8M,OAAO,CAAC1Q,EAAR,CAAW4E,GAAX,KAAmB,CAAnB,IAAwB8L,OAAO,CAAC1Q,EAAR,CAAW6E,KAAX,KAAqB,CAAjD,EAAoD;AAClD;AACA,cAAMiE,QAAQ,GAAG+K,IAAI,KAAK,KAAT,GAAiB,CAAC,KAAK,EAAN,IAAY,CAA7B,GAAiC,CAAC,KAAK,EAAN,IAAY,CAA9D;AACAtO,UAAAA,YAAY,CAACgC,SAAb,CAAuBuB,QAAvB,EAAiC4H,OAAO,CAAC5P,SAAR,CAAkB+S,IAAlB,EAAwB9S,CAAzD,EAA4D2P,OAAO,CAAC5P,SAAR,CAAkB+S,IAAlB,EAAwB7S,CAApF,EAAuF,aAAvF;AACD,SAb+B,CAchC;;;AACA,YAAI0P,OAAO,CAAC1Q,EAAR,CAAW4E,GAAX,KAAmB,CAAnB,IAAwB8L,OAAO,CAAC1Q,EAAR,CAAW6E,KAAX,KAAqB,CAAjD,EAAoD;AAClDlC,UAAAA,IAAI,CAAC8B,QAAL,CAAcoE,MAAd,CAAqBoO,OAArB,EAA8B,CAA9B,EADkD,CAElD;;AACAtU,UAAAA,IAAI,CAACuJ,UAAL,IAAmB,CAAnB;AACAA,UAAAA,UAAU,CAACpJ,WAAX,GAAyBH,IAAI,CAACuJ,UAA9B;AACD;;AACDrJ,QAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,eAAvB,GAAyC,OAAnE;;AACA,YAAIuD,IAAI,KAAK,UAAb,EAAyB;AACvBzE,UAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,CAAC,MAAD,EAAS,IAAT,EAAe,IAAf,EAAqB,CAArB,EAAwB,CAAC,EAAzB,CAAT;AACD;AACF;AACF,K,CACD;;;;wCACoB2T,e,EAAiBC,a,EAAenP,I,EAAM;AACxD,UAAI0Q,kBAAJ,CADwD,CAExD;;AACA,UAAIvB,aAAa,GAAGxV,IAAI,CAACC,EAAL,GAAU,CAA1B,IAA+B,KAAK+B,WAAL,GAAmBhC,IAAI,CAACC,EAA3D,EAA+D;AAC7D8W,QAAAA,kBAAkB,GAAG,KAAK/U,WAAL,GAAmBhC,IAAI,CAACC,EAAL,GAAU,CAAlD;AACD,OAFD,MAEO,KACL;AACCsV,MAAAA,eAAe,GAAG,CAAlB,IAAuBC,aAAa,GAAG,CAAxC,IACA;AACCD,MAAAA,eAAe,GAAG,CAAlB,IAAuBC,aAAa,GAAG,CAAvC,IAA4C,KAAKxT,WAAL,GAAmBhC,IAAI,CAACC,EAJhE,EAIqE;AAC1E8W,QAAAA,kBAAkB,GAAG,KAAK/U,WAAL,GAAmBhC,IAAI,CAACC,EAAL,GAAU,CAAlD;AACD,OANM,MAMA;AACL8W,QAAAA,kBAAkB,GAAG,KAAK/U,WAA1B;AACD,OAbuD,CAcxD;AACA;;;AACA,UAAIqE,IAAI,KAAK,MAAb,EAAqB;AACnB,eAAO0Q,kBAAkB,IAAIxB,eAAtB,IAAyCwB,kBAAkB,IAAIvB,aAAtE;AACD,OAFD,MAEO;AACL;AACA,YAAMwB,eAAe,GAAGhX,IAAI,CAACoS,KAAL,CAAW,KAAKnQ,UAAhB,EAA4B,KAAKxE,WAAjC,CAAxB;AACA,YAAMwZ,iBAAiB,GAAGF,kBAAkB,GAAGC,eAA/C;AACA,YAAME,eAAe,GAAGH,kBAAkB,GAAGC,eAA7C;AACA,eAAQzB,eAAe,IAAI2B,eAApB,IAAyC1B,aAAa,IAAIyB,iBAAjE;AACD;AACF,K,CACD;;;;mCACe9P,S,EAAW;AACxB;;;;;AAKA,UAAI,KAAK1J,WAAL,IAAoB,GAAxB,EAA6B;AAC3BkD,QAAAA,IAAI,CAACsE,OAAL,CAAalH,OAAb,CAAqB8I,MAArB,CAA4BM,SAA5B,EAAuC,CAAvC;AACD;AACF;;;;;;;;;;;;;ICpsBG3E,Q;;;AACJ,oBAAYjF,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,WAAW,EAAE,CADH;AAEVC,MAAAA,eAAe,EAAE,CAFP;AAGV+F,MAAAA,CAAC,EAAE,EAHO;AAIV9F,MAAAA,MAAM,EAAE,CAJE;AAKVC,MAAAA,KAAK,EAAE,CALG;AAMV8F,MAAAA,YAAY,EAAE,CANJ;AAOV7F,MAAAA,gBAAgB,EAAE,CAPR;AAQVkF,MAAAA,KAAK,EAAEvD,WAAW,CAACI,IART;AASV7B,MAAAA,OAAO,EAAE,EATC;AAUVoZ,MAAAA,yBAAyB,EAAE,IAAIjZ,IAAJ,EAVjB;AAWVmU,MAAAA,eAAe,EAAE,IAAInU,IAAJ,EAXP;AAYVF,MAAAA,EAAE,EAAE,CAZM;AAaVoZ,MAAAA,cAAc,EAAE,KAbN;AAcVC,MAAAA,UAAU,EAAE,IAdF;AAeVlZ,MAAAA,WAAW,EAAE,IAfH;AAgBVmE,MAAAA,cAAc,EAAE;AAhBN,KAAZ;AAkBA7D,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BAIM;AACL,UAAM8Z,YAAY,GAAG,KAAK7T,CAAL,GAAS,CAA9B;AACA,UAAM8T,YAAY,GAAG,KAAK9T,CAAL,GAAS,EAA9B;AACA,UAAM+T,cAAc,GAAG,KAAK/T,CAAL,GAAS,EAAhC;AACA9E,MAAAA,GAAG,CAACC,IAAJ,GAJK,CAKL;;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAcC,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CAAhE,EAAmED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB,CAArH;AACAL,MAAAA,GAAG,CAACf,KAAJ,CAAU,KAAKA,KAAf,EAAsB,KAAKA,KAA3B;AACAe,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,GAAcsB,OAAzB;AACAN,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,CAAjB;AACAF,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAWkY,YAAY,GAAGtX,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAA1B,EAAkDqY,YAAY,GAAGtX,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAAjE;AACAN,MAAAA,GAAG,CAACuF,UAAJ,CAAeoT,YAAf,EAA6B,GAA7B;AACA3Y,MAAAA,GAAG,CAACuF,UAAJ,CAAeoT,YAAf,EAA6B,GAA7B;AACA3Y,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ,GAlBK,CAmBL;;AACAxB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKqE,CAAL,GAASzD,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAApB,EAA4C,KAAKwE,CAAL,GAASzD,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAArD;AACAN,MAAAA,GAAG,CAACuF,UAAJ,CAAe,KAAKT,CAApB,EAAuB,GAAvB;AACA9E,MAAAA,GAAG,CAACuF,UAAJ,CAAe,KAAKT,CAApB,EAAuB,GAAvB;AACA9E,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACY,IAAJ,GA1BK,CA2BL;;AACAZ,MAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,CAAC,GAAlB;AACAF,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAeqT,YAAf,EAA6B,EAA7B;AACA5Y,MAAAA,GAAG,CAACuF,UAAJ,CAAeqT,YAAf,EAA6B,GAA7B;AACA5Y,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAnCK,CAoCL;;AACAZ,MAAAA,GAAG,CAACE,SAAJ,CAAc,IAAImB,IAAI,CAACgE,GAAL,CAAS,CAAC,EAAD,GAAM/E,OAAf,CAAlB,EAA2C,IAAIe,IAAI,CAACiE,GAAL,CAAS,CAAC,EAAD,GAAMhF,OAAf,CAA/C;AACAN,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAesT,cAAf,EAA+B,EAA/B;AACA7Y,MAAAA,GAAG,CAACuF,UAAJ,CAAesT,cAAf,EAA+B,GAA/B;AACA7Y,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ,GA5CK,CA6CL;;AACA,WAAKpC,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAAY;AAC/BA,QAAAA,MAAM,CAACC,IAAP;AACD,OAFD;AAGD;;;2BAIME,G,EAAK;AAAA;;AACV,WAAKrC,WAAL,IAAoB,KAAKoC,MAAL,CAAY,KAAK+B,cAAjB,CAApB;AACA,WAAKnE,WAAL,GAAmB,KAAnB;AACAwC,MAAAA,IAAI,CAACwD,OAAL,IAAgBZ,YAAY,CAACa,QAAb,CAAsB,IAAtB,CAAhB,CAHU,CAIV;;AACA,WAAKrG,OAAL,CAAaqC,OAAb,CAAqB,UAACC,MAAD,EAASG,GAAT,EAAcC,GAAd,EAAsB;AACzCJ,QAAAA,MAAM,CAACK,MAAP,CAAcF,GAAd,EAAmBC,GAAnB;AACD,OAFD,EALU,CAQV;;AACA,UAAMgX,mBAAmB,GAAG,IAAIvZ,IAAJ,EAA5B;AACA,UAAIwZ,iBAAJ;;AACA,UAAID,mBAAmB,GAAG,KAAKN,yBAA3B,GAAuD9V,SAAS,CAAC,IAAD,EAAO,IAAP,CAApE,EAAkF;AAChF;AACA,YAAI,KAAKgW,UAAT,EAAqB;AACnB1S,UAAAA,YAAY,CAAC,KAAK0S,UAAN,CAAZ;AACD;;AACDK,QAAAA,iBAAiB,GAAG,CAAC1X,IAAI,CAAC8C,MAAL,MAAiB,IAAjB,GAAwB,CAAxB,GAA4B,CAAC,CAA9B,IAAmCzB,SAAS,CAAC,EAAD,EAAK,EAAL,CAAhE,CALgF,CAMhF;;AACAN,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBtD,UAAAA,eAAe,cAAOga,iBAAP,CADO;AAEtBzW,UAAAA,IAAI,EAAE0W,MAAM,CAACC;AAFS,SAAxB,EAPgF,CAWhF;;AACA7W,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBrD,UAAAA,MAAM,cAAO+Z,iBAAiB,GAAG,GAA3B,CADgB;AAEtBzW,UAAAA,IAAI,EAAEqD,MAAM,CAACuT,SAFS;AAGtBvW,UAAAA,UAAU,EAAE,sBAAM;AAChB;AACA;AACA,gBAAI,CAACX,IAAI,CAACwD,OAAN,IAAiBxD,IAAI,CAACa,OAAtB,IAAiC,KAAI,CAACxD,EAAL,KAAY,CAAjD,EAAoD;;AACpD,YAAA,KAAI,CAACyD,KAAL,GAJgB,CAKhB;;;AACA,YAAA,KAAI,CAAC4V,UAAL,GAAkB9V,UAAU,CAAC,YAAM;AACjC,kBAAI,CAACZ,IAAI,CAACwD,OAAN,IAAiB,KAAI,CAACnG,EAAL,KAAY,CAAjC,EAAoC;;AACpC,cAAA,KAAI,CAACyD,KAAL;AACD,aAH2B,EAGzBJ,SAAS,CAAC,IAAD,EAAO,IAAP,CAHgB,CAA5B;AAID;AAbqB,SAAxB;AAeA,aAAK8V,yBAAL,GAAiCM,mBAAjC;AACD,OAvCS,CAwCV;;;AACA,UAAI,KAAKzZ,EAAL,KAAY,CAAZ,IAAiB,CAAC,KAAKoZ,cAA3B,EAA2C;AACzC,aAAK,IAAI5S,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,CAArB,EAAwBA,CAAC,IAAI,CAA7B,EAAgC;AAC9B7D,UAAAA,IAAI,CAAC4L,OAAL,CAAa1K,IAAb,CAAkB,IAAIiW,MAAJ,CAAW;AAC3Bra,YAAAA,WAAW,EAAE,KAAKA,WADS;AAE3BC,YAAAA,eAAe,EAAE,KAAKA,eAFK;AAG3BC,YAAAA,MAAM,EAAE,KAAKA,MAHc;AAI3Boa,YAAAA,KAAK,EAAEvT;AAJoB,WAAX,CAAlB;AAMD;;AACD3D,QAAAA,WAAW,CAACC,WAAZ,GAA0B,iBAA1B;AACA,aAAKsW,cAAL,GAAsB,IAAtB;AACAxV,QAAAA,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,KAAhB,CAAT;AACD,OArDS,CAsDV;;;AACA2B,MAAAA,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAAC4B,SAA7B,EAAwC/B,GAAxC,EAA6C,UAA7C,EAAyD,KAAK/C,WAA9D,EAA2E,KAAKC,eAAhF;AACD;;;4BAIO;AACN,WAAKK,OAAL,CAAa8D,IAAb,CAAkB,IAAImW,SAAJ,CAAc;AAC9BjW,QAAAA,CAAC,EAAE;AACDhD,UAAAA,CAAC,EAAED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CADpD;AAEDC,UAAAA,CAAC,EAAEF,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB;AAFpD,SAD2B;AAK9BvB,QAAAA,WAAW,EAAE,KAAKA,WALY;AAM9BuE,QAAAA,WAAW,EAAE,KAAKrE;AANY,OAAd,CAAlB;AAQAkD,MAAAA,WAAW,CAACC,WAAZ,GAA0Bd,IAAI,CAAC8C,MAAL,MAAiB,GAAjB,GAAuB,gBAAvB,GAA0C,UAApE;AACAlB,MAAAA,SAAS,CAAC,UAAD,EAAa,IAAb,CAAT;AACD;;;2BAIMU,c,EAAgB;AACrBzB,MAAAA,WAAW,CAACC,WAAZ,GAA0B,mBAA1B;AACAC,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBpD,QAAAA,KAAK,EAAE,CADe;AAEtBqD,QAAAA,IAAI,EAAE2D,IAAI,CAACzD,OAAL,CAAa0D,MAAb,CAAoB,GAApB;AAFgB,OAAxB;AAIA,UAAIzD,SAAS,GAAG,CAAhB;;AACA,UAAIkB,cAAJ,EAAoB;AAClBlB,QAAAA,SAAS,GAAGC,SAAS,CAAC,EAAD,EAAK,EAAL,CAArB;AACA,YAAMwR,IAAI,GAAGxR,SAAS,CAAC,EAAD,EAAK,EAAL,CAAtB;AACAN,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBtD,UAAAA,eAAe,cAAO0D,SAAP,CADO;AAEtB3D,UAAAA,WAAW,cAAOoV,IAAP,CAFW;AAGtB5R,UAAAA,IAAI,EAAEqD,MAAM,CAACnD;AAHS,SAAxB;AAKD;;AACDJ,MAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBrD,QAAAA,MAAM,cAAOyD,SAAS,GAAG,GAAnB,CADgB;AAEtBH,QAAAA,IAAI,EAAE2D,IAAI,CAACzD,OAAL,CAAa0D,MAAb,CAAoB,GAApB;AAFgB,OAAxB;AAIAlE,MAAAA,IAAI,CAACwD,OAAL,IAAgBvC,SAAS,CAAC,OAAD,EAAU,IAAV,EAAgB,IAAhB,CAAzB;AACD;;;;;;IAKGkW,M;;;AACJ,kBAAYva,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVC,MAAAA,WAAW,EAAE,CADH;AAEVC,MAAAA,eAAe,EAAE,CAFP;AAGV;AACA+F,MAAAA,CAAC,EAAE,IAJO;AAKV9F,MAAAA,MAAM,EAAE,CALE;AAMVG,MAAAA,OAAO,EAAE,CANC;AAOViF,MAAAA,KAAK,EAAEvD,WAAW,CAACI,IAPT;AAQV5B,MAAAA,EAAE,EAAE,CARM;AASVia,MAAAA,iBAAiB,EAAE,KATT;AAUVF,MAAAA,KAAK,EAAE;AAVG,KAAZ;AAYAtZ,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACL,UAAM8Z,YAAY,GAAG,KAAK7T,CAAL,GAAS,GAA9B;AACA,UAAM8T,YAAY,GAAG,KAAK9T,CAAL,GAAS,GAA9B;AACA,UAAM+T,cAAc,GAAG,KAAK/T,CAAL,GAAS,GAAhC;AACA9E,MAAAA,GAAG,CAACC,IAAJ,GAJK,CAKL;;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAcC,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDqB,CAAhE,EAAmED,SAAS,CAAC,KAAKrB,WAAN,EAAmB,KAAKC,eAAxB,CAAT,CAAkDsB,CAArH,EANK,CAOL;;AACAL,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKA,MAAL,GAAcsB,OAAzB;AACAN,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc,GAAd,EAAmB,CAACmB,IAAI,CAAC+L,IAAL,CAAU,IAAV,CAApB;AACApN,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAWkY,YAAY,GAAGtX,IAAI,CAACgE,GAAL,CAAS,CAAT,CAA1B,EAAuCsT,YAAY,GAAGtX,IAAI,CAACiE,GAAL,CAAS,CAAT,CAAtD;AACAtF,MAAAA,GAAG,CAACU,MAAJ,CAAWiY,YAAY,GAAGtX,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAA1B,EAAmDqY,YAAY,GAAGtX,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAlE;AACAN,MAAAA,GAAG,CAACU,MAAJ,CAAWiY,YAAY,GAAGtX,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAA1B,EAAmDqY,YAAY,GAAGtX,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAlE;AACAN,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ,GAlBK,CAmBL;;AACAxB,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,KAAKqE,CAAL,GAASzD,IAAI,CAACgE,GAAL,CAAS,CAAT,CAApB,EAAiC,KAAKP,CAAL,GAASzD,IAAI,CAACiE,GAAL,CAAS,CAAT,CAA1C;AACAtF,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKoE,CAAL,GAASzD,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAApB,EAA6C,KAAKwE,CAAL,GAASzD,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAtD;AACAN,MAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKoE,CAAL,GAASzD,IAAI,CAACgE,GAAL,CAAS,MAAM/E,OAAf,CAApB,EAA6C,KAAKwE,CAAL,GAASzD,IAAI,CAACiE,GAAL,CAAS,MAAMhF,OAAf,CAAtD;AACAN,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACY,IAAJ,GA1BK,CA2BL;;AACAZ,MAAAA,GAAG,CAACE,SAAJ,CAAc,CAAC,IAAf,EAAqB,CAAC,IAAtB;AACAF,MAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAWkY,YAAY,GAAGvX,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAA1B,EAAkDsY,YAAY,GAAGvX,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAAjE;AACAN,MAAAA,GAAG,CAACU,MAAJ,CAAWkY,YAAY,GAAGvX,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAA1B,EAAkDsY,YAAY,GAAGvX,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAAjE;AACAN,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAnCK,CAoCL;;AACAZ,MAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,CAAC,IAAlB;AACAF,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAWmY,cAAc,GAAGxX,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAA5B,EAAoDuY,cAAc,GAAGxX,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAArE;AACAN,MAAAA,GAAG,CAACU,MAAJ,CAAWmY,cAAc,GAAGxX,IAAI,CAACgE,GAAL,CAAS,KAAK/E,OAAd,CAA5B,EAAoDuY,cAAc,GAAGxX,IAAI,CAACiE,GAAL,CAAS,KAAKhF,OAAd,CAArE;AACAN,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ;AACD;;;2BACMK,G,EAAK;AAAA;;AACV,WAAK7C,MAAL,IAAe,KAAKG,OAApB;;AACA,UAAI,CAAC,KAAKma,iBAAV,EAA6B;AAC3BlX,QAAAA,SAAS,CAACC,EAAV,CAAa,IAAb,EAAmB,GAAnB,EAAwB;AACtBtD,UAAAA,eAAe,YAAK,KAAKqa,KAAL,KAAe,CAAf,GAAmB,IAAnB,GAA0B,IAA/B,OADO;AAEtB9W,UAAAA,IAAI,EAAEqD,MAAM,CAACnD,OAFS;AAGtBG,UAAAA,UAAU,EAAE,sBAAM;AAChBP,YAAAA,SAAS,CAACC,EAAV,CAAa,MAAb,EAAmB,GAAnB,EAAwB;AACtBvD,cAAAA,WAAW,EAAE,CADS;AAEtBwD,cAAAA,IAAI,EAAEiX,MAAM,CAACC;AAFS,aAAxB;AAID;AARqB,SAAxB;AAUA,aAAKF,iBAAL,GAAyB,IAAzB;AACD,OAdS,CAeV;;;AACA1U,MAAAA,YAAY,CAACgB,UAAb,CAAwB5D,IAAI,CAAC4L,OAA7B,EAAsC/L,GAAtC,EAA2C,UAA3C,EAAuD,KAAK/C,WAA5D,EAAyE,KAAKC,eAA9E;AACD;;;;;;IAKGsa,S;;;AACJ,qBAAYza,IAAZ,EAAkB;AAAA;;AAChB,QAAMC,GAAG,GAAG;AACVuE,MAAAA,CAAC,EAAE;AACDhD,QAAAA,CAAC,EAAE,CADF;AAEDC,QAAAA,CAAC,EAAE;AAFF,OADO;AAKVgE,MAAAA,KAAK,EAAE,CALG;AAMVC,MAAAA,MAAM,EAAE,CAAC,CANC;AAOVjB,MAAAA,WAAW,EAAE,CAPH;AAQVe,MAAAA,KAAK,EAAEvD,WAAW,CAACI;AART,KAAZ;AAUAnB,IAAAA,MAAM,CAACC,MAAP,CAAclB,GAAd,EAAmBD,IAAnB;AACAkB,IAAAA,MAAM,CAACC,MAAP,CAAc,IAAd,EAAoBlB,GAApB;AACD;;;;2BACM;AACLmB,MAAAA,GAAG,CAACC,IAAJ;AACAD,MAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKkD,CAAL,CAAOhD,CAArB,EAAwB,KAAKgD,CAAL,CAAO/C,CAA/B;AACAL,MAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKqE,WAAL,GAAmB/C,OAA9B;AACAN,MAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKmE,KAAnB,EAA0B,CAA1B,EAJK,CAKL;;AACArE,MAAAA,GAAG,CAACO,SAAJ,GAAgB,KAAK6D,KAArB;AACApE,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,IAAf,EAAqB,GAArB;AACAvF,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ,GAZK,CAaL;;AACAZ,MAAAA,GAAG,CAACO,SAAJ,GAAgB,0BAAhB;AACAP,MAAAA,GAAG,CAACQ,SAAJ;AACAR,MAAAA,GAAG,CAACS,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAlB;AACAT,MAAAA,GAAG,CAACuF,UAAJ,CAAe,EAAf,EAAmB,GAAnB;AACAvF,MAAAA,GAAG,CAACuF,UAAJ,CAAe,IAAf,EAAqB,GAArB;AACAvF,MAAAA,GAAG,CAACW,SAAJ;AACAX,MAAAA,GAAG,CAACY,IAAJ;AACAZ,MAAAA,GAAG,CAACwB,OAAJ;AACD;;;2BACMK,G,EAAKC,G,EAAK;AACf;AACA,WAAKuC,KAAL,IAAc,KAAKC,MAAnB,CAFe,CAGf;;AACAM,MAAAA,YAAY,CAACC,aAAb,CAA2B,IAA3B,EAAiChD,GAAjC,EAAsCC,GAAtC,EAA2C,IAA3C,EAJe,CAKf;;AACA,WAAK4U,cAAL,CAAoB7U,GAApB,EAAyBC,GAAzB;AACD,K,CACD;;;;mCACeD,G,EAAKC,G,EAAK;AACvB;AACA,UAAI,KAAKuC,KAAL,IAAc,CAAC,IAAnB,EAAyB;AACvBvC,QAAAA,GAAG,CAACoG,MAAJ,CAAWrG,GAAX,EAAgB,CAAhB;AACD;AACF;;;;;;;;;;;;;AC7TH7B,GAAG,CAACuF,UAAJ,GAAiB,UAAUT,CAAV,EAAaqO,KAAb,EAAkC;AAAA,MAAdsG,QAAc,uEAAH,CAAG;AACjD,SAAOzZ,GAAG,CAACU,MAAJ,CAAWoE,CAAC,GAAGzD,IAAI,CAACgE,GAAL,CAAS8N,KAAK,GAAG7S,OAAR,GAAkBmZ,QAA3B,CAAf,EAAqD3U,CAAC,GAAGzD,IAAI,CAACiE,GAAL,CAAS6N,KAAK,GAAG7S,OAAR,GAAkBmZ,QAA3B,CAAzD,CAAP;AACD,CAFD,C,CAIA;;;AACA,SAAS9U,cAAT,CAAwBjD,MAAxB,EAAgCvB,SAAhC,EAA2CgB,SAA3C,EAAsDgG,WAAtD,EAAmE;AACjEnH,EAAAA,GAAG,CAACkB,WAAJ,GAAkBQ,MAAM,CAAC0C,KAAzB;AACApE,EAAAA,GAAG,CAACmB,SAAJ,GAAgBA,SAAhB;AACAnB,EAAAA,GAAG,CAACmH,WAAJ,GAAkBA,WAAlB;AACAnH,EAAAA,GAAG,CAACoH,UAAJ,GAAiB,CAAjB,CAJiE,CAKjE;;AACApH,EAAAA,GAAG,CAACQ,SAAJ;;AACA,OAAK,IAAIqF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnE,MAAM,CAAC4B,UAA3B,EAAuCuC,CAAC,IAAI,CAA5C,EAA+C;AAC7C,QAAM6T,MAAM,GAAI7T,CAAC,GAAGnE,MAAM,CAAC6C,QAAZ,GAAyB+F,UAAU,GAAG5I,MAAM,CAAC+C,QAA5D;AACAzE,IAAAA,GAAG,CAACU,MAAJ,CAAWgB,MAAM,CAACvB,SAAD,CAAN,GAAqBuB,MAAM,CAAC8C,OAAP,GAAiBnD,IAAI,CAACiE,GAAL,CAASoU,MAAT,CAAjD,EAAoE7T,CAApE;AACD;;AACD7F,EAAAA,GAAG,CAACuB,MAAJ,GAXiE,CAYjE;;AACAvB,EAAAA,GAAG,CAACQ,SAAJ;;AACA,OAAK,IAAIqF,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGnE,MAAM,CAAC4B,UAA3B,EAAuCuC,EAAC,IAAI,CAA5C,EAA+C;AAC7C,QAAM6T,OAAM,GAAI7T,EAAC,GAAGnE,MAAM,CAAC6C,QAAZ,GAAyB+F,UAAU,GAAG5I,MAAM,CAAC+C,QAA5D;;AACAzE,IAAAA,GAAG,CAACU,MAAJ,CAAWgB,MAAM,CAACvB,SAAD,CAAN,GAAqBuB,MAAM,CAAC8C,OAAP,GAAiBnD,IAAI,CAACiE,GAAL,CAASoU,OAAT,CAAjD,EAAoE,CAAC7T,EAArE;AACD;;AACD7F,EAAAA,GAAG,CAACuB,MAAJ;AACD,C,CAED;;;AACA,SAASoY,WAAT,CAAqBvW,CAArB,EAAwB;AACtBpD,EAAAA,GAAG,CAACC,IAAJ;AACED,EAAAA,GAAG,CAACE,SAAJ,CAAckD,CAAC,CAAChD,CAAhB,EAAmBgD,CAAC,CAAC/C,CAArB;AACAL,EAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACC,MAA5B,CAHoB,CAIpB;;AACAd,EAAAA,GAAG,CAACQ,SAAJ;AACAR,EAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,EAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,EAAd;AACAV,EAAAA,GAAG,CAACW,SAAJ;AACAX,EAAAA,GAAG,CAACY,IAAJ,GAXoB,CAYpB;;AACAZ,EAAAA,GAAG,CAACC,IAAJ;AACED,EAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,EAAjB;AACAF,EAAAA,GAAG,CAACQ,SAAJ;AACAR,EAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,EAAZ,EAAgB,CAAhB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAV,EAAAA,GAAG,CAACW,SAAJ;AACAX,EAAAA,GAAG,CAACY,IAAJ;AACFZ,EAAAA,GAAG,CAACwB,OAAJ,GAtBoB,CAuBpB;;AACAxB,EAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,EAAAA,GAAG,CAACC,IAAJ;AACED,EAAAA,GAAG,CAACE,SAAJ,CAAc,CAAC,IAAf,EAAqB,CAArB;AACAF,EAAAA,GAAG,CAACQ,SAAJ;AACAR,EAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,CAAf;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAC,CAAnB;AACAV,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,IAAZ,EAAkB,CAAC,CAAnB;AACAV,EAAAA,GAAG,CAACW,SAAJ;AACAX,EAAAA,GAAG,CAACY,IAAJ;AACFZ,EAAAA,GAAG,CAACwB,OAAJ,GAlCoB,CAmCpB;;AACAuS,EAAAA,aAAa,CAAC;AAAE3T,IAAAA,CAAC,EAAE,CAAC,EAAN;AAAUC,IAAAA,CAAC,EAAE;AAAb,GAAD,CAAb;AACFL,EAAAA,GAAG,CAACwB,OAAJ;AACD,C,CAID;;;AACA,SAASuS,aAAT,GAA8D;AAAA,MAAvC7T,SAAuC,uEAA3B;AAAEE,IAAAA,CAAC,EAAE,CAAL;AAAQC,IAAAA,CAAC,EAAE;AAAX,GAA2B;AAAA,MAAXpB,KAAW,uEAAH,CAAG;AAC5De,EAAAA,GAAG,CAACO,SAAJ,GAAgBM,WAAW,CAACE,KAA5B;AACAf,EAAAA,GAAG,CAACE,SAAJ,CAAcA,SAAS,CAACE,CAAxB,EAA2BF,SAAS,CAACG,CAArC;AACAL,EAAAA,GAAG,CAACQ,SAAJ;AACAR,EAAAA,GAAG,CAACS,MAAJ,CAAW,CAAX,EAAc,CAAd;AACAT,EAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKsB,OAAhB;AACAN,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,KAAKzB,KAAnB;AACAe,EAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,KAAKjB,KAAtB;AACAe,EAAAA,GAAG,CAAChB,MAAJ,CAAW,CAAC,EAAD,GAAMsB,OAAjB;AAEAN,EAAAA,GAAG,CAACU,MAAJ,CAAW,KAAKzB,KAAhB,EAAuB,CAAvB;AACAe,EAAAA,GAAG,CAACE,SAAJ,CAAc,KAAKjB,KAAnB,EAA0B,CAA1B;AAEAe,EAAAA,GAAG,CAAChB,MAAJ,CAAW,KAAKsB,OAAhB;AACAN,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,KAAKzB,KAAnB;AACAe,EAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,KAAKjB,KAAtB;AACAe,EAAAA,GAAG,CAAChB,MAAJ,CAAW,CAAC,EAAD,GAAMsB,OAAjB;AAEAN,EAAAA,GAAG,CAAChB,MAAJ,CAAW,MAAMsB,OAAjB;AACAN,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAX,EAAc,CAAC,EAAD,GAAMzB,KAApB;AACAe,EAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,CAAC,EAAD,GAAMjB,KAAvB;AACAe,EAAAA,GAAG,CAAChB,MAAJ,CAAW,CAAC,GAAD,GAAOsB,OAAlB;AAEAN,EAAAA,GAAG,CAACU,MAAJ,CAAW,CAAC,CAAD,GAAKzB,KAAhB,EAAuB,CAAvB;AACAe,EAAAA,GAAG,CAACW,SAAJ;AACAX,EAAAA,GAAG,CAACY,IAAJ;AACD;;AAID,SAAST,SAAT,CAAmBrB,WAAnB,EAAgCC,eAAhC,EAAiD;AAC/C,SAAO;AACLqB,IAAAA,CAAC,EAAG0M,KAAK,GAAG,CAAT,GAAchO,WAAW,GAAGuC,IAAI,CAACgE,GAAL,CAAStG,eAAe,GAAGuB,OAA3B,CAD1B;AAELD,IAAAA,CAAC,EAAG0M,KAAK,GAAG,CAAT,GAAcjO,WAAW,GAAGuC,IAAI,CAACiE,GAAL,CAASvG,eAAe,GAAGuB,OAA3B;AAF1B,GAAP;AAID,C,CAID;;;AACA,SAASgH,OAAT,CAAiBlH,CAAjB,EAAoBC,CAApB,EAAuB;AACrB,SAAOgB,IAAI,CAACuY,GAAL,CAASvZ,CAAT,IAAcgB,IAAI,CAACuY,GAAL,CAASxZ,CAAT,CAArB;AACD,C,CAID;;;AACA,SAASuX,aAAT,CAAuBkC,CAAvB,EAA0BC,CAA1B,EAA6B3G,KAA7B,EAAoC;AAClC,SAAO9R,IAAI,CAAC+L,IAAL,CAAUyM,CAAC,GAAGA,CAAJ,GAAQC,CAAC,GAAGA,CAAZ,GAAgB,IAAID,CAAJ,GAAQC,CAAR,GAAYzY,IAAI,CAACgE,GAAL,CAAS8N,KAAK,GAAG7S,OAAjB,CAAtC,CAAP;AACD;;AAED,SAAS2X,SAAT,CAAmB4B,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4B;AAC1B,SAAO1Y,IAAI,CAAC2Y,IAAL,CAAU,CAACH,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgBD,CAAC,GAAGA,CAArB,KAA2B,IAAID,CAAJ,GAAQE,CAAnC,CAAV,CAAP;AACD,C,CAID;;;AACA,SAASrX,SAAT,CAAmBuX,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3B,SAAO7Y,IAAI,CAAC8Y,KAAL,CAAW9Y,IAAI,CAAC8C,MAAL,MAAiB+V,GAAG,GAAGD,GAAN,GAAY,CAA7B,IAAkCA,GAA7C,CAAP;AACD;;AAID,SAAShX,SAAT,CAAmBmX,UAAnB,EAA+BC,IAA/B,EAA+E;AAAA,MAA1CC,QAA0C,uEAA/B,IAA+B;AAAA,MAAzBC,OAAyB,uEAAf,CAAe;AAAA,MAAZlQ,MAAY,uEAAH,CAAG;AAC7E,MAAIrI,IAAI,CAACqM,OAAT,EAAkB;AAClB,MAAImM,KAAJ;;AACA,UAAQJ,UAAR;AACE,SAAK,UAAL;AACExX,MAAAA,UAAU,CAAC,YAAM;AACf4X,QAAAA,KAAK,GAAG,IAAIC,IAAI,CAACC,aAAT,GAAyBC,QAAzB,EAAR;AACAH,QAAAA,KAAK,CAACI,oBAAN,CAA2BP,IAA3B,EAAiCC,QAAjC;AACAE,QAAAA,KAAK,CAACnQ,MAAN,CAAaoG,KAAb,GAAqBpG,MAArB;AACD,OAJS,EAIPkQ,OAJO,CAAV;AAKA;;AACF,SAAK,KAAL;AACE3X,MAAAA,UAAU,CAAC,YAAM;AACf4X,QAAAA,KAAK,GAAG,IAAIC,IAAI,CAACI,QAAT,GAAoBF,QAApB,EAAR;AACAH,QAAAA,KAAK,CAACI,oBAAN,CAA2BP,IAA3B,EAAiCC,QAAjC;AACAE,QAAAA,KAAK,CAACnQ,MAAN,CAAaoG,KAAb,GAAqBpG,MAArB;AACD,OAJS,EAIPkQ,OAJO,CAAV;AAKA;;AACF,SAAK,MAAL;AACE3X,MAAAA,UAAU,CAAC,YAAM;AACf4X,QAAAA,KAAK,GAAG,IAAIC,IAAI,CAACK,SAAT,GAAqBH,QAArB,EAAR;AACAH,QAAAA,KAAK,CAACI,oBAAN,CAA2BP,IAA3B,EAAiCC,QAAjC;AACAE,QAAAA,KAAK,CAACnQ,MAAN,CAAaoG,KAAb,GAAqBpG,MAArB;AACD,OAJS,EAIPkQ,OAJO,CAAV;AAKA;;AACF;AACE3X,MAAAA,UAAU,CAAC,YAAM;AACf4X,QAAAA,KAAK,GAAG,IAAIC,IAAI,CAACM,KAAT,GAAiBJ,QAAjB,EAAR;AACAH,QAAAA,KAAK,CAACI,oBAAN,CAA2BP,IAA3B,EAAiCC,QAAjC;AACAE,QAAAA,KAAK,CAACnQ,MAAN,CAAaoG,KAAb,GAAqBpG,MAArB;AACD,OAJS,EAIPkQ,OAJO,CAAV;AAKA;AA5BJ;AA8BD;AAGD;;;IACMS,I;;;AACJ,gBAAY5a,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAChB,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACD;;;;wBACGD,C,EAAGC,C,EAAG;AACR,WAAKD,CAAL,GAASA,CAAT;AACA,WAAKC,CAAL,GAASA,CAAT;AACD;;;yBACID,C,EAAGC,C,EAAG;AACT,WAAKD,CAAL,IAAUA,CAAV;AACA,WAAKC,CAAL,IAAUA,CAAV;AACD;;;wBACGuV,C,EAAG;AACL,aAAO,IAAIoF,IAAJ,CAAS,KAAK5a,CAAL,GAASwV,CAAC,CAACxV,CAApB,EAAuB,KAAKC,CAAL,GAASuV,CAAC,CAACvV,CAAlC,CAAP;AACD;;;wBACGuV,C,EAAG;AACL,aAAO,IAAIoF,IAAJ,CAAS,KAAK5a,CAAL,GAASwV,CAAC,CAACxV,CAApB,EAAuB,KAAKC,CAAL,GAASuV,CAAC,CAACvV,CAAlC,CAAP;AACD;;;wBACG4a,C,EAAG;AACL,aAAO,IAAID,IAAJ,CAAS,KAAK5a,CAAL,GAAS6a,CAAlB,EAAqB,KAAK5a,CAAL,GAAS4a,CAA9B,CAAP;AACD;;;4BACO;AACN,aAAO,IAAID,IAAJ,CAAS,KAAK5a,CAAd,EAAiB,KAAKC,CAAtB,CAAP;AACD;;;0BACKuV,C,EAAG;AACP,aAAO,KAAKxV,CAAL,KAAWwV,CAAC,CAACxV,CAAb,IAAkB,KAAKC,CAAL,KAAWuV,CAAC,CAACvV,CAAtC;AACD;;;wBACY;AACX,aAAOgB,IAAI,CAAC+L,IAAL,CAAU,KAAKhN,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAA1C,CAAP;AACD,K;sBACU6a,M,EAAQ;AACjB,UAAMC,SAAS,GAAG,KAAKC,IAAL,CAAUC,GAAV,CAAcH,MAAd,CAAlB;AACA,WAAKI,GAAL,CAASH,SAAS,CAAC/a,CAAnB,EAAsB+a,SAAS,CAAC9a,CAAhC;AACD;;;wBACW;AACV,aAAOgB,IAAI,CAACoS,KAAL,CAAW,KAAKpT,CAAhB,EAAmB,KAAKD,CAAxB,CAAP;AACD;;;wBACU;AACT,aAAO,KAAKib,GAAL,CAAS,IAAI,KAAK9K,MAAlB,CAAP;AACD","file":"index.js","sourcesContent":["class Boss {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      rotate: 0,\r\n      scale: 0,\r\n      // axisRotateRV: 1,\r\n      axisRotateAngleV: 1,\r\n      rotateV: 1,\r\n      bullets: [],\r\n      HP: 2,\r\n      beforeGenerateEnemyTime: new Date(),\r\n      beginAppear: true,\r\n      isAppearing: false,\r\n      isDisappeared: false,\r\n      appearTimes: 0,\r\n      appearTimer: null,\r\n      disappearTimer: null,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.scale(this.scale, this.scale);\r\n      ctx.rotate(this.rotate * degToPi);\r\n      // 透明頭\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(11, 0);\r\n      ctx.lineTo(18, 6);\r\n      ctx.lineTo(18, 15);\r\n      ctx.lineTo(-18, 15);\r\n      ctx.lineTo(-18, 6);\r\n      ctx.lineTo(-11, 0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 黃頭\r\n      ctx.fillStyle = globalColor.orange;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 9);\r\n      ctx.lineTo(11, 9);\r\n      ctx.lineTo(18, 15);\r\n      ctx.lineTo(18, 36);\r\n      ctx.lineTo(-18, 36);\r\n      ctx.lineTo(-18, 15);\r\n      ctx.lineTo(-11, 9);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 裝飾內透明頭\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.25)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 9 + 8);\r\n      ctx.lineTo(4, 9 + 8);\r\n      ctx.lineTo(14, 24);\r\n      ctx.lineTo(14, 36 - 8);\r\n      ctx.lineTo(-14, 36 - 8);\r\n      ctx.lineTo(-14, 24);\r\n      ctx.lineTo(-4, 9 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 右白肩\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(18, -6);\r\n      ctx.lineTo(18 + 8, -6);\r\n      ctx.lineTo(18 + 8 + 8, 15);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6);\r\n      ctx.lineTo(18, 36 + 6);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 左白肩\r\n      ctx.fillStyle = globalColor.white;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18, -6);\r\n      ctx.lineTo(-18 - 8, -6);\r\n      ctx.lineTo(-18 - 8 - 8, 15);\r\n      ctx.lineTo(-18 - 8 - 8, 36 + 6);\r\n      ctx.lineTo(-18, 36 + 6);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 右紅翼\r\n      ctx.fillStyle = globalColor.red;\r\n      ctx.beginPath();\r\n      ctx.moveTo(18 + 8 + 8, 9);\r\n      ctx.lineTo(18 + 8 + 8 + 8, 9);\r\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 8 + 16, 36 + 6 + 8);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 左藍翼\r\n      ctx.fillStyle = globalColor.blue;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4, 9);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 + 4, 9);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 右灰風口\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(18 + 8 + 8, 36 + 6 + 8);\r\n      ctx.lineTo(18 + 8 + 8, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(18 + 8 + 8 + 16, 36 + 6 + 8);\r\n      ctx.fill();\r\n      // 左灰風口\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 + 4, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.fill();\r\n      // 右裝飾白圈\r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.lineWidth = 2.8;\r\n      ctx.beginPath();\r\n      ctx.arc(18 + 8 + 8 + 11, 36 + 6 - 2, 4.4, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      // 左裝飾黃叉\r\n      ctx.strokeStyle = globalColor.orange;\r\n      // ctx.lineWidth = 2.8;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16);\r\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16 + 9.6);\r\n      ctx.moveTo(-18 - 8 - 8 + 4 - 3.2 - 9.6, 9 + 16);\r\n      ctx.lineTo(-18 - 8 - 8 + 4 - 3.2, 9 + 16 + 9.6);\r\n      ctx.stroke();\r\n      // 左裝飾透明四邊形\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.24)';\r\n      ctx.beginPath();\r\n      ctx.moveTo(-18 - 8 - 8 - 8 - 16 + 4 + 4, 36 + 6 - 8.25);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6);\r\n      ctx.lineTo(-18 - 8 - 8 - 8 - 16 + 4, 36 + 6 + 8);\r\n      ctx.lineTo(-18 - 8 - 8 - 6 + 4, 36 + 6 + 8);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 繪製 boss 子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    // boss 出現\r\n    this.beginAppear && this.appear();\r\n    this.beginAppear = false;\r\n    if (!this.isAppearing && !this.isDisappeared) {\r\n    }\r\n    // 更新 boss 子彈\r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n  }\r\n  appear() {\r\n    if (game.isEnd) return;\r\n    this.appearTimes += 1;\r\n    this.isDisappeared = false;\r\n    this.isAppearing = true;\r\n    gameCrawler.textContent = '⚠ BOSS IS COMING';\r\n    TweenLite.to(this, 1.2, {\r\n      scale: 1,\r\n      ease: Expo.easeOut,\r\n    });\r\n    const rotateNum = getRandom(45, 135);\r\n    TweenLite.to(this, 1.6, {\r\n      axisRotateAngle: `+=${rotateNum}`,\r\n      rotate: `+=${rotateNum}`,\r\n      ease: Expo.easeOut,\r\n      onComplete: () => {\r\n        this.isAppearing = false;\r\n      },\r\n    });\r\n    if (this.appearTimes && this.appearTimes % 2) {\r\n      setTimeout(() => {\r\n        if (this.HP === 0 || game.isPause) return;\r\n        this.shoot();\r\n      }, 2000);\r\n    } else {\r\n      setTimeout(() => {\r\n        if (this.HP === 0 || game.isPause) return;\r\n        this.generateEnemy();\r\n      }, 2000);\r\n    }\r\n    this.disappearTimer = setTimeout(() => {\r\n      if (this.HP === 0 || game.isPause) return;\r\n      this.disappear();\r\n    }, 4000);\r\n    playSound('membrane', 'A4', '4n');\r\n  }\r\n  disappear() {\r\n    if (game.isEnd) return;\r\n    this.isDisappeared = true;\r\n    TweenLite.to(this, 1.2, {\r\n      scale: 0,\r\n      ease: Expo.easeOut,\r\n    });\r\n    const rotateNum = getRandom(45, 135);\r\n    TweenLite.to(this, 1.6, {\r\n      axisRotateAngle: `+=${rotateNum}`,\r\n      rotate: `+=${rotateNum}`,\r\n      ease: Expo.easeOut,\r\n    });\r\n    this.appearTimer = setTimeout(() => {\r\n      if (this.HP === 0 || game.isPause) return;\r\n      this.appear();\r\n    }, 2000);\r\n    playSound('membrane', 'F3', '4n');\r\n  }\r\n  shoot() {\r\n    this.bullets.push(new BossBullet({\r\n      p: {\r\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n      },\r\n      rotateAngle: this.rotate,\r\n      axisRotateR: this.axisRotateR,\r\n    }));\r\n    playSound('mono', 'F2', '4n', 0, -10);\r\n    setTimeout(() => {\r\n      this.bullets.push(new BossBullet({\r\n        p: {\r\n          x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n          y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n        },\r\n        rotateAngle: this.rotate,\r\n        waveLength: 14,\r\n        axisRotateR: this.axisRotateR,\r\n      }));\r\n      playSound('mono', 'F2', '4n', 0, -10);\r\n    }, 200);\r\n  }\r\n  generateEnemy() {\r\n    let num;\r\n    const chooseEnemy = () => {\r\n      num = getRandom(1, 3);\r\n      switch (num) {\r\n        case 1:\r\n          game.circles.push(new Circle({\r\n            axisRotateR: this.axisRotateR,\r\n            axisRotateAngle: this.axisRotateAngle % 360,\r\n            axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n            rotate: getRandom(0, 360),\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        case 2:\r\n          game.triangles.push(new Triangle({\r\n            axisRotateR: this.axisRotateR,\r\n            axisRotateAngle: this.axisRotateAngle % 360,\r\n            axisRotateAngleV: getRandom(2, 8) / 10,\r\n            rotate: this.axisRotateAngle % 360,\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        case 3:\r\n          const rotate = getRandom(0, 360);\r\n          game.polygons.push(new Polygon({\r\n            axisRotateR: {\r\n              whole: this.axisRotateR,\r\n              big: this.axisRotateR,\r\n              small: this.axisRotateR,\r\n            },\r\n            axisRotateAngle: {\r\n              whole: this.axisRotateAngle % 360,\r\n              big: this.axisRotateAngle % 360,\r\n              small: this.axisRotateAngle % 360,\r\n            },\r\n            rotate: {\r\n              whole: rotate,\r\n              big: rotate,\r\n              small: rotate,\r\n            },\r\n            rotateV: getRandom(4, 8) / 10,\r\n            isBossGenerate: true,\r\n          }));\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    chooseEnemy();\r\n    if (Math.random() >= 0.5) {\r\n      setTimeout(() => {\r\n        chooseEnemy();\r\n      }, 400);\r\n    }\r\n  }\r\n}\r\n\r\nclass BossBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 8,\r\n      moveXV: 4,\r\n      rotateAngle: 0,\r\n      waveLength: 22,\r\n      waveFreq: 0.3,\r\n      waveAmp: 4,\r\n      waveFlow: 3,\r\n      isBoss: true,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate((this.rotateAngle - 90) * degToPi);\r\n      // 開始畫 boss 子彈\r\n      drawWaveBullet(this, 'moveX', 2.4, 'rgba(245, 175, 95, 0.72)');\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // boss 子彈移動\r\n    this.moveX += this.moveXV;\r\n    enemyMethods.attackShooter(this, idx, arr);\r\n  }\r\n}","class Circle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 22,\r\n      rotate: 0,\r\n      scale: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngleV: 0,\r\n      // rotateV: 0,\r\n      color: globalColor.orange,\r\n      HP: 2,\r\n      bullets: [],\r\n      beforeRotateTime: new Date(),\r\n      isRotating: false,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  draw() {\r\n    const circleBigR = this.r + 5;\r\n    const circleSmallR = this.r - 10;\r\n    const subAxisRotateR = 14;\r\n    ctx.save();\r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.scale(this.scale, this.scale);\r\n    // 大淡圓\r\n    ctx.beginPath();\r\n    ctx.arc(4, 0, circleBigR, 0, Math.PI * 2);\r\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n    ctx.fill();\r\n    // 小淡圓\r\n    ctx.beginPath();\r\n    ctx.arc(-20, 0, circleSmallR, 0, Math.PI * 2);\r\n    ctx.fillStyle = 'rgba(245, 175, 95, 0.21)';\r\n    ctx.fill();\r\n    // 主體圓\r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // 小三圓\r\n    ctx.beginPath();\r\n    ctx.fillStyle = globalColor.white;\r\n    // ctx.arc(subAxisRotateR, 0, 2.4, 0, Math.PI * 2);\r\n    ctx.arc(subAxisRotateR * Math.cos(60 * degToPi), subAxisRotateR * Math.sin(60 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(subAxisRotateR * Math.cos(180 * degToPi), subAxisRotateR * Math.sin(180 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(subAxisRotateR * Math.cos(300 * degToPi), subAxisRotateR * Math.sin(300 * degToPi), 2.4, 0, Math.PI * 2);\r\n    ctx.fill();\r\n    // 神經\r\n    ctx.beginPath();\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.lineTo(-8, 0);\r\n    ctx.$triLineTo(-2, 32);\r\n    ctx.$triLineTo(-12, 120);\r\n    ctx.$triLineTo(-2.4, 176);\r\n    ctx.$triLineTo(-8, 240);\r\n    ctx.$triLineTo(-1.6, 320);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // 繪製圓形子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    game.isStart && enemyMethods.approach(this);\r\n    // 更新圓形子彈\r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // 當圓形自身在旋轉時，圓形不要移動\r\n    if (!this.isRotating) {\r\n      this.axisRotateAngle += this.axisRotateAngleV;\r\n    }\r\n    // 每 4-8 秒，自身旋轉一次\r\n    const rotateTime = new Date();\r\n    if ((rotateTime - this.beforeRotateTime) > getRandom(4000, 8000)) {\r\n      this.isRotating = true;\r\n      TweenLite.to(this, 0.4, {\r\n        // rotate: this.axisRotateAngle - 180,\r\n        // rotate: this.axisRotateAngle % 360,\r\n        rotate: this.axisRotateAngle,\r\n        ease: Power2.easeOut,\r\n        // 自身旋轉完後射擊\r\n        onComplete: () => {\r\n          this.isRotating = false;\r\n          if (!game.isStart) return;\r\n          this.shoot();\r\n        },\r\n      });\r\n      this.beforeRotateTime = rotateTime;\r\n    }\r\n    // 當圓形撞上 shooter\r\n    enemyMethods.hitShooter(game.circles, idx, 'circle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n\r\n\r\n  shoot() {\r\n    // 射 1-2 發\r\n    for (let i = 0; i < getRandom(1, 2); i += 1) {\r\n      const timer = setTimeout(() => {\r\n        this.bullets.push(new CirBullet({\r\n          p: {\r\n            x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n            y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n          },\r\n          rotateAngle: this.rotate,\r\n          moveX: -this.r - 10,\r\n          // rotateAngle: Math.sin(this.rotate * degToPi),\r\n          axisRotateR: this.axisRotateR,\r\n        }));\r\n        clearTimeout(timer);\r\n        // 間隔 0.2-0.4 秒\r\n      }, i * getRandom(200, 400));\r\n    }\r\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK🤕' : 'ATTACK⚡️';\r\n    playSound('membrane', 'D5');\r\n  }\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\r\n    // gameCrawler.innerHTML = '<i class=\"fas fa-exclamation-triangle\"></i>ENEMY IS COMING!';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    TweenLite.from(this, 1.6, {\r\n      rotate: 0,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    if (isBossGenerate) {\r\n      TweenLite.to(this, 1.6, {\r\n        axisRotateR: `+=${getRandom(80, 160)}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    game.isStart && playSound('synth', 'F4', '4n');\r\n    // playSound('synth', 'B4', '8n', 50);\r\n  }\r\n}\r\n\r\n\r\n\r\nclass CirBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      axisRotateR: 0,\r\n      color: globalColor.orange,\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      // v: 4,\r\n      rotateAngle: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n      ctx.translate(this.p.x, this.p.y);\r\n      ctx.rotate(this.rotateAngle * degToPi); \r\n      ctx.beginPath();\r\n      ctx.arc(this.moveX, 0, 4, 0, Math.PI * 2);\r\n      ctx.fillStyle = this.color;\r\n      ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // 圓形子彈移動\r\n    this.moveX += this.moveXV;\r\n    // 子彈擊中 shooter\r\n    enemyMethods.attackShooter(this, idx, arr);\r\n  }\r\n}","/* \r\n ** 敵人方法\r\n */\r\nconst enemyMethods = {\r\n  // 逼近 shooter\r\n  approach(enemy) {\r\n    const axisRotateR = enemy.axisRotateR;\r\n    const isPolygon = typeof(axisRotateR) === 'object';\r\n    if (!enemy.axisRotateRV) {\r\n      const shooter = game.shooter;\r\n      const shooterBody = (shooter.r + (shooter.cirSolidLineW / 2));\r\n      const distance = (isPolygon ? axisRotateR.whole : (axisRotateR - enemy.r)) - shooterBody;\r\n      const seconds =  getRandom(30, 40);\r\n      enemy.axisRotateRV = -(distance / (seconds * updateFPS));\r\n    }\r\n    if (isPolygon) {\r\n      if (enemy.HP.whole) {\r\n        axisRotateR.small = axisRotateR.big = axisRotateR.whole += enemy.axisRotateRV;\r\n      } else {\r\n        // 重物引力較強\r\n        axisRotateR.big += enemy.axisRotateRV * getRandom(3, 4);\r\n        // 輕物引力較弱\r\n        axisRotateR.small += enemy.axisRotateRV * getRandom(1, 4);\r\n      }\r\n    } else {\r\n      enemy.axisRotateR += enemy.axisRotateRV;\r\n    }\r\n  },\r\n\r\n\r\n  // 死亡效果\r\n  dieEffect(enemyR, effectX, effectY, colorRGB, isBoss = false) {\r\n    let dieTime = 1;\r\n    let effect = () => {\r\n      if (!game.isPause) {\r\n        dieTime += 1;\r\n      }\r\n      ctx.beginPath();\r\n      ctx.save();\r\n      ctx.strokeStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 46})`;\r\n      ctx.fillStyle = `rgba(${colorRGB}, ${(48 - dieTime) / 230})`;\r\n      ctx.shadowColor = `rgba(${colorRGB}, 0.48)`;\r\n      ctx.shadowBlur = 2;\r\n      ctx.lineWidth = 2;\r\n      const effectR = enemyR * baseLog(3, (((dieTime - 2) / 46) * 8) + 1);\r\n      ctx.arc(effectX, effectY, effectR, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.stroke();\r\n      ctx.restore();\r\n      // }\r\n      if (dieTime < 48) {\r\n        requestAnimationFrame(effect);\r\n      }\r\n    }\r\n    requestAnimationFrame(effect);\r\n    if (!isBoss) {\r\n      setTimeout(() => {\r\n        gameCrawler.textContent = 'ENEMY DIES😇';\r\n      }, 0);\r\n    }\r\n    // playSound('duo', 'F4', '4n');\r\n    playSound('synth', 'G2', '8n', 0, 25);\r\n    playSound('duo', 'F2', '4n', 0, 15);\r\n    playSound('duo', 'E2', '4n', 0, 10);\r\n  },\r\n\r\n\r\n  // 敵人撞擊 shooter 判定\r\n  hitShooter(enemies, enemyIdx, type, enemyAxisRotateR, enemyAxisRotateAngle) {\r\n    const enemy = enemies[enemyIdx];\r\n    const shooter = game.shooter;\r\n    let shieldAngleRange;\r\n    if (shooter.state !== 'shield') {\r\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n    } else {\r\n      shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (90 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (270 * degToPi);\r\n    }\r\n    // const shieldAngleRange = Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) >= (135 * degToPi) && Math.abs(mouseMoveAngle - enemyAxisRotateAngle * degToPi) <= (225 * degToPi);\r\n    // 判斷是多邊形或其它敵人撞上 shooter\r\n    const judgeWhatEnemyHit = function () {\r\n      if (type !== 'big' && type !== 'small') {\r\n        enemies.splice(enemyIdx, 1);\r\n        // 移除敵人效果\r\n        if (type !== 'whole') {\r\n          const colorRGB = type === 'circle' ? '245, 175, 95' : '54, 118, 187';\r\n          enemyMethods.dieEffect(enemy.r, originPos(enemyAxisRotateR, enemyAxisRotateAngle).x, originPos(enemyAxisRotateR, enemyAxisRotateAngle).y, colorRGB);\r\n        } else {\r\n          const polygonR = (34 + 22) / 2;\r\n          enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\r\n        }\r\n      } else {\r\n        enemy.HP[type] -= 1;\r\n        const polygonR = type === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\r\n        enemyMethods.dieEffect(polygonR, enemy.originPos(type).x, enemy.originPos(type).y, '231, 70, 93');\r\n        if (enemy.HP.big === 0 && enemy.HP.small === 0) {\r\n          enemies.splice(enemyIdx, 1);\r\n        }\r\n      }\r\n    }\r\n    // 當敵人撞上 shooter 主體\r\n    if (enemyAxisRotateR <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n      // shooter.HP -= 1;\r\n      judgeWhatEnemyHit();\r\n      enemyMethods.attackShooterResult();\r\n      playSound('membrane', 'B4');\r\n      // 當敵人撞上 shooter 護盾\r\n    } else if (shieldAngleRange && (enemyAxisRotateR <= (shooter.shieldR + (shooter.shieldLineW / 2)))) {\r\n      judgeWhatEnemyHit();\r\n      shooter.isProtect = true;\r\n      gameCrawler.textContent = 'BLOCK😉';\r\n      playSound('membrane', 'D4');\r\n    }\r\n  },\r\n\r\n\r\n  // 敵人子彈擊中 shooter 判定\r\n  attackShooter(bullet, bulletIdx, bullets, bulletLen = 0) {\r\n    const shooter = game.shooter;\r\n    const shooterBody = shooter.r + (shooter.cirSolidLineW / 2);\r\n    const shooterShield = shooter.shieldR + (shooter.shieldLineW / 2);\r\n    // 當敵人子彈擊中 shooter 主體\r\n    if (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterBody + bulletLen))) {\r\n      // 子彈擊中後\r\n      enemyMethods.attackShooterResult();\r\n      // 移除敵人子彈\r\n      bullets.splice(bulletIdx, 1);\r\n      bullet.isBoss ? playSound('mono', 'C2', '8n', 0, -10) : playSound('membrane', 'B4');\r\n    }\r\n    // 當敵人子彈射中 shooter 的護盾\r\n    const bulletRotate = bullet.isBoss ? bullet.rotateAngle + 90 : bullet.rotateAngle;\r\n    const angleGap = Math.abs((mouseMoveAngle / degToPi) - ((bulletRotate % 360) + (bulletRotate < 0 ? 360 : 0)));\r\n    let shieldAngleRange;\r\n    if (shooter.state !== 'shield') {\r\n      shieldAngleRange = (angleGap >= 135) && (angleGap <= 225);\r\n    } else {\r\n      shieldAngleRange = (angleGap >= 90) && (angleGap <= 270);\r\n    }\r\n    if (shieldAngleRange && (Math.abs(bullet.moveX) >= (bullet.axisRotateR - (shooterShield + bulletLen)))) {\r\n      // 移除子彈\r\n      bullets.splice(bulletIdx, 1);\r\n      gameCrawler.textContent = 'BLOCK😉';\r\n      playSound('membrane', 'D4');\r\n    }\r\n  },\r\n\r\n\r\n  // 敵人撞擊或子彈擊中 shooter 後\r\n  attackShooterResult() {\r\n    if (!game.isStart || (game.currentLevel === 10 && !game.boss)) return;\r\n    const shooter = game.shooter;\r\n    const shooterHPBarOriginW = 216;\r\n    // 命條減 1/3\r\n    const shooterHPBarW = shooterHPBar.offsetWidth - (shooterHPBarOriginW / 3);\r\n    shooter.isAttacked = true;\r\n    // shooter 命減 1\r\n    // shooter.HP -= 1;\r\n    shooterHPBar.style.width = `${shooterHPBarW < 0 ? 0 : shooterHPBarW}px`;\r\n    // 若 shooter 已經沒有命條\r\n    if (shooterHPBarW <= 0) {\r\n      // 若 shooter 還有愛心\r\n      if (shooter.hearts) {\r\n        // 減掉一顆愛心\r\n        const shooterHeart = document.querySelectorAll('.panel__game-heart');\r\n        shooterHeart[0].parentNode.removeChild(shooterHeart[0]);\r\n        shooter.hearts -= 1;\r\n        // 回復命條\r\n        shooterHPBar.style.width = `${shooterHPBarOriginW}px`;\r\n      } else {\r\n        // 如果沒有愛心，結束遊戲\r\n        game.endGame();\r\n        playSound('synth', 'A3');\r\n        playSound('synth', 'E2', '8n', 160);\r\n        playSound('synth', 'A2', '8n', 320);\r\n        clearTimeout(game.crawlerClearedTimer);\r\n        gameCrawler.textContent = `YOU, ${this.playerName}💀, ARE DEAD`;\r\n        return;\r\n      }\r\n    }\r\n    gameCrawler.textContent = Math.random() >= 0.5 ? 'OUCH😣' : 'UGGH😫';\r\n  },\r\n\r\n\r\n  bossDieResult() {\r\n    let boss = game.boss;\r\n    enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '245, 175, 95', true);\r\n    setTimeout(() => {\r\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '54, 118, 187', true);\r\n    }, 300);\r\n    setTimeout(() => {\r\n      enemyMethods.dieEffect(264, originPos(boss.axisRotateR, boss.axisRotateAngle).x, originPos(boss.axisRotateR, boss.axisRotateAngle).y, '231, 70, 93', true);\r\n    }, 600);\r\n    game.boss = null;\r\n    // 改變背景音樂\r\n    bgm.pause();\r\n    bgm.currentTime = 0;\r\n    victoryBgm.play();\r\n    victoryBgm.volume = 0.5;\r\n    // 3 秒後，結束遊戲\r\n    setTimeout(() => {\r\n      game.endGame();\r\n    }, 3000);\r\n    clearTimeout(game.crawlerClearedTimer);\r\n    gameCrawler.textContent = 'BOSS DIES!!!🎊';\r\n  }\r\n}","/* Environment Variable */\r\nconst updateFPS = 30;\r\nlet updateTime = 0;\r\n\r\nconst globalColor = {\r\n  red: '#e7465d',\r\n  orange: '#f5af5f',\r\n  yellow: '#f7b52c',\r\n  blue: '#3676bb',\r\n  blueDark: '#001d2e',\r\n  white: '#fff',\r\n}\r\n\r\nconst props = ['heart', 'crackdown', 'shield', 'double', 'wave'];\r\n\r\n\r\n/* GUI Controls */\r\n// const controls = {\r\n  // amp: 8,\r\n  // freq: 0.3,\r\n  // testAngle: 40,\r\n// }\r\n\r\n// const gui = new dat.GUI();\r\n// gui.add(controls, 'testAngle', 0, 90).step(1).onChange((value) => {});\r\n// gui.add(controls, 'freq', 0, 1).step(0.1).onChange((value) => {});\r\n\r\nconst startBtn = document.getElementById('start-btn');\r\nconst restartBtn = document.getElementById('restart-btn');\r\nconst starsBtn = document.getElementById('stars-btn');\r\nconst backBtn = document.getElementById('back-btn');\r\nconst restartBtnStars = document.getElementById('restart-btn--stars');\r\n\r\nconst cover = document.getElementById('cover');\r\nconst gamePanel = document.getElementById('game-panel');\r\nconst batteryInfo = document.getElementById('battery-info');\r\nconst shooterHPBar = document.getElementById('hp');\r\nconst heartWrapper = document.getElementById('heart-wrapper');\r\nconst prop = document.getElementById('prop');\r\nconst propImg = document.getElementById('prop__img');\r\nconst propLastTime = document.getElementById('prop__last-time');\r\nconst batteryNum = document.getElementById('battery-num');\r\nconst result = document.getElementById('game-result');\r\n// const resultNum = document.getElementById('result-num');\r\nconst panel = document.getElementById('panel');\r\nconst container = document.getElementById('container');\r\nconst keyboard = document.getElementById('keyboard');\r\nconst gameTime = document.getElementById('game-time');\r\nconst gameLevel = document.getElementById('game-level');\r\nconst gameCrawler = document.getElementById('game-crawler');\r\nconst playerName = document.getElementById('player-name');\r\n\r\nconst resultBoss = document.getElementById('result-boss');\r\nconst resultBattery = document.getElementById('result-battery');\r\nconst resultBullet = document.getElementById('result-bullet');\r\n// const totalPlayers = document.getElementById('total-players');\r\nconst rankingNum = document.getElementById('ranking-num');\r\n\r\nconst resultRanking = document.getElementById('result-ranking');\r\nconst resultScore = document.getElementById('result-score');\r\nconst resultStars = document.getElementById('result-stars');\r\n\r\n// const share = document.getElementById('share');\r\nconst bgm = document.getElementById('bgm');\r\nconst victoryBgm = document.getElementById('victory-bgm');\r\n\r\nconst starWrapper1 = document.getElementById('star-wrapper1');\r\nconst starWrapper2 = document.getElementById('star-wrapper2');\r\nconst starWrapper3 = document.getElementById('star-wrapper3');\r\n\r\nconst shareFb = document.getElementById('share-fb');\r\nconst shareTwitter = document.getElementById('share-twitter');\r\n\r\n\r\n\r\n\r\n/* Initialize Canvas Settings */\r\nconst canvas = document.getElementById('game');\r\nconst ctx = canvas.getContext('2d');\r\nlet ww;\r\nlet wh;\r\nlet gameW;\r\nlet gameH;\r\nlet gameHalfDiagonalL;\r\n\r\nfunction initCanvas() {\r\n  gameW = canvas.width;\r\n  gameH = canvas.height;\r\n  gameHalfDiagonalL = Math.round(Math.sqrt(canvas.width * canvas.width + canvas.height * canvas.height) / 2);\r\n  ww = document.documentElement.clientWidth;\r\n  wh = document.documentElement.clientHeight;\r\n}\r\n\r\n\r\n\r\nconst degToPi = Math.PI / 180;\r\nlet coverCircle;\r\nlet coverTriangle;\r\nlet coverPolygon;\r\nlet game;\r\n\r\n\r\n\r\nclass Game {\r\n  constructor(args) {\r\n    const def = {\r\n      shooter: null,\r\n      prop: null,\r\n      batteryNum: 0,\r\n      circles: [],\r\n      triangles: [],\r\n      polygons: [],\r\n      subTris: [],\r\n      isStart: false,\r\n      isEnd: false,\r\n      isPause: false,\r\n      blockV: {\r\n        x: -2,\r\n        y: 2,\r\n      },\r\n      currentLevel: 0,\r\n      countdownSeconds: 0,\r\n      // countupSeconds: 0,\r\n      hpRecoverTimer: null,\r\n      countdownTimer: null,\r\n      countupTimer: null,\r\n      propGeneratedTimer: null,\r\n      crawlerClearedTimer: null,\r\n      propGeneratedInterval: 200,\r\n      boss: null,\r\n      playerName: '',\r\n      beatBossSeconds: 0,\r\n      isMuted: false,\r\n      isDisplayStars: false,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  init() {\r\n    canvas.addEventListener('mousemove', handleMouseMove);\r\n    canvas.addEventListener('click', handleClick);\r\n    window.addEventListener('keyup', handleKeyup);\r\n    handlePlayerName();\r\n    startBtn.addEventListener('click', () => {\r\n      if (!this.checkPlayerName()) return;\r\n      this.startGame();\r\n    });\r\n    restartBtn.addEventListener('click', () => {\r\n      this.startGame();\r\n    });\r\n    restartBtnStars.addEventListener('click', () => {\r\n      this.startGame();\r\n    });\r\n    this.drawCover();\r\n    this.render();\r\n    this.update();\r\n    // 初始化方格移動速率與計時器\r\n    this.setBlockV();\r\n    // 緩慢恢復 shooter 生命條\r\n    this.recoverShooterHPBar();\r\n    starsBtn.addEventListener('click', () => {\r\n      resultRanking.classList.add('dpn');\r\n      resultScore.classList.add('dpn');\r\n      resultStars.classList.remove('dpn');\r\n      result.classList.add('t20');\r\n      if (!this.isDisplayStars) {\r\n        this.handleGameStars();\r\n      }\r\n      this.isDisplayStars = true;\r\n    });\r\n    backBtn.addEventListener('click', function () {\r\n      resultRanking.classList.remove('dpn');\r\n      resultScore.classList.remove('dpn');\r\n      resultStars.classList.add('dpn');\r\n      result.classList.remove('t20');\r\n    });\r\n    shareFb.addEventListener('click', function () {\r\n      window.open('https://www.facebook.com/sharer/sharer.php?u=https://yeefun.github.io/radio-defense', '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');\r\n    });\r\n    shareTwitter.addEventListener('click', function () {\r\n      // 參考 https://gist.github.com/McKinneyDigital/2884508\r\n      const url = 'https://yeefun.github.io/radio-defense';\r\n      const name = 'szyeefun';\r\n      window.open(`http://twitter.com/share?url=${encodeURIComponent(url)}&via=${encodeURIComponent(name)}`, '', 'left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0');\r\n    });\r\n  }\r\n  render() {\r\n    // if (!this.isPause) {\r\n    ctx.fillStyle = globalColor.blueDark;\r\n    ctx.fillRect(0, 0, gameW, gameH);\r\n    // 繪製方格\r\n    this.drawBlock();\r\n    if (!this.isStart && !this.isEnd) {\r\n      ctx.save();\r\n        ctx.beginPath();\r\n        ctx.arc(gameW / 2, gameH / 2, 264, 0, Math.PI * 2);\r\n        ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.arc(gameW / 2, gameH / 2, 184, 0, Math.PI * 2);\r\n        ctx.lineWidth = 1.6;\r\n        ctx.strokeStyle = globalColor.white;\r\n        ctx.stroke();\r\n      ctx.restore();\r\n    }\r\n    // 繪製 shooter\r\n    this.shooter.draw();\r\n    // 繪製每個 circle\r\n    this.circles.forEach((circle) => {\r\n      circle.draw();\r\n    });\r\n    // 繪製每個 triangle\r\n    this.triangles.forEach((triangle) => {\r\n      triangle.draw();\r\n    });\r\n    // 繪製每個 polygon\r\n    this.polygons.forEach((polygon) => {\r\n      polygon.draw();\r\n    });\r\n    // 繪製每個 sub triangle\r\n    this.subTris.forEach((subTriangle) => {\r\n      subTriangle.draw();\r\n    });\r\n    // 繪製 prop（道具）\r\n    this.prop && this.prop.draw();\r\n    // 繪製魔王\r\n    this.boss && this.boss.draw();\r\n    if (this.isStart) {\r\n      // 繪製滑鼠\r\n      this.drawMouse();\r\n    }\r\n    requestAnimationFrame(() => {\r\n      this.render();\r\n    });\r\n  }\r\n  update() {\r\n    updateTime += 1;\r\n    if (!this.isPause && !this.isEnd) {\r\n      // 更新 shooter\r\n      this.shooter.update();\r\n      // 更新每個 circle\r\n      this.circles.forEach((circle, idx) => {\r\n        circle.update(idx);\r\n      });\r\n      // 更新每個 triangle\r\n      this.triangles.forEach((triangle, idx) => {\r\n        triangle.update(idx);\r\n      });\r\n      // 更新每個 polygon\r\n      this.polygons.forEach((polygon, idx) => {\r\n        polygon.update(idx);\r\n      });\r\n      // 更新每個 sub triangle\r\n      this.subTris.forEach((subTriangle, idx) => {\r\n        subTriangle.update(idx);\r\n      });\r\n      // 更新 prop（道具）\r\n      this.prop && this.prop.update();\r\n      // 更新魔王\r\n      this.boss && this.boss.update();\r\n    }\r\n    setTimeout(() => {\r\n      this.update();\r\n    }, 1000 / updateFPS);\r\n  }\r\n  // 設置封面\r\n  drawCover() {\r\n    this.shooter = new Shooter();\r\n    // 圓形\r\n    this.circles.push(new Circle({\r\n      axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\r\n      axisRotateAngle: 225,\r\n      axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n      rotate: getRandom(0, 360),\r\n    }));\r\n    // 三角形\r\n    this.triangles.push(new Triangle({\r\n      axisRotateR: getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5),\r\n      axisRotateAngle: 45,\r\n      axisRotateAngleV: (getRandom(2, 8) / 10),\r\n      rotate: 45,\r\n    }));\r\n    // 多邊形\r\n    const rotateR = getRandom(gameHalfDiagonalL / 2, gameHalfDiagonalL / 1.5);\r\n    const rotate = getRandom(0, 360);\r\n    const rotateV = (getRandom(4, 8) / 10);\r\n    this.polygons.push(new Polygon({\r\n      axisRotateR: {\r\n        whole: rotateR,\r\n        big: rotateR,\r\n        small: rotateR,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 315,\r\n        big: 315,\r\n        small: 315,\r\n      },\r\n      rotate: {\r\n        whole: rotate,\r\n        big: rotate,\r\n        small: rotate,\r\n      },\r\n      rotateV,\r\n    }));\r\n  }\r\n  // 畫方格\r\n  drawBlock() {\r\n    ctx.save();\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.16)';\r\n      ctx.lineWidth = 0.4;\r\n      // 畫橫列\r\n      for (let i = 0; i < 18; i += 1) {\r\n        ctx.moveTo(i * 56 + ((updateTime * this.blockV.x) % 56), 0);\r\n        ctx.lineTo(i * 56 + ((updateTime * this.blockV.x) % 56), gameH);\r\n      }\r\n      // 畫直行\r\n      for (let i = 0; i < 14; i += 1) {\r\n        ctx.moveTo(0, i * 52 + ((updateTime * this.blockV.y) % 52));\r\n        ctx.lineTo(gameW, i * 52 + ((updateTime * this.blockV.y) % 52));\r\n      }\r\n      ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n  // 畫滑鼠\r\n  drawMouse() {\r\n    const mouseMovePosX = mouseMovePos.x + gameW / 2;\r\n    const mouseMovePosY = mouseMovePos.y + gameH / 2;\r\n    const length = 12;\r\n    ctx.save();\r\n      ctx.translate(mouseMovePosX, mouseMovePosY);\r\n      ctx.strokeStyle = globalColor.white;\r\n      ctx.lineWidth = 0.8;\r\n      ctx.beginPath();\r\n      ctx.moveTo(-length, 0);\r\n      ctx.lineTo(length, 0);\r\n      ctx.moveTo(0, -length);\r\n      ctx.lineTo(0, length);\r\n      ctx.stroke();\r\n    ctx.restore();\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.arc(mouseMovePosX, mouseMovePosY, 1.6, 0, Math.PI * 2);\r\n    ctx.fill();\r\n  }\r\n  // 設定方格移動速率\r\n  setBlockV() {\r\n    setTimeout(() => {\r\n      this.blockV.x = Math.random() * 8 - 4;\r\n      this.blockV.y = Math.random() * 8 - 4;\r\n      this.setBlockV();\r\n    }, 8000);\r\n  }\r\n  // 開始遊戲（當讀者按下 'Start Play' or 'Restart' 按鈕）\r\n  startGame() {\r\n    this.isStart = true;\r\n    this.isEnd = false;\r\n    // 移除封面\r\n    cover.style.display = 'none';\r\n    // 顯示遊戲介面\r\n    gamePanel.style.display = 'block';\r\n    // 電池資訊歸零\r\n    this.batteryNum = 0;\r\n    batteryNum.textContent = this.batteryNum;\r\n    // 重設生命條\r\n    shooterHPBar.style.width = '216px';\r\n    // 取得玩家名\r\n    this.playerName = playerName.value;\r\n    // 初始化 shooter\r\n    this.shooter = new Shooter();\r\n    // 三個愛心命\r\n    heartWrapper.innerHTML = '';\r\n    for (let i = 0; i < this.shooter.hearts; i++) {\r\n      const heart = document.createElement('DIV');\r\n      heart.classList.add('panel__game-heart');\r\n      heartWrapper.appendChild(heart);\r\n    }\r\n    // 清空敵人與子彈\r\n    this.circles.forEach((circle) => {\r\n      circle.bullets = [];\r\n    });\r\n    this.triangles.forEach((triangle) => {\r\n      triangle.bullets = [];\r\n      triangle.HP = 0;\r\n    });\r\n    this.circles = [];\r\n    this.triangles = [];\r\n    this.polygons = [];\r\n    if (this.boss) {\r\n      this.boss.bullets = [];\r\n      this.boss = null;\r\n    }\r\n    // 隱藏預設滑鼠\r\n    container.style.cursor = 'none';\r\n    // 隱藏結果\r\n    result.classList.add('op0');\r\n    // 讓滑鼠點擊無效\r\n    panel.style.pointerEvents = 'none';\r\n    // 顯示獲得電池資訊\r\n    batteryInfo.classList.remove('op0');\r\n    // 顯示鍵盤指示\r\n    keyboard.classList.remove('op0');\r\n    // 清空關卡字\r\n    gameLevel.textContent = '';\r\n    // 回到第 0 關\r\n    this.currentLevel = 0;\r\n    // 倒數計時 2 秒\r\n    this.countdownSeconds = 3;\r\n\r\n    gameCrawler.textContent = `👋${this.playerName}👋`;\r\n    gameTime.textContent = `00:0${this.countdownSeconds}”`;\r\n    const countdownStartTime = () => {\r\n      setTimeout(() => {\r\n        if (this.countdownSeconds === 0) {\r\n          this.currentLevel += 1;\r\n          this.setLevel(this.currentLevel);\r\n          // 開始產生道具\r\n          this.generateProp();\r\n          // 開始清除跑馬燈\r\n          this.clearCrawler();\r\n          return;\r\n        }\r\n        this.countdownSeconds -= 1;\r\n        gameTime.textContent = `00:0${this.countdownSeconds}”`;\r\n        switch (this.countdownSeconds) {\r\n          case 2:\r\n            gameCrawler.textContent = '🌊WAVES ARE COMING🌊';\r\n            break;\r\n          case 1:\r\n            gameCrawler.textContent = '😈ARE YOU READY?😈';\r\n            break;\r\n          case 0:\r\n            gameCrawler.textContent = '🔥🔥GO🔥🔥';\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        playSound('synth', 'G4');\r\n        countdownStartTime();\r\n      }, 1000);\r\n    }\r\n    countdownStartTime();\r\n    playSound('synth', 'C#5');\r\n    playSound('synth', 'E5', '8n', 160);\r\n    // 改變背景音樂\r\n    victoryBgm.pause();\r\n    victoryBgm.currentTime = 0;\r\n    bgm.play();\r\n    bgm.volume = 0.5;\r\n    // 遊戲結果返回第一頁\r\n    resultRanking.classList.remove('dpn');\r\n    resultScore.classList.remove('dpn');\r\n    resultStars.classList.add('dpn');\r\n    result.classList.remove('t20');\r\n    // 將遊戲結果換成 loading 圖示\r\n    const loadingIcon = '<img src=\"./img/loading.svg\" alt=\"loading icon\" />';\r\n    rankingNum.innerHTML = loadingIcon;\r\n    starWrapper1.innerHTML = loadingIcon;\r\n    starWrapper2.innerHTML = loadingIcon;\r\n    starWrapper3.innerHTML = loadingIcon;\r\n    // 開啟讓 stars 重新取資料的開關\r\n    this.isDisplayStars = false;\r\n  }\r\n  // 遊戲結束\r\n  endGame() {\r\n    this.isStart = false;\r\n    this.isEnd = true;\r\n    // 貼上電池數量\r\n    // resultNum.textContent = this.batteryNum;\r\n    // 填上結果\r\n    if (this.currentLevel !== 10) {\r\n      resultBoss.textContent = 'NO';\r\n    } else {\r\n      resultBoss.textContent = this.beatBossSeconds;\r\n    }\r\n    resultBattery.textContent = this.batteryNum;\r\n    resultBullet.textContent = this.shooter.bulletNum;\r\n    // 顯示結果\r\n    result.classList.remove('op0');\r\n    // 隱藏電池分數資訊\r\n    batteryInfo.classList.add('op0');\r\n    // 隱藏鍵盤指示\r\n    keyboard.classList.add('op0');\r\n    // 移除道具顯示介面\r\n    prop.classList.add('op0');\r\n    // 顯示預設滑鼠\r\n    container.style.cursor = 'auto';\r\n    // 讓滑鼠可以點擊\r\n    panel.style.pointerEvents = 'auto';\r\n    this.handleGameResult();\r\n    clearTimeout(this.countdownTimer);\r\n    clearTimeout(this.countupTimer);\r\n    clearTimeout(this.propGeneratedTimer);\r\n  }\r\n  // 暫停遊戲\r\n  pauseGame() {\r\n    if (!this.currentLevel) return;\r\n    this.isPause = !this.isPause;\r\n    if (this.isPause) {\r\n      clearTimeout(this.countdownTimer);\r\n      clearTimeout(this.countupTimer);\r\n      clearTimeout(this.propGeneratedTimer);\r\n      clearTimeout(this.crawlerClearedTimer);\r\n    } else {\r\n      if (!this.boss) {\r\n        this.countdownTime();\r\n      } else {\r\n        this.countupTime();\r\n      }\r\n      this.generateProp();\r\n      this.clearCrawler();\r\n      const boss = game.boss;\r\n      if (boss.isDisappeared) {\r\n        clearTimeout(boss.appearTimer);\r\n        boss.appear();\r\n      } else {\r\n        clearTimeout(boss.disappearTimer);\r\n        boss.disappear();\r\n      }\r\n    }\r\n  }\r\n  handleGameResult() {\r\n    const name = this.playerName;\r\n    const level = this.currentLevel;\r\n    const battery = this.batteryNum;\r\n    const bullet = this.shooter.bulletNum;\r\n    let boss;\r\n    if (level !== 9) {\r\n      boss = 'no';\r\n    } else {\r\n      boss = this.beatBossSeconds;\r\n    }\r\n    axios.get('https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbwwNUeevxFlQaLzP_gdhnTmSC97HgRlpV6DOCUIzg/dev', {\r\n      params: {\r\n        name,\r\n        level,\r\n        battery,\r\n        bullet,\r\n        boss,\r\n      }\r\n    })\r\n    .then((res) => {\r\n      const data = res.data;\r\n      rankingNum.innerHTML = `\r\n        <p>${data.rank}</p>\r\n        <span>/&nbsp;${data.totalPlayers}</span>\r\n      `;\r\n    });\r\n  }\r\n  handleGameStars() {\r\n    axios.get('https://script.google.com/a/g.ntu.edu.tw/macros/s/AKfycbx1L2GmotaRfoSMzVA5BtpC9kiWneoA69IOtoEi/dev')\r\n      .then((res) => {\r\n        const data = res.data;\r\n        const firstStarData = data.firstData;\r\n        const secondStarData = data.secondData;\r\n        const thirdStarData = data.thirdData;\r\n        let starScoreHTML = '';\r\n        function fillStarScore(name, wave, bat, bullet, boss) {\r\n          starScoreHTML = `\r\n            <div class=\"star__name\">${name}</div>\r\n            <div class=\"star__scores\">\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${wave}</div>\r\n                <div class=\"star__text\">WAVES</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${bat}</div>\r\n                <div class=\"star__text\">BATTERIES</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${bullet}</div>\r\n                <div class=\"star__text\">BULLETS</div>\r\n              </div>\r\n              <div class=\"star__score\">\r\n                <div class=\"star__num\">${boss}</div>\r\n                <div class=\"star__text\">BOSS</div>\r\n              </div>\r\n            </div>\r\n          `;\r\n        }\r\n        fillStarScore(...firstStarData);\r\n        starWrapper1.innerHTML = starScoreHTML;\r\n        fillStarScore(...secondStarData);\r\n        starWrapper2.innerHTML = starScoreHTML;\r\n        fillStarScore(...thirdStarData);\r\n        starWrapper3.innerHTML = starScoreHTML;\r\n      });\r\n  }\r\n  // 產生道具\r\n  generateProp() {\r\n    // 如果已有道具，便停止計時\r\n    if (this.prop) return;\r\n    this.propGeneratedTimer = setTimeout(() => {\r\n      this.propGeneratedInterval -= 1;\r\n      // 20 秒過後\r\n      if (this.propGeneratedInterval === 0) {\r\n        let propName;\r\n        // 如果大於 5 顆心，便排除愛心\r\n        if (this.shooter.hearts < 5) {\r\n          propName = props[getRandom(0, 4)];\r\n        } else {\r\n          propName = props[getRandom(1, 4)];\r\n        }\r\n        this.prop = new Prop({\r\n          src: `../img/${propName}.svg`,\r\n          axisRotateR: gameHalfDiagonalL,\r\n          axisRotateAngle: getRandom(0, 360),\r\n        });\r\n        // 每 20 (200 * 100) 秒產生一個道具\r\n        this.propGeneratedInterval = 200;\r\n      }\r\n      this.generateProp();\r\n    }, 100);\r\n  }\r\n  // 倒數遊戲時間\r\n  countdownTime() {\r\n    this.countdownTimer = setTimeout(() => {\r\n      if (this.countdownSeconds === 0) {\r\n        this.currentLevel += 1;\r\n        this.setLevel(this.currentLevel);\r\n        return;\r\n      }\r\n      this.countdownSeconds -= 1;\r\n      gameTime.textContent = `00:${this.countdownSeconds < 10 ? `0${this.countdownSeconds}` : this.countdownSeconds}”`;\r\n      this.countdownTime();\r\n    }, 1000);\r\n  }\r\n  countupTime() {\r\n    this.countupTimer = setTimeout(() => {\r\n      this.beatBossSeconds += 1;\r\n      gameTime.textContent = `00:${this.beatBossSeconds < 10 ? `0${this.beatBossSeconds}` : this.beatBossSeconds}”`;\r\n      this.countupTime();\r\n    }, 1000);\r\n  }\r\n  // 自動恢復 shooter 生命條\r\n  recoverShooterHPBar() {\r\n    this.hpRecoverTimer = setTimeout(() => {\r\n      if (this.isPause || !this.isStart) {\r\n        this.recoverShooterHPBar();\r\n        return;\r\n      }\r\n      const nowHPW = shooterHPBar.offsetWidth;\r\n      if (nowHPW < 216) {\r\n        const recoverHPBarW = nowHPW + 1;\r\n        shooterHPBar.style.width = `${recoverHPBarW}px`;\r\n      }\r\n      this.recoverShooterHPBar();\r\n    }, 300);\r\n  }\r\n  // 每 3 秒清除一次跑馬燈\r\n  clearCrawler() {\r\n    gameCrawler.textContent = '';\r\n    // CONFUSED 為什麼這樣寫不行？（只會觸發兩次）\r\n    // setTimeout(this.clearCrawler, 3000);\r\n    this.crawlerClearedTimer = setTimeout(() => {\r\n      this.clearCrawler();\r\n    }, 3000);\r\n  }\r\n  // 設定敵人出場\r\n  setEnemy(form, seconds = 0) {\r\n    setTimeout(() => {\r\n      switch (form) {\r\n        case 'circle': {\r\n          this.circles.push(new Circle({\r\n            axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\r\n            axisRotateAngle: getRandom(0, 360),\r\n            axisRotateAngleV: -(getRandom(2, 8) / 10),\r\n            rotate: getRandom(0, 360),\r\n          }));\r\n          break;\r\n        }\r\n        case 'triangle': {\r\n          // axisRotateAngle 與 rotate 必須相同\r\n          const angle = getRandom(0, 360);\r\n          this.triangles.push(new Triangle({\r\n            axisRotateR: getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL),\r\n            axisRotateAngle: angle,\r\n            axisRotateAngleV: getRandom(2, 8) / 10,\r\n            rotate: angle,\r\n          }));\r\n          break;\r\n        }\r\n        case 'polygon': {\r\n          const rotateR = getRandom(gameHalfDiagonalL / 3, gameHalfDiagonalL / 1.5);\r\n          const rotateAngle = getRandom(0, 360);\r\n          const rotate = getRandom(0, 360);\r\n          this.polygons.push(new Polygon({\r\n            axisRotateR: {\r\n              whole: rotateR,\r\n              big: rotateR,\r\n              small: rotateR,\r\n            },\r\n            axisRotateAngle: {\r\n              whole: rotateAngle,\r\n              big: rotateAngle,\r\n              small: rotateAngle,\r\n            },\r\n            rotate: {\r\n              whole: rotate,\r\n              big: rotate,\r\n              small: rotate,\r\n            },\r\n            rotateV: getRandom(4, 8) / 10,\r\n          }));\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n    }, seconds * 1000);\r\n  }\r\n  // 初始化關卡\r\n  initLevel(level, seconds) {\r\n    gameLevel.textContent = `Wave ${level}`;\r\n    this.countdownSeconds = seconds;\r\n    gameTime.textContent = `00:${this.countdownSeconds}”`;\r\n    this.countdownTime();\r\n  }\r\n  // 設定關卡\r\n  setLevel(level) {\r\n    switch (level) {\r\n      case 1:\r\n        this.initLevel('01', 10);\r\n        // const rotateNum = 360;\r\n        // this.boss = new Boss({\r\n        //   axisRotateR: getRandom(gameH / 3, gameH / 2.5),\r\n        //   axisRotateAngle: rotateNum,\r\n        //   rotate: rotateNum - 90,\r\n        // });\r\n        // 設定敵人出場\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('triangle', 0);\r\n        this.setEnemy('polygon', 0);\r\n        break;\r\n      case 2:\r\n        this.initLevel('02', 20);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('polygon', 10);\r\n        break;\r\n      case 3:\r\n        this.initLevel('03', 20);\r\n        this.setEnemy('polygon', 2);\r\n        this.setEnemy('circle', 5);\r\n        this.setEnemy('polygon', 10);\r\n        break;\r\n      case 4:\r\n        this.initLevel('04', 30);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('polygon', 10);\r\n        this.setEnemy('triangle', 15);\r\n        this.setEnemy('polygon', 20);\r\n        break;\r\n      case 5:\r\n        this.initLevel('05', 30);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('circle', 5);\r\n        this.setEnemy('polygon', 15);\r\n        this.setEnemy('triangle', 20);\r\n        break;\r\n      case 6:\r\n        this.initLevel('06', 40);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('triangle', 5);\r\n        this.setEnemy('circle', 15);\r\n        this.setEnemy('circle', 25);\r\n        this.setEnemy('polygon', 25);\r\n        break;\r\n      case 7:\r\n        this.initLevel('07', 60);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('circle', 10);\r\n        this.setEnemy('triangle', 10);\r\n        this.setEnemy('polygon', 15);\r\n        this.setEnemy('polygon', 20);\r\n        this.setEnemy('triangle', 25);\r\n        this.setEnemy('polygon', 25);\r\n        this.setEnemy('polygon', 35);\r\n        this.setEnemy('triangle', 35);\r\n        this.setEnemy('polygon', 40);\r\n        this.setEnemy('circle', 45);\r\n        this.setEnemy('circle', 50);\r\n        break;\r\n      case 8:\r\n        this.initLevel('08', 60);\r\n        this.setEnemy('circle', 5);\r\n        this.setEnemy('triangle', 10);\r\n        this.setEnemy('triangle', 10);\r\n        this.setEnemy('polygon', 15);\r\n        this.setEnemy('circle', 15);\r\n        this.setEnemy('circle', 20);\r\n        this.setEnemy('polygon', 30);\r\n        this.setEnemy('circle', 35);\r\n        this.setEnemy('triangle', 35);\r\n        this.setEnemy('polygon', 35);\r\n        this.setEnemy('circle', 45);\r\n        this.setEnemy('triangle', 45);\r\n        this.setEnemy('circle', 50);\r\n        this.setEnemy('polygon', 50);\r\n        break;\r\n      case 9:\r\n        this.initLevel('09', 30);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('circle', 2);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('triangle', 2);\r\n        this.setEnemy('polygon', 10);\r\n        this.setEnemy('circle', 15);\r\n        this.setEnemy('triangle', 15);\r\n        this.setEnemy('polygon', 15);\r\n        this.setEnemy('polygon', 25);\r\n        break;\r\n      case 10:\r\n        gameLevel.textContent = 'Wave 10';\r\n        const rotateNum = getRandom(0, 360);\r\n        this.boss = new Boss({\r\n          axisRotateR: getRandom(gameH / 3, gameH / 2.5),\r\n          axisRotateAngle: rotateNum,\r\n          rotate: rotateNum - 90,\r\n        });\r\n        this.countupTime();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    playSound('synth', 'A6');\r\n  }\r\n  checkPlayerName() {\r\n    // const playerName = document.getElementById('player-name').value;\r\n    if (playerName.value) {\r\n      return true;\r\n    } else {\r\n      playerName.classList.add('warn');\r\n      playSound('synth', 'A3');\r\n      playSound('synth', 'A2', '8n', 160);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n// Page Loaded\r\nfunction handleLoad() {\r\n  game = new Game();\r\n  initCanvas();\r\n  game.init();\r\n}\r\n\r\n// load & resize event\r\nwindow.addEventListener('load', handleLoad);\r\nwindow.addEventListener('resize', initCanvas);\r\n\r\n\r\n\r\n// Mouse Events & Recording\r\nlet mouseMovePos = {}\r\nlet mouseMoveAngle = 0;\r\nfunction handleMouseMove(evt) {\r\n  mouseMovePos.x = evt.x - ww / 2;\r\n  mouseMovePos.y = evt.y - wh / 2;\r\n  const angle = Math.atan2(mouseMovePos.y, mouseMovePos.x);\r\n  mouseMoveAngle = angle < 0 ? (angle + 2 * Math.PI) : angle;\r\n};\r\n\r\nlet beforeShootTime = new Date();\r\nfunction handleClick() {\r\n  if (game.isPause) return;\r\n  game.shooter.shoot();\r\n};\r\n\r\nfunction handleKeyup(evt) {\r\n  if (game.isStart) {\r\n    if (evt.key === 's') {\r\n      game.shooter.shoot();\r\n    }\r\n    if (evt.key === 'p') {\r\n      game.pauseGame();\r\n    }\r\n  } else {\r\n    if (evt.key === 'Enter') {\r\n      if (!game.checkPlayerName()) return;\r\n      game.startGame();\r\n    }\r\n  }\r\n  if (evt.key === 'm') {\r\n    game.isMuted = !game.isMuted;\r\n    bgm.muted = !bgm.muted;\r\n    victoryBgm.muted = !victoryBgm.muted;\r\n  }\r\n}\r\n\r\nfunction handlePlayerName() {\r\n  playerName.addEventListener('focus', function () {\r\n    playerName.classList.remove('shine');\r\n    playerName.classList.remove('warn');\r\n  });\r\n\r\n  playerName.addEventListener('focusout', function () {\r\n    if (!playerName.value) {\r\n      playerName.classList.add('shine');\r\n    }\r\n  });\r\n\r\n  playerName.addEventListener('input', function () {\r\n    if (playerName.value) {\r\n      startBtn.classList.add('shine');\r\n    } else {\r\n      startBtn.classList.remove('shine');\r\n    }\r\n  });\r\n}","class Polygon {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      axisRotateAngle: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      rotate: {\r\n        whole: 0,\r\n        big: 0,\r\n        small: 0,\r\n      },\r\n      HP: {\r\n        whole: 1,\r\n        big: 1,\r\n        small: 1,\r\n      },\r\n      axisRotateRV: 0,\r\n      rotateV: 0,\r\n      color: globalColor.red,\r\n      // 是否正好要分裂\r\n      isJustSplite: true,\r\n      scale: 0,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  originPos(form) {\r\n    return {\r\n      x: (gameW / 2) + this.axisRotateR[form] * Math.cos(this.axisRotateAngle[form] * degToPi),\r\n      y: (gameH / 2) + this.axisRotateR[form] * Math.sin(this.axisRotateAngle[form] * degToPi),\r\n    };\r\n  }\r\n\r\n\r\n  draw() {\r\n    if (this.HP.whole) {\r\n      ctx.save();\r\n      ctx.translate(this.originPos('whole').x, this.originPos('whole').y);\r\n      ctx.rotate(this.rotate.whole * degToPi);\r\n      ctx.scale(this.scale, this.scale);\r\n      // 主體多邊形\r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      ctx.moveTo(21 * Math.cos(8 * degToPi), 21 * Math.sin(8 * degToPi));\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(23, 150);\r\n      ctx.$triLineTo(34, 202);\r\n      ctx.$triLineTo(22, 255);\r\n      ctx.$triLineTo(22, 324);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 右淡五邊形\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n      ctx.moveTo(9.6, -2);\r\n      ctx.$triLineTo(22, 324);\r\n      ctx.$triLineTo(21, 8);\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(10, 36);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 下淡四邊形\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n      ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n      ctx.$triLineTo(23, 70);\r\n      ctx.$triLineTo(23, 150);\r\n      ctx.lineTo(-8.8, 0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      // 閃電\r\n      drawLightning({\r\n        x: -0.8,\r\n        y: -16\r\n      });\r\n      ctx.restore();\r\n    } else {\r\n      // 大分裂四邊形\r\n      if (this.HP.big) {\r\n        ctx.save();\r\n        ctx.translate(this.originPos('big').x, this.originPos('big').y);\r\n        ctx.rotate(this.rotate.big * degToPi);\r\n        // 大分裂主體\r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.$triLineTo(34, 202);\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 大分裂內下四邊形\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.beginPath();\r\n        ctx.moveTo(-8.8, 0);\r\n        ctx.$triLineTo(4.8, 64);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(23, 150);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 大分裂左閃電\r\n        drawLightning({\r\n          x: -12,\r\n          y: -8\r\n        }, 0.6);\r\n        ctx.restore();\r\n      }\r\n      // 小分裂四邊形\r\n      if (this.HP.small) {\r\n        ctx.save();\r\n        ctx.translate(this.originPos('small').x, this.originPos('small').y);\r\n        ctx.rotate(this.rotate.small * degToPi);\r\n        // 小分裂主體\r\n        ctx.beginPath();\r\n        ctx.fillStyle = this.color;\r\n        ctx.moveTo(23 * Math.cos(70 * degToPi), 23 * Math.sin(70 * degToPi));\r\n        ctx.$triLineTo(22, 255);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 小分裂內下三角形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.21)';\r\n        ctx.moveTo(10 * Math.cos(40 * degToPi), 10 * Math.sin(40 * degToPi));\r\n        ctx.$triLineTo(4.8, 64);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 小分裂內右五邊形\r\n        ctx.beginPath();\r\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.07)';\r\n        ctx.moveTo(9.6, -2);\r\n        ctx.$triLineTo(22, 324);\r\n        ctx.$triLineTo(21, 8);\r\n        ctx.$triLineTo(23, 70);\r\n        ctx.$triLineTo(10, 36);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        // 小分裂閃電\r\n        drawLightning({\r\n          x: 10,\r\n          y: -8\r\n        }, 0.5);\r\n        ctx.restore();\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    enemyMethods.approach(this);\r\n    // 如果尚未分裂\r\n    if (this.HP.whole) {\r\n      this.rotate.whole = this.rotate.big = this.rotate.small += this.rotateV;\r\n      // 當多邊形撞上 shooter\r\n      game.isStart && enemyMethods.hitShooter(game.polygons, idx, 'whole', this.axisRotateR.whole, this.axisRotateAngle.whole);\r\n    } else {\r\n      // let rotateDirection;\r\n      // 如果正好要分裂\r\n      if (this.isJustSplite) {\r\n        // const rotateOriginPos = 90 - 70;\r\n        // const rotateDirection = (((this.rotate.whole % 360) >= rotateOriginPos) && ((this.rotate.whole % 360) < (180 + rotateOriginPos))) ? -1 : 1;\r\n        const rotateDirection = Math.random() >= 0.5 ? 1 : -1;\r\n        TweenLite.to(this.axisRotateAngle, 2.4, {\r\n          big: `+=${getRandom(15, 30) * rotateDirection}`,\r\n          small: `-=${getRandom(15, 30) * rotateDirection}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.axisRotateR, 2.4, {\r\n          big: `+=${getRandom(50, 150)}`,\r\n          small: `+=${getRandom(50, 150)}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        TweenLite.to(this.rotate, 2.4, {\r\n          big: `+=${getRandom(180, 270)}`,\r\n          small: `-=${getRandom(180, 270)}`,\r\n          ease: Circ.easeOut,\r\n        });\r\n        // gameCrawler.textContent = 'ENEMY SPLITS';\r\n        this.isJustSplite = false;\r\n      }\r\n      // 當大分裂撞上 shooter\r\n      if (this.HP.big) {\r\n        // 重物自轉較慢\r\n        this.rotate.big += this.rotateV * 1.4;\r\n        enemyMethods.hitShooter(game.polygons, idx, 'big', this.axisRotateR.big, this.axisRotateAngle.big);\r\n      }\r\n      // 當小分裂撞上 shooter\r\n      if (this.HP.small) {\r\n        // 輕物自轉較快\r\n        this.rotate.small -= this.rotateV * 1.6;\r\n        enemyMethods.hitShooter(game.polygons, idx, 'small', this.axisRotateR.small, this.axisRotateAngle.small);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    if (isBossGenerate) {\r\n      const rotateNum = getRandom(40, 80);\r\n      const rNum = getRandom(40, 80);\r\n      TweenLite.to(this.axisRotateAngle, 1.6, {\r\n        whole: `-=${rotateNum}`,\r\n        big: `-=${rotateNum}`,\r\n        small: `-=${rotateNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n      TweenLite.to(this.axisRotateR, 1.6, {\r\n        whole: `+=${rNum}`,\r\n        big: `+=${rNum}`,\r\n        small: `+=${rNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    game.isStart && playSound('synth', 'C4', '4n');\r\n  }\r\n}","/* 道具 class */\r\nclass Prop {\r\n  constructor(args) {\r\n    const def = {\r\n      img: new Image(),\r\n      src: '',\r\n      axisRotateR: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngle: 0,\r\n      r: 32,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!this.img.src) {\r\n      this.img.src = this.src;\r\n    }\r\n    if (this.img.complete) {\r\n      ctx.save();\r\n      ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n      ctx.drawImage(this.img, 0, 0);\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';\r\n      ctx.arc(this.img.width / 2, this.img.height / 2, this.r, 0, Math.PI * 2);\r\n      ctx.stroke();\r\n      ctx.restore();\r\n    }\r\n  }\r\n  update() {\r\n    if (!this.axisRotateRV) {\r\n      const seconds = getRandom(5, 10);\r\n      this.axisRotateRV = -(gameHalfDiagonalL / (seconds * updateFPS));\r\n    }\r\n    this.axisRotateR += this.axisRotateRV;\r\n    // 當道具撞上 shooter 主體\r\n    const shooter = game.shooter;\r\n    // 判斷是否撞上\r\n    if ((this.axisRotateR + this.r) <= (shooter.r + (shooter.cirSolidLineW / 2))) {\r\n      // 清掉該道具\r\n      game.prop = '';\r\n      const propName = this.src.replace('../img/', '').split('.')[0];\r\n      shooter.getProp(propName);\r\n    }\r\n  }\r\n}","class Shooter {\r\n  constructor(args) {\r\n    const def = {\r\n      color: globalColor.white,\r\n      // r: 34 * 0.85,\r\n      r: 28.9,\r\n      // shieldR: (34 + 36) * 0.85,\r\n      shieldR: 60,\r\n      // cirSolidLineW: 6 * 0.85,\r\n      cirSolidLineW: 6,\r\n      // shieldLineW: 4 * 0.85,\r\n      shieldLineW: 4,\r\n      rotateAngle: 0,\r\n      bullets: [],\r\n      bulletNum: 0,\r\n      hearts: 3,\r\n      state: '',\r\n      isAttacked: false,\r\n      isProtect: false,\r\n      beforeShootTime: new Date(),\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    if (!game.isStart && !game.isEnd) return;\r\n    ctx.save();\r\n    // 輪圍\r\n    ctx.translate(gameW / 2, gameH / 2);\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n    ctx.shadowBlur = 16;\r\n    ctx.lineWidth = this.cirSolidLineW;\r\n    ctx.arc(0, 0, this.r, 0, Math.PI * 2);\r\n    if (!this.isAttacked) {\r\n      ctx.strokeStyle = this.color;\r\n    } else {\r\n      ctx.strokeStyle = globalColor.red;\r\n      this.isAttacked = false;\r\n    }\r\n    ctx.stroke();\r\n    // 輪軸\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 0, this.rotateAngle);\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 120, this.rotateAngle);\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(this.r, 240, this.rotateAngle);\r\n    // ctx.lineWidth = 3 * 0.85;\r\n    ctx.lineWidth = 2.55;\r\n    ctx.stroke();\r\n    ctx.restore();\r\n    // 輪圍外虛線\r\n    ctx.strokeStyle = this.color;\r\n    // const outerR = this.r + 22 * 0.85;\r\n    const outerR = this.r + 20;\r\n    for (let i = 0; i < 360; i += 1) {\r\n      const x1 = outerR * Math.cos(i * degToPi + this.rotateAngle);\r\n      const y1 = outerR * Math.sin(i * degToPi + this.rotateAngle);\r\n      const x2 = outerR * Math.cos((i + 1) * degToPi + this.rotateAngle);\r\n      const y2 = outerR * Math.sin((i + 1) * degToPi + this.rotateAngle);\r\n      if (i % 10 < 5) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(x1, y1);\r\n        ctx.lineTo(x2, y2);\r\n        ctx.lineWidth = 1;\r\n        ctx.stroke();\r\n      }\r\n    }\r\n    // 護盾\r\n    ctx.beginPath();\r\n    ctx.lineWidth = this.shieldLineW;\r\n    // 如果 shooter 狀態為 shield，護盾變為 180°\r\n    if (this.state !== 'shield') {\r\n      ctx.arc(0, 0, this.shieldR, 135 * degToPi + this.rotateAngle, 225 * degToPi + this.rotateAngle);\r\n    } else {\r\n      ctx.arc(0, 0, this.shieldR, 90 * degToPi + this.rotateAngle, 270 * degToPi + this.rotateAngle);\r\n    }\r\n    if (!this.isProtect) {\r\n      ctx.strokeStyle = this.color;\r\n    } else {\r\n      ctx.strokeStyle = globalColor.blue;\r\n      this.isProtect = false;\r\n    }\r\n    ctx.stroke();\r\n    // 砲口\r\n    ctx.beginPath();\r\n    ctx.save();\r\n    ctx.shadowColor = 'rgba(255, 255, 255, 0.4)';\r\n    ctx.shadowBlur = 16;\r\n    ctx.rotate(this.rotateAngle);\r\n    ctx.translate(this.r + 8, 0);\r\n    ctx.moveTo(0, 0);\r\n    // 下方長方形長 13.6、寬（高） 10.2\r\n    // 上方梯形高 11.8、上邊寬 6.8\r\n    ctx.lineTo(0, 6.8);\r\n    ctx.lineTo(10.2, 6.8);\r\n    ctx.lineTo(22.1, 3.4);\r\n    ctx.lineTo(22.1, -3.4);\r\n    ctx.lineTo(10.2, -6.8);\r\n    ctx.lineTo(0, -6.8);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    ctx.restore();\r\n    ctx.restore();\r\n    // 發射子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n  update() {\r\n    this.rotateAngle = mouseMoveAngle;\r\n    this.bullets.forEach((bullet, idx) => {\r\n      bullet.update(idx);\r\n    });\r\n  }\r\n  shoot() {\r\n    const shootTime = new Date();\r\n    if (shootTime - beforeShootTime > 400) {\r\n      let bulletNum;\r\n      // 如果 shooter 狀態為 double，每次射兩發，兩發之間隔 0.16 秒\r\n      if (this.state !== 'double') {\r\n        bulletNum = 1;\r\n      } else {\r\n        bulletNum = 2;\r\n      }\r\n      for (let i = 0; i < bulletNum; i++) {\r\n        if (this.state !== 'wave') {\r\n          setTimeout(() => {\r\n            this.bulletNum += 1;\r\n            this.bullets.push(new ShooterBullet({\r\n              // axisRotateR: 62 * 0.85,\r\n              axisRotateR: 52.7,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n            playSound('membrane', 'D3');\r\n          }, 160 * i);\r\n        } else {\r\n          setTimeout(() => {\r\n            this.bulletNum += 1;\r\n            this.bullets.push(new ShooterBullet({\r\n              waveLength: getRandom(40, 80),\r\n              waveFreq: getRandom(2, 4) / 10,\r\n              waveAmp: getRandom(4, 8),\r\n              waveFlow: getRandom(4, 8),\r\n              // axisRotateR: 70 * 0.85,\r\n              axisRotateR: 59.5,\r\n              rotateAngle: mouseMoveAngle,\r\n            }));\r\n            playSound('mono', 'F2', '4n', 0, -10);\r\n          }, 160 * i);\r\n        }\r\n      }\r\n      beforeShootTime = shootTime;\r\n    }\r\n  }\r\n  getProp(propName) {\r\n    // 持續秒數\r\n    let lastTime;\r\n    switch (propName) {\r\n      case 'heart':\r\n        this.recoverHeart();\r\n        lastTime = 0;\r\n        gameCrawler.textContent = 'GAIN LIFE💕';\r\n        break;\r\n      case 'crackdown':\r\n        this.drawCrackdownEffect();\r\n        lastTime = 0;\r\n        gameCrawler.textContent = 'BOOM💥';\r\n        break;\r\n      case 'shield':\r\n        lastTime = 25000;\r\n        gameCrawler.textContent = 'EXTEND SHIELD💪';\r\n        break;\r\n      case 'double':\r\n        lastTime = 20000;\r\n        gameCrawler.textContent = 'DOUBLE SHOOT✌️';\r\n        break;\r\n      case 'wave':\r\n        lastTime = 15000;\r\n        gameCrawler.textContent = 'WAVE BULLET🌊';\r\n        break;\r\n      default:\r\n        lastTime = 0;\r\n    }\r\n    // 將道具設為 shooter 的狀態\r\n    this.state = propName;\r\n    // 時間到後，移除道具效果\r\n    setTimeout(() => {\r\n      this.state = '';\r\n      // 重新道具計時\r\n      game.generateProp();\r\n    }, lastTime);\r\n    // 顯示道具效果持續時間\r\n    this.displayPropInfo(propName, lastTime);\r\n    if (propName !== 'crackdown') {\r\n      playSound('synth', 'E5');\r\n      playSound('synth', 'G5', '8n', 160);\r\n    }\r\n  }\r\n  // 繪製清場效果\r\n  drawCrackdownEffect() {\r\n    let crackdownTime = 1;\r\n    const boss = game.boss;\r\n    const effect = () => {\r\n      if (!game.isPause) {\r\n        crackdownTime += 1;\r\n      }\r\n      ctx.save();\r\n      ctx.beginPath();\r\n      ctx.shadowColor = 'rgba(255, 255, 255, 0.72)';\r\n      ctx.shadowBlur = 2;\r\n      // 透明度從 1 到 0\r\n      ctx.strokeStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 98})`;\r\n      ctx.fillStyle = `rgba(255, 255, 255, ${(100 - crackdownTime) / 490})`;\r\n      ctx.lineWidth = 5;\r\n      /**\r\n       * baseLog() 從 0 到 3\r\n       * 所以 (((crackdownTime - 2) / 98) * 26) + 1 為從 1 到 27\r\n       * 清場半徑因此為從 0 到 528\r\n       */\r\n      const effectR = 176 * baseLog(3, (((crackdownTime - 2) / 98) * 26) + 1);\r\n      ctx.arc(gameW / 2, gameH / 2, effectR, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.stroke();\r\n      ctx.restore();\r\n      // 清除敵人\r\n      game.circles.forEach((circle, idx) => {\r\n        if (effectR > circle.axisRotateR) {\r\n          enemyMethods.dieEffect(circle.r, originPos(circle.axisRotateR, circle.axisRotateAngle).x, originPos(circle.axisRotateR, circle.axisRotateAngle).y, '245, 175, 95');\r\n          game.circles.splice(idx, 1);\r\n        }\r\n      });\r\n      game.triangles.forEach((triangle, idx) => {\r\n        if (effectR > triangle.axisRotateR) {\r\n          enemyMethods.dieEffect(triangle.r, originPos(triangle.axisRotateR, triangle.axisRotateAngle).x, originPos(triangle.axisRotateR, triangle.axisRotateAngle).y, '54, 118, 187');\r\n          game.triangles.splice(idx, 1);\r\n        }\r\n      });\r\n      game.polygons.forEach((polygon, idx) => {\r\n        if (effectR > polygon.axisRotateR.whole) {\r\n          if (polygon.HP.whole) {\r\n            const polygonWholeR = (34 + 21) / 2;\r\n            enemyMethods.dieEffect(polygonWholeR, polygon.originPos('whole').x, polygon.originPos('whole').y, '231, 70, 93');\r\n          } else {\r\n            if (polygon.HP.big) {\r\n              const polygonBigR = (34 + 22) / 2;\r\n              enemyMethods.dieEffect(polygonBigR, polygon.originPos('big').x, polygon.originPos('big').y, '231, 70, 93');\r\n              game.polygons.splice(idx, 1);\r\n            }\r\n            if (polygon.HP.small) {\r\n              const polygonSmallR = (23 + 21) / 2;\r\n              enemyMethods.dieEffect(polygonSmallR, polygon.originPos('small').x, polygon.originPos('small').y, '231, 70, 93');\r\n              game.polygons.splice(idx, 1);\r\n            }\r\n          }\r\n          game.polygons.splice(idx, 1);\r\n        }\r\n      });\r\n      game.subTris.forEach((subTriangle, idx) => {\r\n        if (effectR > subTriangle.axisRotateR) {\r\n          game.subTris.splice(idx, 1);\r\n        }\r\n      });\r\n      // 清除 boss\r\n      if (game.boss) {\r\n        if (effectR > boss.axisRotateR && boss.HP === 0) {\r\n          enemyMethods.bossDieResult();\r\n        }\r\n      }\r\n      if (crackdownTime < 100) {\r\n        requestAnimationFrame(effect);\r\n      }\r\n    }\r\n    requestAnimationFrame(effect);\r\n    if (boss) {\r\n      boss.HP -= 1;\r\n    }\r\n    // playSound('duo', 'F4', '2n');\r\n    playSound('synth', 'C6', '2n');\r\n    // playSound('synth', 'G2', '8n', 0, 20);\r\n    // playSound('duo', 'F2', '2n', 0, 15);\r\n    // playSound('duo', 'E2', '2n', 0, 10);\r\n    // playSound('duo', 'D2', '8n', 1000, 10);\r\n  }\r\n  // 恢復一個愛心命\r\n  recoverHeart() {\r\n    const heart = document.createElement('DIV');\r\n    heart.classList.add('panel__game-heart');\r\n    heartWrapper.appendChild(heart);\r\n    this.hearts += 1;\r\n  }\r\n  displayPropInfo(propName, lastTime) {\r\n    if (propName === 'crackdown' || propName === 'heart') return;\r\n    // prop.style.opacity = 1;\r\n    prop.classList.remove('op0');\r\n    propImg.src = `../img/${propName}--panel.svg`;\r\n    lastTime /= 1000;  \r\n    propLastTime.textContent = lastTime;\r\n    const countLastTime = () => {\r\n      const propInfoTimer = setTimeout(() => {\r\n        if (game.isPause) {\r\n          countLastTime();\r\n          return;\r\n        }\r\n        // 遊戲結束時，清除計時器\r\n        if (!game.isStart) {\r\n          // prop.style.opacity = 0;\r\n          clearTimeout(propInfoTimer);\r\n          return;\r\n        }\r\n        lastTime -= 1;\r\n        propLastTime.textContent = lastTime >= 10 ? lastTime : `0${lastTime}`;\r\n        if (lastTime) {\r\n          countLastTime();\r\n        } else {\r\n          // prop.style.opacity = 0;\r\n          prop.classList.add('op0');\r\n          clearTimeout(propInfoTimer);\r\n        }\r\n      }, 1000);\r\n    }\r\n    countLastTime();\r\n  }\r\n}\r\n\r\n\r\n\r\nclass ShooterBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      // bodyLen: 15 * 0.85,\r\n      bodyLen: 12.75,\r\n      axisRotateR: 0,\r\n      color: globalColor.white,\r\n      v: 10,\r\n      rotateAngle: 0,\r\n      waveLength: 40,\r\n      waveFreq: 0.2,\r\n      waveAmp: 4,\r\n      waveFlow: 4,\r\n    };\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n    ctx.translate(gameW / 2, gameH / 2);\r\n    ctx.rotate(this.rotateAngle);\r\n    // 如果 shooter 狀態非 wave\r\n    if (game.shooter.state !== 'wave') {\r\n      // 殘影\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\r\n      // ctx.arc(-7 * 0.85 + this.axisRotateR, 0, 3 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-5.95 + this.axisRotateR, 0, 2.15, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';\r\n      // ctx.arc(-12 * 0.85 + this.axisRotateR, 0, 2 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-10.2 + this.axisRotateR, 0, 1.7, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';\r\n      // ctx.arc(-15 * 0.85 + this.axisRotateR, 0, 1 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(-12.75 + this.axisRotateR, 0, 0.85, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 園底\r\n      ctx.beginPath();\r\n      ctx.fillStyle = this.color;\r\n      // ctx.arc(0 + this.axisRotateR, 0, 4 * 0.85, 0, Math.PI * 2);\r\n      ctx.arc(0 + this.axisRotateR, 0, 3.4, 0, Math.PI * 2);\r\n      ctx.fill();\r\n      // 尖頭\r\n      ctx.beginPath();\r\n      // ctx.moveTo(3 * 0.85 + this.axisRotateR, 3 * 0.85);\r\n      ctx.moveTo(2.55 + this.axisRotateR, 2.55);\r\n      ctx.lineTo(this.bodyLen + this.axisRotateR, 0);\r\n      // ctx.lineTo(3 * 0.85 + this.axisRotateR, -3 * 0.85);\r\n      ctx.lineTo(2.55 + this.axisRotateR, -2.55);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    } else {\r\n      drawWaveBullet(this, 'axisRotateR', 1.6, 'rgba(255, 255, 255, 0.72)');\r\n    }\r\n    ctx.restore();\r\n  }\r\n  update(bulletIdx) {\r\n    // 移動子彈\r\n    this.axisRotateR += this.v;\r\n    let anglePanFn;\r\n    let shotRRangeFn;\r\n    // 判斷子彈為哪一類型\r\n    // 一般類型\r\n    if (game.shooter.state !== 'wave') {\r\n      const bulletMoveLen = this.axisRotateR + this.bodyLen;\r\n      // 判斷子彈有無射中圓形\r\n      game.circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= (circle.axisRotateR - (circle.r / 2))) && (bulletMoveLen <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95');\r\n      });\r\n      // 判斷子彈有無射中三角形\r\n      game.triangles.forEach((triangle, triIdx) => {\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= triangle.axisRotateR) && (bulletMoveLen <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187');\r\n      });\r\n      // 判斷子彈有無射中多邊形\r\n      game.polygons.forEach((polygon, polyIdx) => {\r\n        // 當多邊形未分裂\r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (bulletMoveLen >= sideA) && (bulletMoveLen <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn);\r\n        } else {\r\n          // 當多邊形分裂\r\n          // 大分裂\r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn);\r\n          }\r\n          // 小分裂\r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (bulletMoveLen >= sideA + 8) && (bulletMoveLen <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn);\r\n          }\r\n        }\r\n      });\r\n      // 判斷子彈有無射中 boss\r\n      const boss = game.boss;\r\n      if (boss) {\r\n        anglePanFn = () => {\r\n          return Math.asin(18 / (boss.axisRotateR + 6));\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (bulletMoveLen >= (boss.axisRotateR + 9 + 8)) && (bulletMoveLen <= (boss.axisRotateR + 28));\r\n        }\r\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'ordinary', true);\r\n      }\r\n    } else {\r\n      // 波狀類型\r\n      // 有無射中圓形\r\n      game.circles.forEach((circle, cirIdx) => {\r\n        anglePanFn = () => {\r\n          return Math.asin(circle.r / circle.axisRotateR);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= (circle.axisRotateR - (circle.r / 2))) && (this.axisRotateR <= (circle.axisRotateR + (circle.r / 2)));\r\n        }\r\n        this.attackEnemy(circle, cirIdx, game.circles, bulletIdx, anglePanFn, shotRRangeFn, '245, 175, 95', 'wave');\r\n      });\r\n      // 有無射中三角形\r\n      game.triangles.forEach((triangle, triIdx) => {\r\n        anglePanFn = () => {\r\n          const lengthX = triangle.axisRotateR + (triangle.r / 2);\r\n          const lengthY = (triangle.r / 2) * Math.sqrt(3);\r\n          return Math.atan2(lengthY, lengthX);\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= triangle.axisRotateR) && (this.axisRotateR <= (triangle.axisRotateR + (triangle.r / 2)));\r\n        }\r\n        this.attackEnemy(triangle, triIdx, game.triangles, bulletIdx, anglePanFn, shotRRangeFn, '54, 118, 187', 'wave');\r\n      });\r\n      // 有無射中多邊形\r\n      game.polygons.forEach((polygon, polyIdx) => {\r\n        // 當多邊形尚未分裂\r\n        if (polygon.HP.whole) {\r\n          shotRRangeFn = () => {\r\n            const sideA = polygon.axisRotateR.whole;\r\n            return (this.axisRotateR >= sideA) && (this.axisRotateR <= (sideA + 9));\r\n          }\r\n          this.attackPolygon(polygon, polyIdx, 'whole', 34, 21, (360 - (202 + 75)), (8 + 75), 75, bulletIdx, shotRRangeFn, 'wave');\r\n        } else {\r\n          // 當多邊形已經分裂\r\n          // 大分裂\r\n          if (polygon.HP.big) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.big;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'big', 34, 23, ((202 + 44) - 180), (180 - (70 + 44)), 44, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // 小分裂\r\n          if (polygon.HP.small) {\r\n            shotRRangeFn = () => {\r\n              const sideA = polygon.axisRotateR.small;\r\n              return (this.axisRotateR >= sideA + 8) && (this.axisRotateR <= (sideA + 16));\r\n            }\r\n            this.attackPolygon(polygon, polyIdx, 'small', 22, 23, ((255 + 17.5) - 180), (180 - (70 + 17.5)), 17.5, bulletIdx, shotRRangeFn, 'wave');\r\n          }\r\n          // 如果大小分裂都已被擊斃，移除此多邊形\r\n          if (polygon.HP.big === 0 && polygon.HP.small === 0) {\r\n            game.polygons.splice(polyIdx, 1);\r\n            // 電池加一\r\n            game.batteryNum += 1;\r\n            batteryNum.textContent = game.batteryNum;\r\n          }\r\n        }\r\n      });\r\n      // 判斷子彈有無射中 boss\r\n      const boss = game.boss;\r\n      if (boss) {\r\n        anglePanFn = () => {\r\n          return Math.asin(18 / (boss.axisRotateR + 6));\r\n        }\r\n        shotRRangeFn = () => {\r\n          return (this.axisRotateR >= (boss.axisRotateR + 9 + 8)) && (this.axisRotateR <= (boss.axisRotateR + 28));\r\n        }\r\n        this.attackEnemy(boss, NaN, null, bulletIdx, anglePanFn, shotRRangeFn, '255, 255, 255', 'wave', true);\r\n      }\r\n    }\r\n    // 當子彈超出邊界\r\n    this.beyondBoundary(bulletIdx);\r\n  }\r\n  // 攻擊敵人（圓形、三角形）\r\n  // FIXME 當敵人太靠近會打不到\r\n  attackEnemy(enemy, enemyIdx, enemies, bulletIdx, anglePanFn, shotRRangeFn, colorRGB, type = 'ordinary', isBoss = false) {\r\n    /**\r\n     * 射中角度範圍\r\n     * 圓形：取得兩個外切線所構成角度的一半\r\n     * 三角形：取得射中角度範圍的一半\r\n     */\r\n    const enemyAnglePan = anglePanFn();\r\n    const enemyAngleMinus = (enemy.axisRotateAngle % 360) * degToPi - enemyAnglePan;\r\n    const enemyAngleAdd = (enemy.axisRotateAngle % 360) * degToPi + enemyAnglePan;\r\n    const shotAngleRange = this.judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type);\r\n    // 射中距離範圍\r\n    const shotRRange = shotRRangeFn();\r\n\r\n    if (!gameCrawler.textContent) {\r\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE🔥' : 'BANG👊';\r\n    }\r\n    // 判斷子彈有無射中敵人\r\n    if (shotAngleRange && shotRRange) {\r\n      // 移除子彈\r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      // 扣敵人 1 生命值\r\n      enemy.HP -= 1;\r\n      if (type === 'ordinary') {\r\n        playSound('membrane', 'D2');\r\n      } else {\r\n        playSound('mono', 'C2', '8n', 0, -10);\r\n      }\r\n      // 若敵人生命值為 0\r\n      if (enemy.HP === 0) {\r\n        if (isBoss) {\r\n          // 移除 boss\r\n          enemyMethods.bossDieResult();\r\n          return;\r\n        } else {\r\n          // 移除敵人\r\n          enemies.splice(enemyIdx, 1);\r\n          // 移除效果\r\n          enemyMethods.dieEffect(enemy.r, originPos(enemy.axisRotateR, enemy.axisRotateAngle).x, originPos(enemy.axisRotateR, enemy.axisRotateAngle).y, colorRGB);\r\n          // 電池加一\r\n          game.batteryNum += 1;\r\n          batteryNum.textContent = game.batteryNum;\r\n        }\r\n      }\r\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE😤\" : 'HIT👍';\r\n    }\r\n  }\r\n  // 攻擊多邊形\r\n  attackPolygon(polygon, polyIdx, form, sideB1Len, sideB2Len, angleAB1, angleAB2, rotateAngleJudge, bulletIdx, shotRRangeFn, type = 'ordinary') {\r\n    const polyAxisRotateAngle = polygon.axisRotateAngle[form];\r\n    const polyRotate = polygon.rotate[form];\r\n    // 取得兩側射中最大角度\r\n    const sideA = polygon.axisRotateR[form];\r\n    const sideB1 = sideB1Len;\r\n    const sideB2 = sideB2Len;\r\n    /**\r\n     * 兩側點愈靠近軸心，夾角便愈大\r\n     *   whole: 8°, 202°\r\n     *   big: 70°, 202°\r\n     *   small: 70°, 255°\r\n\r\n     * 相同軸半徑下，當多邊形呈某一角度，兩側點離軸心（幾乎）最近，angleB 相同\r\n     *   whole: axisRotateAngle 180°, rotate 75°\r\n     *     270 - 202 = 68\r\n     *     90 - 8 = 82\r\n     *     (68 + 82) / 2 = 75\r\n     * \r\n     *   big: axisRotateAngle 0°, rotate 44°\r\n     *     270 - 202 = 68\r\n     *     90 - 70 = 20\r\n     *     (68 + 20) / 2 = 44\r\n     * \r\n     *   small: axisRotateAngle 0°, rotate 17.5°\r\n     *     270 - 255 = 15\r\n     *     90 - 70 = 20\r\n     *     (15 + 20) / 2 = 17.5\r\n     */\r\n    const sideC1 = cosineFormula(sideA, sideB1, angleAB1);\r\n    const sideC2 = cosineFormula(sideA, sideB2, angleAB2);\r\n    // 當多邊形的 axisRotateAngle、rotate 不同，要加上與減去的角度也不一樣\r\n    const bottomJudge = (polyAxisRotateAngle <= 180) && ((polyRotate % 360) < rotateAngleJudge || (polyRotate % 360) >= (rotateAngleJudge + 180));\r\n    const topJudge = (polyAxisRotateAngle > 180) && ((polyRotate % 360) >= rotateAngleJudge || (polyRotate % 360) < (rotateAngleJudge + 180));\r\n    let angleB1;\r\n    let angleB2;\r\n\r\n    if (!gameCrawler.textContent) {\r\n      gameCrawler.textContent = Math.random() >= 0.5 ? 'FIRE🔥' : 'BANG👊';\r\n    }\r\n    if (bottomJudge || topJudge) {\r\n      angleB1 = getAngleB(sideA, sideB2, sideC2);\r\n      angleB2 = getAngleB(sideA, sideB1, sideC1);\r\n    } else {\r\n      angleB1 = getAngleB(sideA, sideB1, sideC1);\r\n      angleB2 = getAngleB(sideA, sideB2, sideC2);\r\n    }\r\n    /**\r\n     * 射中角度範圍\r\n     * 多邊形雖不會繞軸旋轉，axisRotateAngle 固定，但分裂時可能會超過 360°，故 % 360\r\n     */\r\n    const polyAngleMinus = (polyAxisRotateAngle % 360) * degToPi - angleB1;\r\n    const polyAngleAdd = (polyAxisRotateAngle % 360) * degToPi + angleB2;\r\n    const shotAngleRange = this.judgeShotAngleRange(polyAngleMinus, polyAngleAdd, type);\r\n    // 射中距離範圍\r\n    const shotRRange = shotRRangeFn();\r\n    // 判斷子彈有無射中多邊形\r\n    if (shotAngleRange && shotRRange) {\r\n      // 移除子彈\r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n      // 扣 1 生命值\r\n      polygon.HP[form] -= 1;\r\n      if (form === 'whole') {\r\n        playSound('synth', 'D6', '16n');\r\n      }\r\n      // 若大或小分裂生命值為 0\r\n      if (polygon.HP.big === 0 || polygon.HP.small === 0) {\r\n        // 移除效果\r\n        const polygonR = form === 'big' ? (34 + 22) / 2 : (23 + 21) / 2;\r\n        enemyMethods.dieEffect(polygonR, polygon.originPos(form).x, polygon.originPos(form).y, '231, 70, 93');\r\n      }\r\n      // 如果大小分裂都被擊斃了，那就移除此多邊形\r\n      if (polygon.HP.big === 0 && polygon.HP.small === 0) {\r\n        game.polygons.splice(polyIdx, 1);\r\n        // 電池加一\r\n        game.batteryNum += 1;\r\n        batteryNum.textContent = game.batteryNum;\r\n      }\r\n      gameCrawler.textContent = Math.random() >= 0.8 ? \"BULL'S-EYE😤!\" : 'HIT👍';\r\n      if (type === 'ordinary') {\r\n        playSound('membrane', 'D2');\r\n      } else {\r\n        playSound('mono', 'C2', '8n', 0, -10);\r\n      }\r\n    }\r\n  }\r\n  // 判斷射中角度範圍\r\n  judgeShotAngleRange(enemyAngleMinus, enemyAngleAdd, type) {\r\n    let shooterRotateAngle;\r\n    // 當敵人 axisRotateAngle 在 360° 附近，且 shooter 槍口朝下（0° 下方）\r\n    if (enemyAngleAdd > Math.PI * 2 && this.rotateAngle < Math.PI) {\r\n      shooterRotateAngle = this.rotateAngle + Math.PI * 2;\r\n    } else if (\r\n      // 當敵人 axisRotateAngle 皆小於 0\r\n      (enemyAngleMinus < 0 && enemyAngleAdd < 0) || \r\n      // 當敵人 axisRotateAngle 在 0° 附近，且 shooter 槍口朝上（0° 上方）\r\n      (enemyAngleMinus < 0 && enemyAngleAdd > 0 && this.rotateAngle > Math.PI)) {\r\n      shooterRotateAngle = this.rotateAngle - Math.PI * 2;\r\n    } else {\r\n      shooterRotateAngle = this.rotateAngle;\r\n    }\r\n    // 判斷子彈為哪一類型\r\n    // 一般子彈\r\n    if (type !== 'wave') {\r\n      return shooterRotateAngle >= enemyAngleMinus && shooterRotateAngle <= enemyAngleAdd;\r\n    } else {\r\n      // 波狀子彈\r\n      const shooterAnglePan = Math.atan2(this.waveLength, this.axisRotateR);\r\n      const shooterAngleMinus = shooterRotateAngle - shooterAnglePan;\r\n      const shooterAngleAdd = shooterRotateAngle + shooterAnglePan;\r\n      return (enemyAngleMinus <= shooterAngleAdd) && (enemyAngleAdd >= shooterAngleMinus);\r\n    }\r\n  }\r\n  // 當子彈超出邊界\r\n  beyondBoundary(bulletIdx) {\r\n    /**\r\n     * 856 / 2 = 428\r\n     * 624 / 2 = 312\r\n     * Math.sqrt(428 * 428 + 312 * 312) = 529.6\r\n     */\r\n    if (this.axisRotateR >= 530) {\r\n      game.shooter.bullets.splice(bulletIdx, 1);\r\n    }\r\n  }\r\n}","class Triangle {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      r: 26,\r\n      rotate: 0,\r\n      scale: 0,\r\n      axisRotateRV: 0,\r\n      axisRotateAngleV: 0,\r\n      color: globalColor.blue,\r\n      bullets: [],\r\n      beforeRotateAxisAngleTime: new Date(),\r\n      beforeShootTime: new Date(),\r\n      HP: 4,\r\n      isGeneratedSub: false,\r\n      shootTimer: null,\r\n      beginAppear: true,\r\n      isBossGenerate: false,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n\r\n\r\n  \r\n  draw() {\r\n    const triOuterBigR = this.r + 4;\r\n    const triInnerBigR = this.r - 16;\r\n    const triInnerSmallR = this.r - 22;\r\n    ctx.save();\r\n    // 淡三角\r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    ctx.scale(this.scale, this.scale);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.save();\r\n    ctx.translate(4, 0);\r\n    ctx.beginPath();\r\n    ctx.moveTo(triOuterBigR * Math.cos(60 * degToPi), triOuterBigR * Math.sin(60 * degToPi));\r\n    ctx.$triLineTo(triOuterBigR, 180);\r\n    ctx.$triLineTo(triOuterBigR, 300);\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // 主體三角\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.r * Math.cos(60 * degToPi), this.r * Math.sin(60 * degToPi));\r\n    ctx.$triLineTo(this.r, 180);\r\n    ctx.$triLineTo(this.r, 300);\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // 大白三角\r\n    ctx.translate(0, -2.8);\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(triInnerBigR, 90);\r\n    ctx.$triLineTo(triInnerBigR, 150);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 小白三角\r\n    ctx.translate(8 * Math.cos(-40 * degToPi), 8 * Math.sin(-40 * degToPi))\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.$triLineTo(triInnerSmallR, 90);\r\n    ctx.$triLineTo(triInnerSmallR, 150);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // 繪製三角子彈\r\n    this.bullets.forEach((bullet) => {\r\n      bullet.draw();\r\n    });\r\n  }\r\n\r\n\r\n\r\n  update(idx) {\r\n    this.beginAppear && this.appear(this.isBossGenerate);\r\n    this.beginAppear = false;\r\n    game.isStart && enemyMethods.approach(this);\r\n    // 更新三角子彈\r\n    this.bullets.forEach((bullet, idx, arr) => {\r\n      bullet.update(idx, arr);\r\n    });\r\n    // 每 4-8 秒，三角移動 + 自身旋轉\r\n    const rotateAxisAngleTime = new Date();\r\n    let randomRotateAngle;\r\n    if (rotateAxisAngleTime - this.beforeRotateAxisAngleTime > getRandom(4000, 8000)) {\r\n      // 旋轉時不發射子彈\r\n      if (this.shootTimer) {\r\n        clearTimeout(this.shootTimer);\r\n      }\r\n      randomRotateAngle = (Math.random() >= 0.25 ? 1 : -1) * getRandom(45, 75);\r\n      // 以 0.8 秒移動\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `+=${randomRotateAngle}`,\r\n        ease: Power0.easeNone,\r\n      });\r\n      // 以 1.2 秒自身旋轉\r\n      TweenLite.to(this, 1.2, {\r\n        rotate: `+=${randomRotateAngle + 360}`,\r\n        ease: Power2.easeInOut,\r\n        onComplete: () => {\r\n          // 移動完後發射子彈\r\n          // 當遊戲尚未開始、暫停，或此三角形已死掉，便不發射子彈\r\n          if (!game.isStart || game.isPause || this.HP === 0) return;\r\n          this.shoot();\r\n          // 發射一顆子彈後，每 2.4-7.2 秒發射第二發子彈\r\n          this.shootTimer = setTimeout(() => {\r\n            if (!game.isStart || this.HP === 0) return;\r\n            this.shoot();\r\n          }, getRandom(2400, 7200));\r\n        }\r\n      });\r\n      this.beforeRotateAxisAngleTime = rotateAxisAngleTime;\r\n    }\r\n    // 當生命值剩 2，派副三角形攻擊\r\n    if (this.HP === 2 && !this.isGeneratedSub) {\r\n      for (let i = 1; i <= 2; i += 1) {\r\n        game.subTris.push(new TriSub({\r\n          axisRotateR: this.axisRotateR,\r\n          axisRotateAngle: this.axisRotateAngle,\r\n          rotate: this.rotate,\r\n          order: i,\r\n        }));\r\n      }\r\n      gameCrawler.textContent = 'COUNTERATTACK🤛';\r\n      this.isGeneratedSub = true;\r\n      playSound('synth', 'C6', '16n');\r\n    }\r\n    // 當三角形撞上 shooter\r\n    enemyMethods.hitShooter(game.triangles, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n\r\n\r\n\r\n  shoot() {\r\n    this.bullets.push(new TriBullet({\r\n      p: {\r\n        x: originPos(this.axisRotateR, this.axisRotateAngle).x,\r\n        y: originPos(this.axisRotateR, this.axisRotateAngle).y,\r\n      },\r\n      axisRotateR: this.axisRotateR,\r\n      rotateAngle: this.rotate,\r\n    }));\r\n    gameCrawler.textContent = Math.random() >= 0.8 ? 'UNDER ATTACK🤕' : 'ATTACK⚡️';\r\n    playSound('membrane', 'G5');\r\n  }\r\n\r\n\r\n\r\n  appear(isBossGenerate) {\r\n    gameCrawler.textContent = '⚠ ENEMY IS COMING';\r\n    TweenLite.to(this, 0.8, {\r\n      scale: 1,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    let rotateNum = 0;\r\n    if (isBossGenerate) {\r\n      rotateNum = getRandom(40, 80);\r\n      const rNum = getRandom(40, 80);\r\n      TweenLite.to(this, 1.6, {\r\n        axisRotateAngle: `+=${rotateNum}`,\r\n        axisRotateR: `+=${rNum}`,\r\n        ease: Power2.easeOut,\r\n      });\r\n    }\r\n    TweenLite.to(this, 1.6, {\r\n      rotate: `+=${rotateNum + 360}`,\r\n      ease: Back.easeOut.config(1.7),\r\n    });\r\n    game.isStart && playSound('synth', 'B4', '4n');\r\n  }\r\n}\r\n\r\n\r\n\r\nclass TriSub {\r\n  constructor(args) {\r\n    const def = {\r\n      axisRotateR: 0,\r\n      axisRotateAngle: 0,\r\n      // r: 26 * 0.4,\r\n      r: 10.4,\r\n      rotate: 0,\r\n      rotateV: 4,\r\n      color: globalColor.blue,\r\n      HP: 2,\r\n      isReproduceMoving: false,\r\n      order: 0,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    const triOuterBigR = this.r + 1.6;\r\n    const triInnerBigR = this.r - 6.4;\r\n    const triInnerSmallR = this.r - 8.8;\r\n    ctx.save();\r\n    // 淡三角\r\n    ctx.translate(originPos(this.axisRotateR, this.axisRotateAngle).x, originPos(this.axisRotateR, this.axisRotateAngle).y);\r\n    // ctx.scale(0.4, 0.4);\r\n    ctx.rotate(this.rotate * degToPi);\r\n    ctx.save();\r\n    ctx.translate(0.8, -Math.sqrt(1.92));\r\n    ctx.beginPath();\r\n    ctx.moveTo(triOuterBigR * Math.cos(0), triOuterBigR * Math.sin(0));\r\n    ctx.lineTo(triOuterBigR * Math.cos(120 * degToPi), triOuterBigR * Math.sin(120 * degToPi));\r\n    ctx.lineTo(triOuterBigR * Math.cos(240 * degToPi), triOuterBigR * Math.sin(240 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n    // 主體三角\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.r * Math.cos(0), this.r * Math.sin(0));\r\n    ctx.lineTo(this.r * Math.cos(120 * degToPi), this.r * Math.sin(120 * degToPi));\r\n    ctx.lineTo(this.r * Math.cos(240 * degToPi), this.r * Math.sin(240 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    // 大白三角\r\n    ctx.translate(-1.28, -0.64);\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(triInnerBigR * Math.cos(30 * degToPi), triInnerBigR * Math.sin(30 * degToPi));\r\n    ctx.lineTo(triInnerBigR * Math.cos(90 * degToPi), triInnerBigR * Math.sin(90 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 小白三角\r\n    ctx.translate(0, -3.52);\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(triInnerSmallR * Math.cos(30 * degToPi), triInnerSmallR * Math.sin(30 * degToPi));\r\n    ctx.lineTo(triInnerSmallR * Math.cos(90 * degToPi), triInnerSmallR * Math.sin(90 * degToPi));\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx) {\r\n    this.rotate += this.rotateV;\r\n    if (!this.isReproduceMoving) {\r\n      TweenLite.to(this, 0.8, {\r\n        axisRotateAngle: `${this.order === 1 ? '+=' : '-='}10`,\r\n        ease: Power2.easeOut,\r\n        onComplete: () => {\r\n          TweenLite.to(this, 1.6, {\r\n            axisRotateR: 0,\r\n            ease: Power1.easeIn,\r\n          });\r\n        }\r\n      });\r\n      this.isReproduceMoving = true;\r\n    }\r\n    // 當小三角形撞上 shooter\r\n    enemyMethods.hitShooter(game.subTris, idx, 'triangle', this.axisRotateR, this.axisRotateAngle);\r\n  }\r\n}\r\n\r\n\r\n\r\nclass TriBullet {\r\n  constructor(args) {\r\n    const def = {\r\n      p: {\r\n        x: 0,\r\n        y: 0,\r\n      },\r\n      moveX: 0,\r\n      moveXV: -4,\r\n      rotateAngle: 0,\r\n      color: globalColor.blue,\r\n    }\r\n    Object.assign(def, args);\r\n    Object.assign(this, def);\r\n  }\r\n  draw() {\r\n    ctx.save();\r\n    ctx.translate(this.p.x, this.p.y);\r\n    ctx.rotate(this.rotateAngle * degToPi);\r\n    ctx.translate(this.moveX, 0);\r\n    // 主體三角子彈\r\n    ctx.fillStyle = this.color;\r\n    ctx.beginPath();\r\n    ctx.moveTo(-16, 0);\r\n    ctx.$triLineTo(38, 174);\r\n    ctx.$triLineTo(16.8, 200);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 淡三角子彈\r\n    ctx.fillStyle = 'rgba(54, 118, 187, 0.34)';\r\n    ctx.beginPath();\r\n    ctx.moveTo(-16.4, 0);\r\n    ctx.$triLineTo(38, 174);\r\n    ctx.$triLineTo(15.6, 168);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n  update(idx, arr) {\r\n    // 三角子彈移動\r\n    this.moveX += this.moveXV;\r\n    // 子彈擊中 shooter\r\n    enemyMethods.attackShooter(this, idx, arr, 37.8);\r\n    // 當子彈超出邊界\r\n    this.beyondBoundary(idx, arr);\r\n  }\r\n  // 當子彈超出邊界\r\n  beyondBoundary(idx, arr) {\r\n    // Math.sqrt(856 * 856 + 624 * 624) = 1059.3\r\n    if (this.moveX <= -1060) {\r\n      arr.splice(idx, 1);\r\n    }\r\n  }\r\n}","ctx.$triLineTo = function (r, angle, angleAdd = 0) {\r\n  return ctx.lineTo(r * Math.cos(angle * degToPi + angleAdd), r * Math.sin(angle * degToPi + angleAdd));\r\n}\r\n\r\n// 繪製波狀子彈\r\nfunction drawWaveBullet(bullet, originPos, lineWidth, shadowColor) {\r\n  ctx.strokeStyle = bullet.color;\r\n  ctx.lineWidth = lineWidth;\r\n  ctx.shadowColor = shadowColor;\r\n  ctx.shadowBlur = 2;\r\n  // 正半波\r\n  ctx.beginPath();\r\n  for (let i = 0; i < bullet.waveLength; i += 1) {\r\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\r\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), i);\r\n  }\r\n  ctx.stroke();\r\n  // 負半波\r\n  ctx.beginPath();\r\n  for (let i = 0; i < bullet.waveLength; i += 1) {\r\n    const degree = (i * bullet.waveFreq) + (updateTime / bullet.waveFlow);\r\n    ctx.lineTo(bullet[originPos] + (bullet.waveAmp * Math.sin(degree)), -i);\r\n  }\r\n  ctx.stroke();\r\n}\r\n\r\n// 繪製電池\r\nfunction drawBattery(p) {\r\n  ctx.save();\r\n    ctx.translate(p.x, p.y);\r\n    ctx.fillStyle = globalColor.orange;\r\n    // 瓶身\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(-24, 0);\r\n    ctx.lineTo(-24, 42);\r\n    ctx.lineTo(0, 42);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    // 瓶底\r\n    ctx.save();\r\n      ctx.translate(0, 44);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(-24, 0);\r\n      ctx.lineTo(-24, 3);\r\n      ctx.lineTo(0, 3);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 瓶蓋\r\n    ctx.fillStyle = globalColor.white;\r\n    ctx.save();\r\n      ctx.translate(-6.75, 0);\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -3);\r\n      ctx.lineTo(-10.5, -3);\r\n      ctx.lineTo(-10.5, -0);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    ctx.restore();\r\n    // 閃電\r\n    drawLightning({ x: -11, y: 9 });\r\n  ctx.restore();\r\n}\r\n\r\n\r\n\r\n// 繪製閃電\r\nfunction drawLightning(translate = { x: 0, y: 0 }, scale = 1) {\r\n  ctx.fillStyle = globalColor.white;\r\n  ctx.translate(translate.x, translate.y);\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.rotate(18 * degToPi);\r\n  ctx.lineTo(0, 10 * scale);\r\n  ctx.translate(0, 10 * scale);\r\n  ctx.rotate(-18 * degToPi);\r\n\r\n  ctx.lineTo(10 * scale, 0);\r\n  ctx.translate(10 * scale, 0);\r\n\r\n  ctx.rotate(28 * degToPi);\r\n  ctx.lineTo(0, 16 * scale);\r\n  ctx.translate(0, 16 * scale);\r\n  ctx.rotate(-28 * degToPi);\r\n\r\n  ctx.rotate(3.6 * degToPi);\r\n  ctx.lineTo(0, -10 * scale);\r\n  ctx.translate(0, -10 * scale);\r\n  ctx.rotate(-3.6 * degToPi);\r\n\r\n  ctx.lineTo(-8 * scale, 0);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n}\r\n\r\n\r\n\r\nfunction originPos(axisRotateR, axisRotateAngle) {\r\n  return {\r\n    x: (gameW / 2) + axisRotateR * Math.cos(axisRotateAngle * degToPi),\r\n    y: (gameH / 2) + axisRotateR * Math.sin(axisRotateAngle * degToPi),\r\n  };\r\n}\r\n\r\n\r\n\r\n// 以 x 為底的 y 的對數：logxy\r\nfunction baseLog(x, y) {\r\n  return Math.log(y) / Math.log(x);\r\n}\r\n\r\n\r\n\r\n// 餘弦定理\r\nfunction cosineFormula(a, b, angle) {\r\n  return Math.sqrt(a * a + b * b - 2 * a * b * Math.cos(angle * degToPi));\r\n}\r\n\r\nfunction getAngleB(a, b, c) {\r\n  return Math.acos((a * a + c * c - b * b) / (2 * a * c));\r\n}\r\n\r\n\r\n\r\n// 取得某區間的隨機亂數\r\nfunction getRandom(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n\r\n\r\n\r\nfunction playSound(instrument, note, duration = '8n', timeout = 0, volume = 0) {\r\n  if (game.isMuted) return;\r\n  let synth;\r\n  switch (instrument) {\r\n    case 'membrane':\r\n      setTimeout(() => {\r\n        synth = new Tone.MembraneSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    case 'duo':\r\n      setTimeout(() => {\r\n        synth = new Tone.DuoSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    case 'mono':\r\n      setTimeout(() => {\r\n        synth = new Tone.MonoSynth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n    default:\r\n      setTimeout(() => {\r\n        synth = new Tone.Synth().toMaster();\r\n        synth.triggerAttackRelease(note, duration);\r\n        synth.volume.value = volume;\r\n      }, timeout);\r\n      break;\r\n  }\r\n}\r\n\r\n\r\n/* 2D Vector Class */\r\nclass Vec2 {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  set(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n  move(x, y) {\r\n    this.x += x;\r\n    this.y += y;\r\n  }\r\n  add(v) {\r\n    return new Vec2(this.x + v.x, this.y + v.y);\r\n  }\r\n  sub(v) {\r\n    return new Vec2(this.x - v.x, this.y - v.y);\r\n  }\r\n  mul(s) {\r\n    return new Vec2(this.x * s, this.y * s);\r\n  }\r\n  clone() {\r\n    return new Vec2(this.x, this.y);\r\n  }\r\n  equal(v) {\r\n    return this.x === v.x && this.y === v.y;\r\n  }\r\n  get length() {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n  set length(newVal) {\r\n    const newLength = this.unit.mul(newVal);\r\n    this.set(newLength.x, newLength.y);\r\n  }\r\n  get angle() {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  get unit() {\r\n    return this.mul(1 / this.length);\r\n  }\r\n}"]}